webpackJsonp([0],[
/* 0 */,
/* 1 */,
/* 2 */,
/* 3 */,
/* 4 */,
/* 5 */,
/* 6 */,
/* 7 */,
/* 8 */,
/* 9 */,
/* 10 */,
/* 11 */,
/* 12 */,
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.COMMON_TOOLS = undefined;

var _keys = __webpack_require__(48);

var _keys2 = _interopRequireDefault(_keys);

var _typeof2 = __webpack_require__(20);

var _typeof3 = _interopRequireDefault(_typeof2);

var _stringify = __webpack_require__(12);

var _stringify2 = _interopRequireDefault(_stringify);

var _constant = __webpack_require__(14);

var _requestUtils = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var COMMON_TOOLS = exports.COMMON_TOOLS = {
    eoStringify: function eoStringify(str) {
        if (typeof str != 'string') {
            return (0, _stringify2.default)(str);
        }
        1;
        return str;
    },
    replaceAll: function replaceAll(origin, replace, string) {
        if ((typeof string === 'undefined' ? 'undefined' : (0, _typeof3.default)(string)) == 'object') {
            string = (0, _stringify2.default)(string);
            while ((string || '').toString().indexOf(origin) != -1) {
                string = string.replace(origin, replace);
            }
            string = JSON.parse(string);
        } else {
            while ((string || '').toString().indexOf(origin) != -1) {
                string = string.replace(origin, replace);
            }
        }
        return string;
    },
    eoTypeof: function eoTypeof(object) {
        var tf = typeof object === 'undefined' ? 'undefined' : (0, _typeof3.default)(object),
            ts = Object.prototype.toString.call(object);
        return null === object ? 'Null' : 'undefined' == tf ? 'Undefined' : 'boolean' == tf ? 'Boolean' : 'number' == tf ? 'Number' : 'string' == tf ? 'String' : '[object Function]' == ts ? 'Function' : '[object Array]' == ts ? 'Array' : '[object Date]' == ts ? 'Date' : 'Object';
    },
    eoLength: function eoLength(object, objType) {
        if (!objType) objType = COMMON_TOOLS.eoTypeof(object);
        switch (objType) {
            case "Object":
                {
                    return (0, _keys2.default)(object).length;
                }
            case "Null":
            case "Undefined":
                {
                    return undefined;
                }
            default:
                {
                    return object.length;
                }
        }
    },
    judgeRequestMethod: function judgeRequestMethod(methodId) {
        var method = "POST";
        switch (methodId.toString()) {
            case '1':
                method = "GET";
                break;
            case '2':
                method = "PUT";
                break;
            case '3':
                method = "DELETE";
                break;
            case '4':
                method = "HEAD";
                break;
            case '5':
                method = "OPTIONS";
                break;
            case '6':
                method = "PATCH";
                break;
            default:
                method = "POST";
        }
        return method;
    },
    handleErrorReason: function handleErrorReason(arg) {
       
        if (arg.productType == 2 && arg.oldVersion) {
            arg.errorReasonObj = arg.errorReason;
        } else {
            if ((0, _typeof3.default)(arg.errorReason) == 'object') {
                arg.errorReasonObj = arg.errorReasonObj.concat(arg.errorReason);
            } else {
                arg.errorReasonObj.push(arg.errorReason);
            }
        }
        return arg.errorReasonObj;
    },
    isNum: function isNum(s) {
        if (s != null && s !== "") {
            return !isNaN(s);
        }
        return false;
    },
    judgeResponseHeaders: function judgeResponseHeaders(arg) {
        var isMatch = true;
       
        if (arg.headerType) {
            for (var key = 0; key < arg.headerRule.length; key++) {
                var val = arg.headerRule[key];
                if (!val.headerName) continue;
                var trueHeaderValue = arg.responseHeaders[val.headerName.toLowerCase()];
                val.headerName = COMMON_TOOLS.evalBindParam(val.headerName, arg.response, arg.allResponseHeaders);
                val.headerValue = COMMON_TOOLS.evalBindParam(val.headerValue, arg.response, arg.allResponseHeaders);
                if (!(val.headerName.toLowerCase() in arg.responseHeaders) && val.checkExist == '1') {
                    isMatch = false;
                    arg.callback("返回结果Header：" + val.headerName + "不存在");
                    continue;
                }
                switch (val.matchRule.toString()) {
                    case '0':
                        {
                            break;
                        }
                    case '1':
                        {
                            if (val.headerValue != trueHeaderValue) {
                                isMatch = false;
                                arg.callback("返回头部" + val.headerName + "结果不匹配, 匹配规则为： 等于 " + val.headerValue + "，实际返回 " + trueHeaderValue);
                            }
                            break;
                        }
                    case '2':
                        {
                            if (val.headerValue == trueHeaderValue) {
                                isMatch = false;
                                arg.callback("返回头部" + val.headerName + "结果不匹配, 匹配规则为： 不等于 " + val.headerValue + "，实际返回 " + trueHeaderValue);
                            }
                            break;
                        }

                }
                if (isMatch == false && !arg.judgeSetting) {
                    break;
                }
            }
        }
        return isMatch;
    },
    selfLoopMatchJson: function selfLoopMatchJson(productType, arrMatchList, response, LANG, isJudgeAll, allResponse, allResponseHeader, jsonResultVerification) {
        isJudgeAll = isJudgeAll || false;
        jsonResultVerification = jsonResultVerification || {};
        var errorReason = [];

        function excuteLoopFun(arg) {
           
            switch (arg.objType) {
                case "Array":
                    {
                        if (arg.isLoop == "0") {
                            arg.fun(arg.arrMatchList, arg.response[0]);
                        } else {
                            arg.response.forEach(function (val, key) {
                                arg.fun(arg.arrMatchList, arg.response[key]);
                            });
                        }
                        break;
                    }
                default:
                    {
                       
                        arg.fun(arg.arrMatchList, arg.response);
                    }
            }
        }
        if (Object.prototype.toString.call(response).toLowerCase() == "[object array]" || (typeof response === 'undefined' ? 'undefined' : (0, _typeof3.default)(response)) == "object" && Object.prototype.toString.call(response).toLowerCase() == "[object object]") {
           
            if (arrMatchList.length == 0 || !arrMatchList[0].paramKey || arrMatchList == null) {
                return {
                    isMatch: true,
                    errorReason: errorReason
                };
            } else if (Object.prototype.toString.call(response).toLowerCase() == "[object array]" && jsonResultVerification.resultType == '0') {
                return {
                    isMatch: false,
                    errorReason: ["JSON根类型错误，匹配规则为 Object ,实际返回 Array"]
                };
            } else if ((typeof response === 'undefined' ? 'undefined' : (0, _typeof3.default)(response)) == "object" && Object.prototype.toString.call(response).toLowerCase() == "[object object]" && jsonResultVerification.resultType == '1') {
                return {
                    isMatch: false,
                    errorReason: ["JSON根类型错误，匹配规则为 Array ,实际返回 Object"]
                };
            } else {
                var isInt = function isInt(n) {
                    return n % 1 === 0;
                };

                var judgeMatchRule = function judgeMatchRule(arrMatch, matchResult, trueResult) {
                    var matchEotype, trueEotype;
                    var isMatch = true;
                    trueEotype = COMMON_TOOLS.eoTypeof(trueResult, true);
                    switch (Number(arrMatch.paramType)) {
                        case 1:
                            {
                               
                                matchEotype = "Int";
                                break;
                            }

                        case 2:
                            {
                                matchEotype = "Boolean";
                                break;
                            }
                        case 3:
                            {
                               
                                matchEotype = "Float";
                                break;
                            }
                        case 4:
                            {
                                matchEotype = "Array";
                                break;
                            }

                        case 5:
                            {
                                matchEotype = "Object";
                                break;
                            }
                        case 6:
                            {
                                matchEotype = "Null";
                                break;
                            }
                        case 7:
                            {
                                matchEotype = "Number";
                                break;
                            }
                        default:
                            {
                                matchEotype = "String";
                            }
                    }
                    switch (trueEotype) {
                        case "Number":
                            {
                                break;
                            }
                        case "Boolean":
                            {
                                if (matchEotype == 'Boolean') {
                                    matchResult = COMMON_TOOLS.eoStringify(matchResult).toLowerCase();
                                }
                                break;
                            }
                        case "Null":
                            {
                                matchResult = matchResult || "null";
                                break;
                            }
                    }
                    switch (matchEotype) {
                        case "String":
                            {
                                break;
                            }
                        default:
                            {
                                try {
                                    matchResult = JSON.parse(matchResult);
                                } catch (e) {}
                            }
                    }
                    if (arrMatch.checkParamType == '1') {
                        if (matchEotype == 'Int' || matchEotype == 'Float') {
                            trueEotype = isInt(trueResult) ? "Int" : "Float";
                        }
                        if (matchEotype != trueEotype) {
                            isMatch = false;
                            errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.unMatchType[LANG], [arrMatch.paramKey, matchEotype, trueEotype]));
                            return {
                                isMatch: false,
                                matchEotype: matchEotype,
                                trueEotype: trueEotype,
                                matchResult: matchResult,
                                trueResult: trueResult
                            };
                        }
                    }
                    return {
                        isMatch: true,
                        matchEotype: matchEotype,
                        trueEotype: trueEotype,
                        matchResult: matchResult,
                        trueResult: trueResult
                    };
                };

                var judgeMatchValue = function judgeMatchValue(regular, arrMatch, matchEotype, trueEotype, matchResult, trueResult) {
                    var trueResultLen = COMMON_TOOLS.eoLength(trueResult, trueEotype),
                        isMatch = true,
                        midMatchResult = COMMON_TOOLS.eoStringify(matchResult),
                        midTrueResult = COMMON_TOOLS.eoStringify(trueResult),
                        reportMatchResult = matchEotype == "String" ? '"' + midMatchResult + '"' : midMatchResult,
                        reportTrueResult = trueEotype == "String" ? '"' + midTrueResult + '"' : midTrueResult;
                   
                    switch (Number(regular)) {
                        case 1:
                            {
                                if ((matchEotype == 'Object' || matchEotype == 'Array') && (trueEotype == 'Object' || trueEotype == 'Array')) {
                                    matchResult = midMatchResult;
                                    trueResult = midTrueResult;
                                }
                               
                                if (trueResult !== matchResult) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.equal[LANG], [arrMatch.paramKey, reportMatchResult, reportTrueResult]));
                                }
                                break;
                            }
                        case 2:
                            {
                                if ((matchEotype == 'Object' || matchEotype == 'Array') && (trueEotype == 'Object' || trueEotype == 'Array')) {
                                    matchResult = midMatchResult;
                                    trueResult = midTrueResult;
                                }
                               
                                if (trueResult === matchResult) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.notEqual[LANG], [arrMatch.paramKey, reportMatchResult, reportTrueResult]));
                                }
                                break;
                            }
                        case 3:
                            {
                               
                                if (trueResult <= matchResult) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.greater[LANG], [arrMatch.paramKey, reportMatchResult, reportTrueResult]));
                                }
                                break;
                            }
                        case 4:
                            {
                               
                                if (trueResult >= matchResult) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.less[LANG], [arrMatch.paramKey, reportMatchResult, reportTrueResult]));
                                }
                                break;
                            }
                        case 5:
                            {
                               
                                try {
                                    var patt = new RegExp(matchResult);
                                    if (!patt.test(trueResult)) {
                                        isMatch = false;
                                        errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.patt[LANG], [arrMatch.paramKey, reportMatchResult, reportTrueResult]));
                                    }
                                } catch (e) {
                                    isMatch = false;
                                    errorReason.push((LANG == 'cn' ? '字段' : 'The field') + arrMatch.paramKey + _constant.CONSTANT.LANG.PattError[LANG]);
                                }
                                break;
                            }
                        case 6:
                            {
                                if (trueResultLen != matchResult) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.lengthEqual[LANG], [arrMatch.paramKey, reportMatchResult, trueResultLen]));
                                }
                               
                                break;
                            }
                        case 7:
                            {
                               
                                if (trueResultLen == matchResult) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.lengthNotEqual[LANG], [arrMatch.paramKey, reportMatchResult, trueResultLen]));
                                }
                                break;
                            }
                        case 8:
                            {
                               
                                if (trueResultLen <= matchResult) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.lengthGreater[LANG], [arrMatch.paramKey, reportMatchResult, trueResultLen]));
                                }
                                break;
                            }
                        case 9:
                            {
                               
                                if (trueResultLen >= matchResult) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.lengthLess[LANG], [arrMatch.paramKey, reportMatchResult, trueResultLen]));
                                }
                                break;
                            }
                        case 10:
                            {
                               
                                if (!midTrueResult.includes(midMatchResult)) {
                                    isMatch = false;
                                    errorReason.push(COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.JsonMatch.include[LANG], [arrMatch.paramKey, reportMatchResult, reportTrueResult]));
                                }
                                break;
                            }
                        default:
                            {}
                    }
                    return isMatch;
                };

                var isMatchAll = true;
                var loopFun = function loopFun(arrMatchList, response) {
                    for (var i = 0; i < arrMatchList.length; i++) {
                        if (!isMatchAll && !isJudgeAll) return;
                        var isMatch = true;
                        var arrMatch = arrMatchList[i];
                        if (!arrMatch.paramKey) break;
                        arrMatch.paramKey = COMMON_TOOLS.evalBindParam(arrMatch.paramKey, allResponse, allResponseHeader);
                        arrMatch.paramInfo = COMMON_TOOLS.evalBindParam(arrMatch.paramInfo || '', allResponse, allResponseHeader);
                       
                        var regular = arrMatch.matchRule;
                        var matchResult, trueResult;
                        matchResult = arrMatch.paramInfo;
                        arrMatch.checkExist = arrMatch.checkExist != undefined ? arrMatch.checkExist : '1';
                        if ((!response || !(arrMatch.paramKey.toString() in response)) && arrMatch.checkExist == '1') {
                            isMatch = isMatchAll = false;
                            errorReason.push("返回结果参数：" + arrMatch.paramKey.toString() + "不存在");
                            continue;
                        }
                        if (response) {
                            trueResult = response[arrMatch.paramKey];
                        } else {
                            trueResult = undefined;
                        }
                        arrMatch.checkParamType = arrMatch.checkParamType != undefined ? arrMatch.checkParamType : productType == 2 ? '1' : '0';
                        var typeFunResult = judgeMatchRule(arrMatch, matchResult, trueResult);
                        if (!typeFunResult.isMatch) {
                            isMatch = isMatchAll = false;
                            continue;
                        } else {
                            if (!judgeMatchValue(regular, arrMatch, typeFunResult.matchEotype, typeFunResult.trueEotype, typeFunResult.matchResult, typeFunResult.trueResult)) {
                                isMatch = isMatchAll = false;
                            }
                        }
                        if (!isMatchAll && !isJudgeAll) return;
                        if (arrMatch.childList.length > 0) {
                            var result = {};
                            var data = {};
                            if (response) {
                                data = response[arrMatch.paramKey];
                            } else {
                                data = undefined;
                            }
                            excuteLoopFun({
                                response: data,
                                arrMatchList: arrMatch.childList,
                                objType: arrMatch.paramType == 4 ? "Array" : "Object",
                                isLoop: arrMatch.isLoop || "0",
                                fun: loopFun
                            });
                        }
                    }
                    return;
                };
                excuteLoopFun({
                    response: response,
                    arrMatchList: arrMatchList,
                    objType: jsonResultVerification.resultType == "1" ? "Array" : "Object",
                    isLoop: jsonResultVerification.matchRule || "0",
                    fun: loopFun
                });
                if (errorReason.length > 0) {
                    return {
                        isMatch: false,
                        errorReason: errorReason
                    };
                } else {
                    return {
                        isMatch: true,
                        errorReason: ''
                    };
                }
            }
        } else {
            return {
                isMatch: false,
                errorReason: [_constant.CONSTANT.LANG.JsonMatch.notJson[LANG]]
            };
        }
       
    },
    paramConstructor: function paramConstructor(value) {
        this.base64 = function () {
            value = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(value));
            return this;
        };
        this.length = function () {
            value = value.length;
            return this;
        };
        this.hmac = function (cipher, secret, output) {
            value = CryptoJS['Hmac' + cipher](value, secret || '');
            if (output == 'Base64') {
                value = CryptoJS.enc.Base64.stringify(value);
            } else {
                value = CryptoJS.enc.Hex.stringify(value);
            }
            return this;
        };
        this.sha = function (cipher, output) {
            value = CryptoJS[cipher](value);
            if (output == 'Base64') {
                value = CryptoJS.enc.Base64.stringify(value);
            } else {
                value = CryptoJS.enc.Hex.stringify(value);
            }
            return this;
        };
        this.string = function (quotes) {
            value = quotes + value + quotes;
            return this;
        };
        this.concat = function (str) {
            value = value + str;
            return this;
        };
        this.upper = function () {
            value = value.toUpperCase();
            return this;
        };
        this.lower = function () {
            value = value.toLowerCase();
            return this;
        };
        this.md5 = function () {
            value = CryptoJS.enc.Hex.stringify(CryptoJS.MD5(value.toString()));
            return this;
        };
        this.substring = function (start, end) {
            value = value.toString().substring(start, end);
            return this;
        };
        this.valueOf = function () {
            return value;
        };
        return this;
    },
    evalBindParam: function evalBindParam(bindVal, response, responseheaders) {
       
        var template = {
            output: bindVal,
            match: [],
            bindMatch: []
        };

        function evalaram(value) {
            var templateInside = {
                output: value,
                fun: function fun(mark, query) {
                    query.map(function (val, key) {
                        try {
                            var replaceString = eval(mark == 'responseHeader' ? val.substring(1, val.length - 1).toLowerCase() : val.substring(1, val.length - 1));
                            if (typeof replaceString != 'string') {
                                replaceString = (0, _stringify2.default)(replaceString);
                            }
                            templateInside.output = COMMON_TOOLS.replaceAll('.' + val + '.', replaceString, templateInside.output);
                            templateInside.output = COMMON_TOOLS.replaceAll('.' + val, replaceString, templateInside.output);
                            templateInside.output = COMMON_TOOLS.replaceAll(val + '.', replaceString, templateInside.output);
                            templateInside.output = COMMON_TOOLS.replaceAll(val, replaceString, templateInside.output);
                        } catch (e) {}
                    });
                    return;
                }
            };
            templateInside.fun('responseHeader', (value || '').trim().match(/(<responseHeaders[.\[])((?!(>)).)*(>)/g) || []);
            templateInside.fun('response', (value || '').trim().match(/(<response[.\[])((?!(>)).)*(>)/g) || []);
            return templateInside.output;
        }

        function bind(val) {
            return COMMON_TOOLS.paramConstructor(val);
        }
        template.output = evalaram(template.output);
        template.bindMatch = (template.output || '').trim().match(/(\$(\s)*{)((?!(\)})).)*(\)(\s)*})/g);
        if (template.bindMatch) {
            template.bindMatch.map(function (val, key) {
                try {
                    var replaceString = eval(val.substring(2, val.length - 1) + ".valueOf()");
                    template.output = COMMON_TOOLS.replaceAll('.' + val + '.', replaceString, template.output);
                    template.output = COMMON_TOOLS.replaceAll('.' + val, replaceString, template.output);
                    template.output = COMMON_TOOLS.replaceAll(val + '.', replaceString, template.output);
                    template.output = COMMON_TOOLS.replaceAll(val, replaceString, template.output);
                } catch (e) {
                    console.log(val, e);
                }
            });
        }
        return template.output;
    },
    handleTime: function handleTime(testTime) {
        var Y, M, D, h, m, s;
        Y = testTime.getFullYear() + '-';
        M = (testTime.getMonth() + 1 < 10 ? '0' + (testTime.getMonth() + 1) : testTime.getMonth() + 1) + '-';
        D = testTime.getDate() + ' ';
        h = testTime.getHours() + ':';
        m = testTime.getMinutes() + ':';
        s = testTime.getSeconds();
        testTime = Y + M + D + h + m + s;
        return testTime;
    },
   
    sortArray: function sortArray(item1, item2) {
        if (item1.key > item2.key) return 1;else if (item1.key === item2.key) return 0;else return -1;
    },
    abortAll: function abortAll(ajaxs) {
        $.each(ajaxs, function (i, ajax) {
            ajax.abort();
        });
    },
    base64url: function base64url(str) {
        var encodedSource = CryptoJS.enc.Base64.stringify(str);
        var reg = new RegExp('/', 'g');
        encodedSource = encodedSource.replace(/=+$/, '').replace(/\+/g, '-').replace(reg, '_');
        return encodedSource;
    },
    postError: function postError(arg) {
        switch (arg.type) {
            case 'normal':
                {
                    arg.data.error = true;
                    var backData = {
                        statusCode: "210001",
                        type: "plug",
                        errorText: arg.errorReason
                    };
                    backData = (0, _stringify2.default)(backData);
                    arg.connect.postMessage({
                        backResult: backData
                    });
                    break;
                }
            case 'batch':
                {
                    arg.data.error = true;
                    var index = 0;
                    if (arg.amount != arg.length) {
                        index = arg.webInfo.index - 1;
                    } else {
                        index = arg.k;
                    }
                   
                    arg.errorRequestFlagArr[index] = 1;
                    arg.backResult.responseList[index] = {
                        general: {
                            requestUrl: arg.url,
                            requestMethod: arg.data.method,
                            statusCode: 0
                        },
                        isStopTest: true,
                        requestHeaders: arg.allRequestHeaders[arg.k],
                        requestBody: {
                            requestType: arg.request.requestType,
                            body: arg.report.params
                        },
                        responseType: 'error',
                        errorReason: arg.errorReason
                    };
                    arg.connect.postMessage(arg.backResult);
                    break;
                }
            case 'auto':
                {
                    var caseListID = 0;
                    if (arg.caseListIndex != 0) {
                        caseListID = arg.caseListIndex - 1;
                    } else {
                        caseListID = arg.k;
                    }
                    arg.backResult.reportStatus = 'error';
                    arg.backResult.time = new Date() - arg.startTime + 'ms';
                    arg.backResult.responseList[caseListID] = {
                        apiIndex: caseListID,
                        isStopTest: true,
                        keepGoing: arg.data.keepGoing,
                        general: {
                            time: arg.testDeny + 'ms',
                            requestUrl: arg.url,
                            requestMethod: arg.data.method,
                            statusCode: 0,
                            name: arg.caseData[arg.k].apiName,
                            match: {
                                jsonResultVerification: arg.caseData[arg.k].jsonResultVerification,
                                rule: arg.caseData[arg.k].matchRule,
                                type: arg.caseData[arg.k].matchType,
                                headerRule: arg.caseData[arg.k].responseHeaderVerification.matchRule || [],
                                headerType: arg.caseData[arg.k].responseHeaderVerification.matchType,
                                statusCode: arg.caseData[arg.k].statusCode
                            }
                        },
                        responseHeaders: arg.responseHeader || null,
                        requestHeaders: (0, _stringify2.default)(arg.request.requestHeaders) == '{}' ? null : arg.request.requestHeaders,
                        requestBody: {
                            requestType: arg.report.requestType,
                            body: arg.report.params
                        },
                        response: '',
                        errorReason: arg.errorReason,
                        responseType: arg.responseType || 'error'
                    };
                    break;
                }
            case 'autoCode':
                {
                    throw 'ignore';
                }
        }
    },
    handleTip: function handleTip(tips, placeHolder) {
        placeHolder = placeHolder || [];
        placeHolder.forEach(function (value, key) {
            tips = tips.replace('[placeholder' + key + ']', value);
        });
        return tips;
    },
    getCookieObj: function getCookieObj(value, cookieDetail) {
        var items = value.split(";");
        for (var i = 0; i < items.length; i++) {
            var item = items[i].split("=");
            if (item[1]) {
               
                cookieDetail.obj[item[0].replace(/\s+|"+/g, "")] = item[1];
            } else {
               
                cookieDetail.cookieStr = cookieDetail.cookieStr + items[i];
            }
        }
        return cookieDetail;
    }
};

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var CONSTANT = exports.CONSTANT = {
    DOMAIN: ['com', 'cn', 'xin', 'net', 'top', 'xyz', 'wang', 'shop', 'site', 'club', 'cc', 'fun', 'online', 'biz', 'red', 'link', 'ltd', 'mobi', 'info', 'org', 'name', 'vip', 'pro', 'work', 'tv', 'kim', 'group', 'tech', 'store', 'ren', 'ink', 'pub', 'live', 'wiki', 'design', 'ai'],
    JWT_METHOD: {
        HS256: 'HmacSHA256',
        HS384: 'HmacSHA384',
        HS512: 'HmacSHA512'
    },
    LANG: {
        Match: {
            statusCode: {
                'en': 'The status codes do not match. The matching rules are:  [placeholder0] ,and the actual return is [placeholder1]',
                'cn': '状态码不匹配，匹配规则为: [placeholder0] ，实际返回: [placeholder1]'
            },
            all: {
                'en': 'The exact match fails. The matching rule is [placeholder0] ,and the actual return is [placeholder1]',
                'cn': '完全匹配失败，匹配规则为：[placeholder0] ，实际返回: [placeholder1]'
            },
            patt: {
                'en': 'Regular matching failed, the matching rule is: Reg= [placeholder0] ,and the actual return is  [placeholder1]',
                'cn': '正则匹配失败，匹配规则为：Reg=[placeholder0] ，实际返回: [placeholder1]'
            }
        },
        JsonMatch: {
            unMatchType: {
                'en': 'The field [placeholder0] type does not match, the match type is  [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 类型不匹配，匹配类型为 [placeholder1] ，实际返回类型 [placeholder2]'
            },
            equal: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is: value - equals value = [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 值-等于 value = [placeholder1] ，实际返回 [placeholder2]'
            },
            include: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is: value - include include = [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 值-包含 include = [placeholder1] ，实际返回 [placeholder2]'
            },
            lengthEqual: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is: length - equals length = [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 长度-等于 length = [placeholder1] ，实际长度 [placeholder2]'
            },
            notEqual: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is:value - not equal to value != [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 值-不等于 value != [placeholder1] ，实际返回 [placeholder2]'
            },
            lengthNotEqual: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is:length - not equal to length != [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 长度-不等于 length != [placeholder1] ，实际长度 [placeholder2]'
            },
            greater: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is:value - greater than value > [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 值-大于 value > [placeholder1] ，实际返回 [placeholder2]'
            },
            lengthGreater: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is:length - greater than length > [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 长度-大于 length > [placeholder1] ，实际长度 [placeholder2]'
            },
            less: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is:value - less than value < [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 值-小于 value < [placeholder1] ，实际返回 [placeholder2]'
            },
            lengthLess: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is:length - less than length < [placeholder1], and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验不匹配，匹配规则为: 长度-小于 length < [placeholder1] ，实际长度 [placeholder2]'
            },
            patt: {
                'en': 'The field [placeholder0] content verification failed, the matching rule is: regular match Reg = [placeholder1] ,and the actual return is [placeholder2]',
                'cn': '字段 [placeholder0] 内容校验失败，匹配规则为：正则匹配 Reg= [placeholder1] ，实际返回: [placeholder2]'
            },
            notJson: {
                'en': 'Return information is not an object in json format',
                'cn': '返回信息并非json格式的对象'
            }
        },
        PattError: {
            'en': 'Regular match failed, please check the regular expression you filled in',
            'cn': '正则匹配失败，请检查您填写的正则表达式'
        },
        XmlError: {
            'en': 'The xml format is incorrect and cannot be xml matched',
            'cn': 'xml格式不正确，无法进行xml匹配'
        },
        Timeout: {
            'en': 'Timeout',
            'cn': '请求超时'
        },
        FormdataToJson: {
            'en': 'Form-data to json format error, please check the parameters you filled in',
            'cn': 'form-data转json格式错误，请检查您填写的参数！'
        },
        InvalidHeader: {
            'en': 'TypeError [ERR_INVALID_HTTP_TOKEN]：Header name must be a valid HTTP token [[placeholder0]]',
            'cn': '请求头部 [ [placeholder0] ]：无效请求头部！'
        },
        InjectCode: {
            before: {
                'en': 'Pre-request Script execution error: \n',
                'cn': '前置代码执行错误: \n'
            },
            after: {
                'en': 'After-response Script execution error: \n',
                'cn': '后置代码执行错误: \n'
            }
        },
        Jwt: {
            inValidMethod: {
                'en': 'The browser plug-in test does not support encryption at this time: [placeholder0], please use the paid version of the online test',
                'cn': '浏览器插件测试暂不支持JWT加密方式： [placeholder0]，请使用付费版在线测试'
            },
            inValidPayload: {
                'en': 'Invalid JWT Authentication: Missing Payload',
                'cn': 'JWT鉴权错误 ：无效Payload'
            },
            unToken: {
                'en': 'Invalid JWT Authentication: Missing Token Name',
                'cn': 'JWT鉴权错误 ：缺少Token Name'
            }
        },
        CommonFun: {
            'en': 'The generic function [placeholder0] is defined incorrectly, please check the function code\n',
            'cn': '通用函数[placeholder0] 定义错误,请您检查函数代码\n'
        },
        IllegalInvocation: {
            'en': 'Illegal call, such as: file request does not add header multipart/form-data, parameter type error, etc.',
            'cn': '非法调用，如：文件请求没有添加头部multipart/form-data，传参类型错误等'
        },
        EoFun: {
            excute: {
                'en': 'Function eo.execute() [placeholder0] has incorrect information.',
                'cn': '第 [placeholder0] 个eo.execute()传入信息有误'

            },
            banExcute: {
                'en': 'Please do not execute the eo.execute() function inside the function.',
                'cn': ' 请不要在函数内执行eo.execute()函数'
            },
            eoImg: {
                'en': 'Function eo.img passed the value error\n',
                'cn': 'eo.img函数传值错误'
            },
            eoFile: {
                'en': 'Function eo.file passed the value error\n',
                'cn': 'eo.file函数\n'
            },
            eoJsonParse: {
                'en': 'Function eo.jsonParse error: \n',
                'cn': 'eo.jsonParse函数错误：\n'
            },
            eoXmlParse: {
                'en': 'Function eo.xmlParse error: the input parameter is not xml format!\n',
                'cn': 'eo.xmlParse函数错误:传入参数非xml格式！\n'
            },
            eoMd5: {
                'en': 'Function eo.md5 passed the value error!\n',
                'cn': 'eo.md5函数传值错误!\n'
            },
            eoHmacSHA: {
                'en': 'Function eo.HmacSHA1[placeholder0] passed the value error!\n',
                'cn': 'eo.HmacSHA1[placeholder0]函数传值错误\n'
            },
            eoSHA: {
                'en': 'Function eo.sha[placeholder0] passed the value error!\n',
                'cn': 'eo.sha[placeholder0]函数传值错误\n'
            }

        }
    }
};

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.COMMON_FILE = exports.HANDLE_PARAMS = exports.HANDLE_HEADER = exports.HANDLE_URL = exports.REQUEST_COMMON = exports.PUBLIC_FILE = undefined;

var _typeof2 = __webpack_require__(20);

var _typeof3 = _interopRequireDefault(_typeof2);

var _getIterator2 = __webpack_require__(16);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _slicedToArray2 = __webpack_require__(23);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries2 = __webpack_require__(24);

var _entries3 = _interopRequireDefault(_entries2);

var _assign = __webpack_require__(11);

var _assign2 = _interopRequireDefault(_assign);

var _stringify = __webpack_require__(12);

var _stringify2 = _interopRequireDefault(_stringify);

var _commonUtils = __webpack_require__(13);

var _constant = __webpack_require__(14);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

"use strict";

var rawFormData = '';

var transformJson = function transformJson() {
    var data = {
        fun: {
            main: null,
            loop: null,
            typeof: null
        },
        _bigNums: []
    };
    data.fun.loop = function (arg) {
        var template = {
            item: [],
            loop: {
                array: {
                    item: arg.array.item.slice(1, arg.array.item.length)
                },
                parent: {
                    name: arg.parent.name,
                    object: arg.parent.object
                },
                key: arg.key
            }
        };
        if (arg.array.item.length > 0) {
            template.item = JSON.parse((0, _stringify2.default)(arg.array.item));
            template.item.splice(0, 1);
            if (arg.array.item[0] == arg.parent.name && arg.array.item.length <= 2) {
                if (_commonUtils.COMMON_TOOLS.eoTypeof(template.loop.parent.object[arg.array.item[0]]) == 'Array') {
                    var length = template.loop.parent.object[arg.array.item[0]].length >= 1 ? template.loop.parent.object[arg.array.item[0]].length - 1 : 0;
                    if (_commonUtils.COMMON_TOOLS.eoTypeof(template.loop.parent.object[arg.array.item[0]][length]) == 'Undefined') {
                        template.loop.parent.object[arg.array.item[0]][length] = {};
                    } else if (_commonUtils.COMMON_TOOLS.eoTypeof(template.loop.parent.object[arg.array.item[0]][length]) != 'Object') {
                        length++;
                        template.loop.parent.object[arg.array.item[0]][length] = {};
                    }
                    template.loop.parent.object[arg.array.item[0]][length][arg.key.name] = arg.key.value;
                } else if (_commonUtils.COMMON_TOOLS.eoTypeof(template.loop.parent.object[arg.array.item[0]]) == 'Object') {
                    template.loop.parent.object[arg.array.item[0]][arg.key.name] = arg.key.value;
                } else {
                    template.loop.parent.object[arg.array.item[0]] = {};
                    template.loop.parent.object[arg.array.item[0]][arg.key.name] = arg.key.value;
                }
            } else {
                if (_commonUtils.COMMON_TOOLS.eoTypeof(template.loop.parent.object[arg.array.item[0]]) == 'Array') {
                    template.loop.parent.object = template.loop.parent.object[arg.array.item[0]][0];
                } else {
                    if (_commonUtils.COMMON_TOOLS.eoTypeof(template.loop.parent.object[arg.array.item[0]]) != 'Object') {
                        template.loop.parent.object[arg.array.item[0]] = {};
                    }
                    template.loop.parent.object = template.loop.parent.object[arg.array.item[0]];
                }
                data.fun.loop(template.loop);
            }
        } else {
            template.loop.parent.object = arg.key.value;
        }
    };
    data.fun.main = function (arg) {
        var template = {
            loopObject: null,
            array: {
                parent: arg.parent || [],
                child: [],
                item: []
            },
            loopVar: {
                $index: 0,
                length: 0
            },
            icon: {
                child: false,
                parent: false
            },
            result: arg.result || {}
        };
        arg.input.map(function (val, key) {
            template.array.item = (val.paramKey + '').replace(/(\s)*([:]{2}|[>]{2})(\s)*/g, '>>').split(/[:]{2}|[>]{2}/);
            template.loopVar.length = template.array.item.length;
            var originParamInfo = val.paramInfo;
            try {
                val.paramInfo = val.paramInfo || val.paramValue || '';
                if (val.type) {
                    switch (parseInt(val.type || 0)) {
                        case 0:
                        case 1:
                        case 9:
                            {
                                break;
                            }
                        default:
                            {
                                if (val.type > 999) {
                                   
                                } else {
                                    if (val.paramInfo) {
                                        val.paramInfo = '#' + val.paramInfo.replace(/^#/, '');
                                    } else {
                                        switch (parseInt(val.type || 0)) {
                                            case 2:
                                            case 13:
                                                {
                                                    val.paramInfo = {};
                                                    break;
                                                }
                                            case 12:
                                                {
                                                    val.paramInfo = [];
                                                    break;
                                                }
                                        }
                                    }
                                }

                                break;
                            }
                    }
                }
                if (/^#/.test(val.paramInfo) && !/^#(([1-9]\d*)|0)(\.\d*)?/.test(val.paramInfo)) {
                    if (/^#array/.test(val.paramInfo)) {
                        val.paramInfo = [];
                    } else {
                        var check_data = val.paramInfo.replace(/\s/g, '');
                        var bigNum_regex = /([\[:,]){1}(\d{16,})([,\]\}]){1}/g;
                        var m;
                       
                        do {
                            m = bigNum_regex.exec(check_data);
                            if (m) {
                                data._bigNums.push(m[2]);
                                val.paramInfo = val.paramInfo.replace(/([\[:])?(\d{16,})\s*([,\}\]])/, "$1\"#$2\"$3");
                            }
                            check_data = val.paramInfo.replace(/\s/g, '');
                        } while (m);
                        val.paramInfo = JSON.parse(val.paramInfo.substring(1));
                    }
                } else {
                    val.paramInfo = val.paramInfo || '';
                }
            } catch (e) {
                val.paramInfo = originParamInfo;
            }
            switch (template.loopVar.length) {
                case 1:
                    {
                        if (template.array.item[0]) {
                            template.array.parent.push(template.array.item[0]);
                            template.result[template.array.item[0]] = val.paramInfo;
                            template.icon.parent = true;
                        }
                        break;
                    }
                default:
                    {
                        template.loopVar.$index = template.array.parent.indexOf(template.array.item[template.loopVar.length - 2]);
                        if (template.loopVar.$index > -1) {
                            template.array.parent.push(template.array.item[template.loopVar.length - 1]);
                            template.loopObject = {
                                array: {
                                    item: template.array.item
                                },
                                parent: {
                                    name: template.array.item[template.loopVar.length - 2],
                                    object: template.result
                                },
                                key: {
                                    name: template.array.item[template.loopVar.length - 1],
                                    value: val.paramInfo || ''
                                }
                            };
                            data.fun.loop(template.loopObject);
                            template.icon.parent = true;
                        } else {
                            template.array.child.push(val);
                            template.icon.child = true;
                        }
                        break;
                    }
            }
        });
        if (template.icon.parent && template.icon.child) {
            template.result = data.fun.main({
                input: template.array.child,
                result: template.result,
                parent: template.array.parent
            });
        } else if (template.icon.child) {
            template.array.child.map(function (val, key) {
                template.result[val.paramKey] = val.paramInfo || '';
            });
        }
        return template.result;
    };
    return function (input) {
        var template = {
            input: [],
            output: '',
            match: []
        };
        template.input = (0, _assign2.default)([], input);
        template.output = (0, _stringify2.default)(data.fun.main({
            input: template.input
        }));
        template.match = template.output.match(/"#(([1-9]\d*)|0)(\.\d*)?"/g) || [];
        template.match.forEach(function (val, key) {
            template.output = template.output.replace(val, val.substring(2, val.length - 1));
        });
        return template.output;
    };
};
var PUBLIC_FILE = exports.PUBLIC_FILE = {};

var REQUEST_COMMON = exports.REQUEST_COMMON = {
    jwtEncode: function jwtEncode(jwtAuth, LANG) {
       
        if (!(jwtAuth.alg in _constant.CONSTANT.JWT_METHOD)) return {
            type: 'error',
            errorReason: _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.Jwt.inValidMethod[LANG], [jwtAuth.alg])
        };
        var payload = '';
        try {
            payload = (0, _stringify2.default)(JSON.parse(jwtAuth.payload));
        } catch (e) {
            return {
                type: 'error',
                errorReason: _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.Jwt.inValidPayload[LANG])
            };
        }
        if (!jwtAuth.tokenName) {
            return {
                type: 'error',
                errorReason: _constant.CONSTANT.LANG.Jwt.unToken[LANG]
            };
        }
        var header = (0, _stringify2.default)({
            alg: jwtAuth.alg,
            typ: jwtAuth.typ || "JWT"
        });
        var secretSalt = jwtAuth.secretSalt;
        var before_sign = _commonUtils.COMMON_TOOLS.base64url(CryptoJS.enc.Utf8.parse(header)) + '.' + _commonUtils.COMMON_TOOLS.base64url(CryptoJS.enc.Utf8.parse(payload));
        var signature = CryptoJS[_constant.CONSTANT.JWT_METHOD[jwtAuth.alg]](before_sign, secretSalt);
        signature = _commonUtils.COMMON_TOOLS.base64url(signature);
        var result = before_sign + '.' + signature;
        return result;
    },
    handleEnv: function handleEnv(env, url, headers, params, raw, requestType, flagFile, flagFormDataToJson, LANG) {
        if (!$.isEmptyObject(env)) {
           
            var envHeaders = env.headers;
            var headerExist = false;
            var statusController = {
                type: 'success',
                errorReason: ''
            };
            var key = Object.key,
                value = Object.value,
                entries = _entries3.default;
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = (0, _getIterator3.default)(entries(envHeaders)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var _ref = _step.value;

                    var _ref2 = (0, _slicedToArray3.default)(_ref, 2);

                    var _key = _ref2[0];
                    var _value = _ref2[1];

                    headerExist = false;
                    var _iteratorNormalCompletion12 = true;
                    var _didIteratorError12 = false;
                    var _iteratorError12 = undefined;

                    try {
                        for (var _iterator12 = (0, _getIterator3.default)(entries(headers)), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {
                            var _ref23 = _step12.value;

                            var _ref24 = (0, _slicedToArray3.default)(_ref23, 2);

                            var _key11 = _ref24[0];
                            var _value11 = _ref24[1];

                           
                            if (_key.toLowerCase() == _key11.toLowerCase()) {
                                headerExist = true;
                            }
                        }
                    } catch (err) {
                        _didIteratorError12 = true;
                        _iteratorError12 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion12 && _iterator12.return) {
                                _iterator12.return();
                            }
                        } finally {
                            if (_didIteratorError12) {
                                throw _iteratorError12;
                            }
                        }
                    }

                    if (headerExist == false) {
                        headers[_key] = _value;
                    }
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }

            var paramList = env.extraParams;
           
            if (flagFormDataToJson) {
                try {
                    params = JSON.parse(params);
                } catch (e) {}
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = (0, _getIterator3.default)(entries(paramList)), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var _ref3 = _step2.value;

                        var _ref4 = (0, _slicedToArray3.default)(_ref3, 2);

                        var _key2 = _ref4[0];
                        var _value2 = _ref4[1];

                        if (!(_key2 in params)) {
                            params[_key2] = _value2;
                        }
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                params = (0, _stringify2.default)(params);
            } else if (requestType == '0' || requestType == '2') {
                if (Object.prototype.toString.call(params) == '[object Object]') {
                    var _iteratorNormalCompletion3 = true;
                    var _didIteratorError3 = false;
                    var _iteratorError3 = undefined;

                    try {
                        for (var _iterator3 = (0, _getIterator3.default)(entries(paramList)), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                            var _ref5 = _step3.value;

                            var _ref6 = (0, _slicedToArray3.default)(_ref5, 2);

                            var _key3 = _ref6[0];
                            var _value3 = _ref6[1];

                            if (!(_key3 in params)) {
                                if (/^#/.test(_value3)) {
                                    try {
                                        _value3 = JSON.parse(_value3.substring(1));
                                    } catch (e) {}
                                }
                                params[_key3] = _value3;
                            }
                        }
                    } catch (err) {
                        _didIteratorError3 = true;
                        _iteratorError3 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion3 && _iterator3.return) {
                                _iterator3.return();
                            }
                        } finally {
                            if (_didIteratorError3) {
                                throw _iteratorError3;
                            }
                        }
                    }
                } else if (Object.prototype.toString.call(params) == '[object Array]') {
                    params[0] = params[0] || {};
                    if (Object.prototype.toString.call(params[0]) == '[object Object]') {
                        var _iteratorNormalCompletion4 = true;
                        var _didIteratorError4 = false;
                        var _iteratorError4 = undefined;

                        try {
                            for (var _iterator4 = (0, _getIterator3.default)(entries(paramList)), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                                var _ref7 = _step4.value;

                                var _ref8 = (0, _slicedToArray3.default)(_ref7, 2);

                                var _key4 = _ref8[0];
                                var _value4 = _ref8[1];

                                if (!(_key4 in params)) {
                                    if (/^#/.test(_value4)) {
                                        try {
                                            _value4 = JSON.parse(_value4.substring(1));
                                        } catch (e) {}
                                    }
                                    params[0][_key4] = _value4;
                                }
                            }
                        } catch (err) {
                            _didIteratorError4 = true;
                            _iteratorError4 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion4 && _iterator4.return) {
                                    _iterator4.return();
                                }
                            } finally {
                                if (_didIteratorError4) {
                                    throw _iteratorError4;
                                }
                            }
                        }
                    }
                }
            }
           
           
            var _iteratorNormalCompletion5 = true;
            var _didIteratorError5 = false;
            var _iteratorError5 = undefined;

            try {
                for (var _iterator5 = (0, _getIterator3.default)(entries(env.globalParams)), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                    var _ref9 = _step5.value;

                    var _ref10 = (0, _slicedToArray3.default)(_ref9, 2);

                    var _key5 = _ref10[0];
                    var _value5 = _ref10[1];

                    for (var _childKey in headers) {
                        headers[_commonUtils.COMMON_TOOLS.replaceAll('{{' + _key5 + '}}', _value5, _childKey)] = _commonUtils.COMMON_TOOLS.replaceAll('{{' + _key5 + '}}', _value5, headers[_childKey]);
                        if ('{{' + _key5 + '}}' == _childKey) {
                            delete headers[_childKey];
                        }
                    }
                    url = _commonUtils.COMMON_TOOLS.replaceAll('{{' + _key5 + '}}', _value5, url);
                }
            } catch (err) {
                _didIteratorError5 = true;
                _iteratorError5 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion5 && _iterator5.return) {
                        _iterator5.return();
                    }
                } finally {
                    if (_didIteratorError5) {
                        throw _iteratorError5;
                    }
                }
            }

            var midheaders = (0, _stringify2.default)(headers).toLowerCase();
            midheaders = JSON.parse(midheaders);
            if (env.envAuth) {
                switch (Number(env.envAuth.status)) {
                    case 1:
                        {
                            if (midheaders["authorization"]) break;
                            if (env.envAuth.basicAuth) {
                                var str = env.envAuth.basicAuth.username + ':' + env.envAuth.basicAuth.password;
                                headers['Authorization'] = 'Basic ' + CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(str));
                            }
                            break;
                        }
                    case 2:
                        {
                            var token = REQUEST_COMMON.jwtEncode(env.envAuth.jwtAuth, LANG);
                            if (token.type == 'error') {
                                statusController = token;
                                break;
                            }
                            if (!env.envAuth.jwtAuth.tokenName) {
                                statusController = {
                                    type: 'error',
                                    errorReason: _constant.CONSTANT.LANG.Jwt.unToken[LANG]
                                };
                            }
                            if (env.envAuth.jwtAuth.position == 'header') {
                                if (midheaders["authorization"]) break;
                                headers[env.envAuth.jwtAuth.tokenName] = token;
                            } else {
                                var query = {};
                                query[env.envAuth.jwtAuth.tokenName] = token;
                                url = HANDLE_URL.jointQuery(url, query);
                            }
                        }
                }
            }
           
            if (requestType == '1') {
               
                var _iteratorNormalCompletion6 = true;
                var _didIteratorError6 = false;
                var _iteratorError6 = undefined;

                try {
                    for (var _iterator6 = (0, _getIterator3.default)(entries(env.globalParams)), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
                        var _ref11 = _step6.value;

                        var _ref12 = (0, _slicedToArray3.default)(_ref11, 2);

                        var _key6 = _ref12[0];
                        var _value6 = _ref12[1];

                        var regRaw = new RegExp('{{' + _key6 + '}}', "gm");
                        raw = raw.toString().replace(regRaw, _value6);
                    }
                } catch (err) {
                    _didIteratorError6 = true;
                    _iteratorError6 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion6 && _iterator6.return) {
                            _iterator6.return();
                        }
                    } finally {
                        if (_didIteratorError6) {
                            throw _iteratorError6;
                        }
                    }
                }
            } else {
                if (typeof params == 'string') {
                    var _iteratorNormalCompletion7 = true;
                    var _didIteratorError7 = false;
                    var _iteratorError7 = undefined;

                    try {
                        for (var _iterator7 = (0, _getIterator3.default)(entries(env.globalParams)), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {
                            var _ref13 = _step7.value;

                            var _ref14 = (0, _slicedToArray3.default)(_ref13, 2);

                            var _key7 = _ref14[0];
                            var _value7 = _ref14[1];

                            var regRaw = new RegExp('{{' + _key7 + '}}', "gm");
                            params = params.toString().replace(regRaw, _value7);
                        }
                    } catch (err) {
                        _didIteratorError7 = true;
                        _iteratorError7 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion7 && _iterator7.return) {
                                _iterator7.return();
                            }
                        } finally {
                            if (_didIteratorError7) {
                                throw _iteratorError7;
                            }
                        }
                    }
                } else if (typeof params == 'number') {
                    params = params.toString();
                    var _iteratorNormalCompletion8 = true;
                    var _didIteratorError8 = false;
                    var _iteratorError8 = undefined;

                    try {
                        for (var _iterator8 = (0, _getIterator3.default)(entries(env.globalParams)), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {
                            var _ref15 = _step8.value;

                            var _ref16 = (0, _slicedToArray3.default)(_ref15, 2);

                            var _key8 = _ref16[0];
                            var _value8 = _ref16[1];

                            var regRaw = new RegExp('{{' + _key8 + '}}', "gm");
                            params = params.toString().replace(regRaw, _value8);
                        }
                    } catch (err) {
                        _didIteratorError8 = true;
                        _iteratorError8 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion8 && _iterator8.return) {
                                _iterator8.return();
                            }
                        } finally {
                            if (_didIteratorError8) {
                                throw _iteratorError8;
                            }
                        }
                    }
                } else {
                    if (flagFile == true && requestType == '0') {
                       
                        var _iteratorNormalCompletion9 = true;
                        var _didIteratorError9 = false;
                        var _iteratorError9 = undefined;

                        try {
                            for (var _iterator9 = (0, _getIterator3.default)(entries(env.globalParams)), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {
                                var _ref17 = _step9.value;

                                var _ref18 = (0, _slicedToArray3.default)(_ref17, 2);

                                var _key9 = _ref18[0];
                                var _value9 = _ref18[1];

                                var regParams = new RegExp('{{' + _key9 + '}}', "gm");
                                var _iteratorNormalCompletion10 = true;
                                var _didIteratorError10 = false;
                                var _iteratorError10 = undefined;

                                try {
                                    for (var _iterator10 = (0, _getIterator3.default)(entries(params)), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {
                                        var _ref19 = _step10.value;

                                        var _ref20 = (0, _slicedToArray3.default)(_ref19, 2);

                                        var key1 = _ref20[0];
                                        var value1 = _ref20[1];

                                        if (typeof value1 == 'string') {
                                            params[key1.replace(regParams, _value9)] = value1.replace(regParams, _value9);
                                        }
                                        if (key1 != key1.replace(regParams, _value9)) {
                                            params[key1.replace(regParams, _value9)] = value1.replace(regParams, _value9);
                                            delete params[key1];
                                        }
                                    }
                                } catch (err) {
                                    _didIteratorError10 = true;
                                    _iteratorError10 = err;
                                } finally {
                                    try {
                                        if (!_iteratorNormalCompletion10 && _iterator10.return) {
                                            _iterator10.return();
                                        }
                                    } finally {
                                        if (_didIteratorError10) {
                                            throw _iteratorError10;
                                        }
                                    }
                                }
                            }
                        } catch (err) {
                            _didIteratorError9 = true;
                            _iteratorError9 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion9 && _iterator9.return) {
                                    _iterator9.return();
                                }
                            } finally {
                                if (_didIteratorError9) {
                                    throw _iteratorError9;
                                }
                            }
                        }
                    } else {
                        var _iteratorNormalCompletion11 = true;
                        var _didIteratorError11 = false;
                        var _iteratorError11 = undefined;

                        try {
                            for (var _iterator11 = (0, _getIterator3.default)(entries(env.globalParams)), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {
                                var _ref21 = _step11.value;

                                var _ref22 = (0, _slicedToArray3.default)(_ref21, 2);

                                var _key10 = _ref22[0];
                                var _value10 = _ref22[1];

                                for (var childKey in params) {
                                    var afterKey = _commonUtils.COMMON_TOOLS.replaceAll('{{' + _key10 + '}}', _value10, childKey);
                                    params[afterKey] = _commonUtils.COMMON_TOOLS.replaceAll('{{' + _key10 + '}}', _value10, params[childKey]);
                                    if (afterKey != childKey) {
                                        delete params[childKey];
                                    }
                                }
                            }
                        } catch (err) {
                            _didIteratorError11 = true;
                            _iteratorError11 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion11 && _iterator11.return) {
                                    _iterator11.return();
                                }
                            } finally {
                                if (_didIteratorError11) {
                                    throw _iteratorError11;
                                }
                            }
                        }
                    }
                }
            }
            var urlPatt = new RegExp('^(((http|ftp|https):\/\/)|)(([\\\w\\\-_]+([\\\w\\\-\\\.]*)?(\\\.(' + _constant.CONSTANT.DOMAIN.join('|') + ')))|((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))|(localhost))((\\\/)|(\\\?)|(:)|($))');
           
            if (env.baseUrl) {
                if (!urlPatt.test(url)) {
                    url = env.baseUrl + url;
                }
            }
        }
        return {
            type: statusController.type,
            errorReason: statusController.errorReason,
            url: url,
            headers: headers,
            params: params,
            raw: raw
        };
    }
};
var HANDLE_URL = exports.HANDLE_URL = {
    splitQuery: function splitQuery(url) {
        var hashArgs = {};
        if (url.indexOf('?') > -1) {
            var queryString = url.substring(url.indexOf('?') + 1);
            queryString = queryString.split('&');
            queryString.forEach(function (group, i) {
                if (group.indexOf('=') > -1) {
                    var index = group.indexOf('=') + 1;
                    var queryName = group.substring(0, index - 1);
                    var queryValue = group.substring(index);
                    if (!queryName) return;
                    if (queryName in hashArgs) {
                        if (Object.prototype.toString.call(hashArgs[queryName]) == '[object Array]') {
                            hashArgs.push(queryValue);
                        } else {
                            hashArgs[queryName] = [hashArgs[queryName], queryValue];
                        }
                    } else {
                        hashArgs[queryName] = queryValue;
                    }
                } else {
                    if (!group) return;
                    hashArgs[group] = '';
                }
            });
        }
        return hashArgs;
    },
    jointQuery: function jointQuery(url, query) {
        var data = {
            fun: {
                joint: null
            }
        };
        var equalSign = '=';
        data.fun.getQueryValue = function (queryName, queryValue) {
            var output = '';
            if (Object.prototype.toString.call(queryValue) == '[object Array]') {
                queryValue.forEach(function (val, key) {
                    if (output == '') {
                        output = val;
                    } else {
                        output = output + '&' + queryName + equalSign + val;
                    }
                });
            } else {
                output = queryValue;
            }
            return output;
        };
        data.fun.joint = function (query) {
            var output = '';
            var key = Object.key,
                value = Object.value,
                entries = _entries3.default;

            if ((typeof query === 'undefined' ? 'undefined' : (0, _typeof3.default)(query)) == 'object') {
                var _iteratorNormalCompletion13 = true;
                var _didIteratorError13 = false;
                var _iteratorError13 = undefined;

                try {
                    for (var _iterator13 = (0, _getIterator3.default)(entries(query)), _step13; !(_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done); _iteratorNormalCompletion13 = true) {
                        var _ref25 = _step13.value;

                        var _ref26 = (0, _slicedToArray3.default)(_ref25, 2);

                        var _key12 = _ref26[0];
                        var _value12 = _ref26[1];

                        if (output == '') {
                            output = _key12 + equalSign + data.fun.getQueryValue(_key12, _value12);
                        } else {
                            output = output + '&' + _key12 + equalSign + data.fun.getQueryValue(_key12, _value12);
                        }
                    }
                } catch (err) {
                    _didIteratorError13 = true;
                    _iteratorError13 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion13 && _iterator13.return) {
                            _iterator13.return();
                        }
                    } finally {
                        if (_didIteratorError13) {
                            throw _iteratorError13;
                        }
                    }
                }
            } else {
                output = query;
            }
            return output;
        };
        if ($.isEmptyObject(query) == false) {
            if (url.indexOf('?') == -1) {
               
                url = url + '?' + data.fun.joint(query);
            } else {
                var urlList = url.split('?');
                url = urlList[0] + '?' + data.fun.joint(query);
            }
        }
        return url;
    },
   
    handleProtocol: function handleProtocol(url, httpHeader) {
        var protocol = httpHeader == '1' ? 'https://' : 'http://';
        if (url.substring(0, 7) != "http://" && url.substring(0, 8) != "https://") {
            url = protocol + url;
        }
        return url;
    },
    destRequestUrl: function destRequestUrl(url) {
        var urlDetail = '';
        try {
            urlDetail = new URL(url);
        } catch (e) {
            console.log(e);
            urlDetail = url;
        }
        return urlDetail;
    },
    replaceRest: function replaceRest(url, rest) {
        for (var key in rest) {
            url = url.replace(eval("/\{(?!\{)" + key + "\}(?!\})/g"), rest[key]);
            url = url.replace(eval("/\:" + key + "/g"), rest[key]);
        }
        return url;
    },
    handleRightUrl: function handleRightUrl(url) {
        var url1 = HANDLE_URL.destRequestUrl(url);
        var scheme = 'http';
        if (url1.protocol) {
            scheme = url1.protocol.slice(0, -1);
        }
       
        if (scheme == 'http' && url1.port == '80' || scheme == 'https' && url1.port == '443') {
            url1 = url.replace(eval('/\:' + url1.port + '/'), '');
        } else {
            url1 = url;
        }
        url1 = url1.replace(scheme + "://", "");
        return url1;
    }
};
var HANDLE_HEADER = exports.HANDLE_HEADER = {
    isLegal: function isLegal(headers, LANG) {
        var key = Object.key,
            value = Object.value,
            entries = _entries3.default;

        var patt = /[\u4e00-\u9fa5]/g;
        var _iteratorNormalCompletion14 = true;
        var _didIteratorError14 = false;
        var _iteratorError14 = undefined;

        try {
            for (var _iterator14 = (0, _getIterator3.default)(entries(headers)), _step14; !(_iteratorNormalCompletion14 = (_step14 = _iterator14.next()).done); _iteratorNormalCompletion14 = true) {
                var _ref27 = _step14.value;

                var _ref28 = (0, _slicedToArray3.default)(_ref27, 2);

                var _key13 = _ref28[0];
                var _value13 = _ref28[1];

                if (!_key13) delete headers[_key13];
                if (patt.test(_key13) || patt.test(_value13)) {
                    return {
                        error: true,
                        errorReason: _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.InvalidHeader[LANG], [_key13])
                    };
                }
            }
        } catch (err) {
            _didIteratorError14 = true;
            _iteratorError14 = err;
        } finally {
            try {
                if (!_iteratorNormalCompletion14 && _iterator14.return) {
                    _iterator14.return();
                }
            } finally {
                if (_didIteratorError14) {
                    throw _iteratorError14;
                }
            }
        }

        return {
            error: false
        };
    }
};
var HANDLE_PARAMS = exports.HANDLE_PARAMS = {
    handleFormJson: function handleFormJson(params, LANG) {
        var strJson = null;
        var error = {
            status: 0,
            errorText: ''
        };
        try {
            strJson = transformJson()(params);
        } catch (e) {
            console.log(e);
            var error = {
                status: 1,
                errorText: _constant.CONSTANT.LANG.FormdataToJson[LANG]
            };
        }
        return {
            dataParams: strJson,
            error: error
        };
    },
    handleJSON: function handleJSON(jsonParams, options) {
        var template = {
            output: options.rootType == "1" ? [{}] : {},
            loopFun: null
        };
        template.loopFun = function (params, output) {
            params.forEach(function (val, key) {
                if (val.checkbox && val.paramKey) {
                    var paramInfo = val.paramInfo || "";
                    var parseParamInfo = val.paramInfo;
                    var hasChild = false;
                    val.childList = val.childList || [];
                    try {
                        parseParamInfo = JSON.parse(parseParamInfo);
                    } catch (e) {}
                    for (var i = 0; i < val.childList.length; i++) {
                        if (val.childList[i].checkbox) {
                            hasChild = true;
                            break;
                        }
                    }
                    switch (val.paramType.toString()) {
                        case '8':
                        case '3':
                        case '4':
                        case '5':
                        case '10':
                        case '11':
                        case '14':
                            {
                               
                                try {
                                    paramInfo = JSON.parse(paramInfo.toLowerCase());
                                } catch (e) {}
                                break;
                            }
                        case '12':
                            {
                                if (!hasChild) {
                                    paramInfo = parseParamInfo;
                                } else {
                                    paramInfo = [{}];
                                }
                                break;
                            }
                        case '13':
                            {
                                if (!hasChild) {
                                    paramInfo = parseParamInfo;
                                } else {
                                    paramInfo = {};
                                }
                            }
                        case '15':
                            {
                                paramInfo = null;
                            }
                        default:
                            {
                               
                            }
                    }
                    if (hasChild && ((typeof paramInfo === 'undefined' ? 'undefined' : (0, _typeof3.default)(paramInfo)) != 'object' || !paramInfo)) {
                        paramInfo = {};
                    }
                    if (Object.prototype.toString.call(output) == '[object Array]') {
                        output[0][val.paramKey] = paramInfo;
                        if (val.childList.length) {
                            template.loopFun(val.childList, output[0][val.paramKey]);
                        }
                    } else {
                        output[val.paramKey] = paramInfo;
                        if (val.childList.length) {
                            template.loopFun(val.childList, output[val.paramKey]);
                        }
                    }
                }
            });
        };
        template.loopFun(jsonParams, template.output);
        return template.output;
    },
    judgeFileExist: function judgeFileExist(params) {
        if ((typeof params === 'undefined' ? 'undefined' : (0, _typeof3.default)(params)) == 'object') {
            var flagFile = false;
            var key = Object.key,
                value = Object.value,
                entries = _entries3.default;
            var _iteratorNormalCompletion15 = true;
            var _didIteratorError15 = false;
            var _iteratorError15 = undefined;

            try {
                for (var _iterator15 = (0, _getIterator3.default)(entries(params)), _step15; !(_iteratorNormalCompletion15 = (_step15 = _iterator15.next()).done); _iteratorNormalCompletion15 = true) {
                    var _ref29 = _step15.value;

                    var _ref30 = (0, _slicedToArray3.default)(_ref29, 2);

                    var _key14 = _ref30[0];
                    var _value14 = _ref30[1];

                    if (Object.prototype.toString.call(_value14) == '[object Blob]') {
                        flagFile = true;
                    }
                    if (Object.prototype.toString.call(_value14) == '[object Array]') {
                        _value14.forEach(function (item) {
                            if (Object.prototype.toString.call(item) == '[object Blob]') {
                                flagFile = true;
                            }
                        });
                    }
                }
            } catch (err) {
                _didIteratorError15 = true;
                _iteratorError15 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion15 && _iterator15.return) {
                        _iterator15.return();
                    }
                } finally {
                    if (_didIteratorError15) {
                        throw _iteratorError15;
                    }
                }
            }

            return flagFile;
        } else {
            return false;
        }
    },
    handleRequestParams: function handleRequestParams(headers, requestType, flagFormDataToJson, flagFile, params, raw, ContentType, processData, reportType, rawFormData) {
        var report = {};
        var request = {};
        switch (requestType.toString()) {
            case '0':
                {
                    if (flagFormDataToJson) {
                        ContentType = 'application/json; charset=UTF-8';
                        if (typeof params != 'string') {
                            report = request = (0, _stringify2.default)(params);
                        } else {
                            report = request = params;
                        }
                    } else if (typeof params == 'string') {
                        ContentType = 'text/plain; charset=UTF-8';
                        request = report = raw = params;
                    } else if (typeof params == 'number') {
                        ContentType = 'text/plain; charset=UTF-8';
                        request = report = raw = params.toString();
                    } else {
                        var key = Object.key,
                            value = Object.value,
                            entries = _entries3.default;

                        if (flagFile) {
                            request = new FormData();

                            var _loop = function _loop(_key15, _value15) {
                               
                                if (Object.prototype.toString.call(_value15) == '[object Blob]') {
                                    if (_value15.uuid) {
                                        if (_value15.uuid == -1) {
                                            report[_key15] = _value15.name + " [文件不存在]" + ",";
                                        } else {
                                            report[_key15] = _value15.name + " [" + _value15.uuid + "]" + ",";
                                            request.append(_key15, _value15, _value15.name || _key15);
                                        }
                                    } else {
                                        report[_key15] = '[Object blob]';
                                        request.append(_key15, _value15, _value15.name || _key15);
                                    }
                                } else if (Object.prototype.toString.call(_value15) == '[object Array]') {
                                   
                                    var _flagFile = false;
                                    report[_key15] = [];
                                    _value15.forEach(function (item) {
                                        if (Object.prototype.toString.call(item) == '[object Blob]') {
                                            _flagFile = true;
                                        }
                                    });
                                    if (_flagFile == true) {
                                        _value15.forEach(function (item, index) {
                                            if (Object.prototype.toString.call(item) == '[object Blob]') {
                                                if (item.uuid) {
                                                    if (item.uuid == -1) {
                                                        report[_key15][index] = item.name + " [文件不存在]" + ",";
                                                    } else {
                                                        report[_key15][index] = item.name + " [" + item.uuid + "]";
                                                        request.append(_key15, item, item.name || _key15);
                                                    }
                                                } else {
                                                    report[_key15][index] = 'Object blob';
                                                    request.append(_key15, item, item.name || _key15);
                                                }
                                            } else {
                                               
                                                request.append(_key15, item);
                                                report[_key15][index] = item;
                                            }
                                        });
                                    } else {
                                        _value15.forEach(function (item) {
                                            request.append(_key15, item);
                                        });
                                        report[_key15] = _value15;
                                    }
                                } else {
                                    request.append(_key15, _value15);
                                    report[_key15] = _value15;
                                }
                            };

                            var _iteratorNormalCompletion16 = true;
                            var _didIteratorError16 = false;
                            var _iteratorError16 = undefined;

                            try {
                                for (var _iterator16 = (0, _getIterator3.default)(entries(params)), _step16; !(_iteratorNormalCompletion16 = (_step16 = _iterator16.next()).done); _iteratorNormalCompletion16 = true) {
                                    var _ref31 = _step16.value;

                                    var _ref32 = (0, _slicedToArray3.default)(_ref31, 2);

                                    var _key15 = _ref32[0];
                                    var _value15 = _ref32[1];

                                    _loop(_key15, _value15);
                                }
                            } catch (err) {
                                _didIteratorError16 = true;
                                _iteratorError16 = err;
                            } finally {
                                try {
                                    if (!_iteratorNormalCompletion16 && _iterator16.return) {
                                        _iterator16.return();
                                    }
                                } finally {
                                    if (_didIteratorError16) {
                                        throw _iteratorError16;
                                    }
                                }
                            }
                        } else {
                            request = report = params;
                        }
                    }
                    break;
                }
            case '2':
                {
                    ContentType = 'application/json; charset=UTF-8';
                    if (typeof params != 'string') {
                        report = request = (0, _stringify2.default)(params);
                    } else {
                        report = request = params;
                    }
                    break;
                }
            case '3':
                {
                    ContentType = 'application/xml';
                    if (typeof params != 'string') {
                        report = request = '<?xml version="1.0" encoding="UTF-8"?> <root> ' + $.json2xml(params) + '</root>';
                    } else {
                        report = request = params;
                    }
                    break;
                }
            case '1':
                {
                   
                    ContentType = 'text/plain; charset=UTF-8';
                    request = report = raw;
                    break;
                }
        }
       
        var midheaders = (0, _stringify2.default)(headers).toLowerCase();
        midheaders = JSON.parse(midheaders);
        if (typeof request == 'string') {
            reportType = '1';
        } else {
            reportType = '0';
            if ((0, _stringify2.default)(request) === '{}' && !flagFile) {
                report = request = null;
            }
        }
       
        if (reportType == '1' && !flagFormDataToJson) {}
       
        if (flagFile) {
            ContentType = false;
            processData = false;
            var _key16 = Object.key,
                _value16 = Object.value,
                _entries = _entries3.default;
           

            var _iteratorNormalCompletion17 = true;
            var _didIteratorError17 = false;
            var _iteratorError17 = undefined;

            try {
                for (var _iterator17 = (0, _getIterator3.default)(_entries(headers)), _step17; !(_iteratorNormalCompletion17 = (_step17 = _iterator17.next()).done); _iteratorNormalCompletion17 = true) {
                    var _ref33 = _step17.value;

                    var _ref34 = (0, _slicedToArray3.default)(_ref33, 2);

                    var _key17 = _ref34[0];
                    var _value17 = _ref34[1];

                    if (_key17.toLowerCase() == 'content-type') {
                        delete headers[_key17];
                    }
                }
            } catch (err) {
                _didIteratorError17 = true;
                _iteratorError17 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion17 && _iterator17.return) {
                        _iterator17.return();
                    }
                } finally {
                    if (_didIteratorError17) {
                        throw _iteratorError17;
                    }
                }
            }
        }
        return {
            report: report,
            request: request,
            raw: raw,
            ContentType: ContentType,
            processData: processData,
            reportType: reportType,
            headers: headers
        };
    },
   
    changeDataURLtoBlob: function changeDataURLtoBlob(dataurl) {
        var arr = dataurl.split(',');
        var mime = arr[0].match(/:(.*?);/);
        if (arr[0].match(/:(.*?);/)) {
            mime = mime[1] || '';
        } else {
            mime = '';
        }
        if (arr[1]) {
            var bstr = atob(arr[1]),
                n = bstr.length,
                u8arr = new Uint8Array(n);
            while (n--) {
                u8arr[n] = bstr.charCodeAt(n);
            }
        } else {
            u8arr = new Uint8Array(0);
        }
        return new Blob([u8arr], {
            type: mime
        });
    }
   
};var COMMON_FILE = exports.COMMON_FILE = {
    getFile: function getFile(fileName, fileUrl) {
        var oReq = new XMLHttpRequest();
        var blob = new Blob();
        oReq.open("get", fileUrl, true);
        oReq.onload = reqListener;
        oReq.responseType = "blob";
        oReq.send();

        function reqListener() {
            blob = this.response;
            var fileArray = {
                png: {
                    name: 'img_png.png'
                },
                jpg: {
                    name: 'img_jpg.jpg'
                },
                gif: {
                    name: 'img_gif.gif'
                },
                txt: {
                    name: 'file_txt.txt'
                },
                pdf: {
                    name: 'pdf.pdf'
                },
                doc: {
                    name: 'doc.doc'
                },
                docx: {
                    name: 'docx.docx'
                },
                none: {
                    name: 'file_none'
                }
            };
            blob.name = fileArray[fileName].name;
            COMMON_FILE[fileName] = blob;
            return blob;
        }
    },

    getAllFile: function getAllFile() {
        this.getFile('txt', window.location.origin + '/files/test_files/file_txt.txt');
        this.getFile('none', window.location.origin + '/files/test_files/file_none');
        this.getFile('jpg', window.location.origin + '/files/test_imgs/img_jpg.jpg');
        this.getFile('png', window.location.origin + '/files/test_imgs/img_png.png');
        this.getFile('gif', window.location.origin + '/files/test_imgs/img_gif.gif');
        this.getFile('pdf', window.location.origin + '/files/test_files/pdf.pdf');
        this.getFile('docx', window.location.origin + '/files/test_files/docx.docx');
        this.getFile('doc', window.location.origin + '/files/test_files/doc.doc');
    }
};

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(74), __esModule: true };

/***/ }),
/* 17 */,
/* 18 */,
/* 19 */,
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _iterator = __webpack_require__(94);

var _iterator2 = _interopRequireDefault(_iterator);

var _symbol = __webpack_require__(96);

var _symbol2 = _interopRequireDefault(_symbol);

var _typeof = typeof _symbol2.default === "function" && typeof _iterator2.default === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === "function" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? "symbol" : typeof obj; };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = typeof _symbol2.default === "function" && _typeof(_iterator2.default) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof(obj);
} : function (obj) {
  return obj && typeof _symbol2.default === "function" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof(obj);
};

/***/ }),
/* 21 */,
/* 22 */,
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _isIterable2 = __webpack_require__(85);

var _isIterable3 = _interopRequireDefault(_isIterable2);

var _getIterator2 = __webpack_require__(16);

var _getIterator3 = _interopRequireDefault(_getIterator2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if ((0, _isIterable3.default)(Object(arr))) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(88), __esModule: true };

/***/ }),
/* 25 */,
/* 26 */,
/* 27 */,
/* 28 */,
/* 29 */,
/* 30 */,
/* 31 */,
/* 32 */,
/* 33 */,
/* 34 */,
/* 35 */,
/* 36 */,
/* 37 */,
/* 38 */,
/* 39 */,
/* 40 */,
/* 41 */,
/* 42 */,
/* 43 */,
/* 44 */,
/* 45 */,
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

exports.f = __webpack_require__(2);


/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(1);
var core = __webpack_require__(0);
var LIBRARY = __webpack_require__(22);
var wksExt = __webpack_require__(46);
var defineProperty = __webpack_require__(8).f;
module.exports = function (name) {
  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});
  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });
};


/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(105), __esModule: true };

/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.INJECT_CODE = undefined;

var _commonUtils = __webpack_require__(13);

var _constant = __webpack_require__(14);

var _requestUtils = __webpack_require__(15);

'use strict';
var INJECT_CODE = exports.INJECT_CODE = {
    defineEo: function defineEo(funList, LANG, env) {
        var eo = {
            userFunction: {}
        };
        var fun = {};
        fun.execute = function (funStr) {
            try {
                eval(funStr);
            } catch (e) {
                console.log("userFuntion:\n" + e);
            }
        };
        eo.img = function (fileName) {
            if (fileName.toLowerCase() == 'jpg' || fileName.toLowerCase() == 'png' || fileName.toLowerCase() == 'gif') {
                return _requestUtils.COMMON_FILE[fileName.toLowerCase()];
            } else {
                return {};
            }
        };
        eo.MD5 = eo.Md5 = eo.md5 = function (sMessage, bit) {
            try {
                var result = CryptoJS.MD5(sMessage.toString());
                result = CryptoJS.enc.Hex.stringify(result);
                return result;
            } catch (e) {
                console.log(e);
                throw {
                    errorReason: _constant.CONSTANT.LANG.EoFun.eoMd5[LANG]
                };
            }
        };
        var num145847kda = [1, 224, 256, 384, 512];

        var _loop = function _loop(i) {
            eo['HmacSHA' + num145847kda[i]] = eo['hmacSHA' + num145847kda[i]] = eo['HmacSha' + num145847kda[i]] = function (sMessage, sKey) {
                try {
                    var result = CryptoJS['HmacSHA' + num145847kda[i]](sMessage.toString(), sKey || '');
                    result = CryptoJS.enc.Hex.stringify(result);
                    return result;
                } catch (e) {
                    console.log(e);
                    throw {
                        errorReason: _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.EoFun.eoHmacSHA[LANG], [num145847kda[i]])
                    };
                }
            };
            eo['SHA' + num145847kda[i]] = eo['Sha' + num145847kda[i]] = eo['sha' + num145847kda[i]] = function (sMessage) {
                try {
                    var result = CryptoJS['SHA' + num145847kda[i]](sMessage.toString());
                    result = CryptoJS.enc.Hex.stringify(result);
                    return result;
                } catch (e) {
                    console.log(e);
                    throw {
                        errorReason: _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.EoFun.eoSHA[LANG], [num145847kda[i]])
                    };
                }
            };
        };

        for (var i = 0; i < num145847kda.length; i++) {
            _loop(i);
        }
        eo.file = function (fileName) {
            if (fileName.toLowerCase() == 'txt' || fileName.toLowerCase() == 'none' || fileName.toLowerCase() == 'doc' || fileName.toLowerCase() == 'docx' || fileName.toLowerCase() == 'pdf') {
                return _requestUtils.COMMON_FILE[fileName.toLowerCase()];
            } else {
                return {};
            }
        };
        var funStr = '';
        funList = funList || [];
        funList.forEach(function (val, key) {
            var paramStr = '';
            val.functionParam.forEach(function (val1, key1) {
                paramStr = paramStr + val1.paramKey + ',';
            });
            funStr = 'eo.userFunction["' + val.functionKey + '"] = function (' + paramStr + '){' + val.functionCode + '};';
            fun.execute(funStr);
        });
        funStr = null;
        return eo;
    },
    evalBeforeScript: function evalBeforeScript(LANG, beforeScript, url, query, headers, params, raw, env, eo, response) {
       
        try {
            eval(beforeScript);
            return {
                error: false,
                url: url,
                query: query,
                headers: headers,
                params: params,
                raw: raw,
                env: env
            };
        } catch (e) {
            var errorReason = '';
            console.log(e);
            if (e.errorReason) {
                return {
                    error: true,
                    errorReason: _constant.CONSTANT.LANG.InjectCode.before[LANG] + e.errorReason
                };
            } else {
                if (navigator.userAgent.indexOf('Firefox') > -1) {
                    errorReason = e.toString();
                } else {
                    errorReason = e.stack;
                }
                var reg = /eo\.userFunction\.(.+) is not a function/;
                if (reg.test(errorReason)) {
                    errorReason = _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.CommonFun[LANG], [RegExp.$1]);
                }
                return {
                    error: true,
                    errorReason: _constant.CONSTANT.LANG.InjectCode.before[LANG] + errorReason
                };
            }
        }
    },
    evalAfterScript: function evalAfterScript(LANG, afterScript, response, env, eo, productType) {
        if (productType == 0) {
            try {
                response = JSON.parse(response);
            } catch (e) {}
        }
        try {
            eval(afterScript);
            return {
                error: false,
                response: response,
                env: env
            };
        } catch (e) {
            var errorReason = '';
            console.log(e, afterScript);
            if (e.errorReason) {
                return {
                    error: true,
                    errorReason: _constant.CONSTANT.LANG.InjectCode.after[LANG] + e.errorReason
                };
            } else {
                if (navigator.userAgent.indexOf('Firefox') > -1) {
                    errorReason = e.toString();
                } else {
                    errorReason = e.stack;
                }
                var reg = /eo\.userFunction\.(.+) is not a function/;
                if (reg.test(errorReason)) {
                    errorReason = _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.CommonFun[LANG], [RegExp.$1]);
                }
                return {
                    error: true,
                    errorReason: _constant.CONSTANT.LANG.InjectCode.after[LANG] + errorReason
                };
            }
        }
    }
};

/***/ }),
/* 50 */,
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _regenerator = __webpack_require__(34);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = __webpack_require__(35);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _assign = __webpack_require__(11);

var _assign2 = _interopRequireDefault(_assign);

var _promise = __webpack_require__(26);

var _promise2 = _interopRequireDefault(_promise);

exports.handleCaseCode = handleCaseCode;

var _commonUtils = __webpack_require__(13);

var _autoCode = __webpack_require__(71);

var _requestUtils = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PRECODE = {
    ajaxs: [],
    stopStatus: false
};
chrome.runtime.onConnect.addListener(function (auto) {
    if (auto.name == "autoTest" || auto.name == "autoCodeTest") {
        auto.onMessage.addListener(function (caseList) {
            if (caseList.stopStatus == true) {
               
                PRECODE.stopStatus = true;
                _commonUtils.COMMON_TOOLS.abortAll(PRECODE.ajaxs);
            }
        });
    }
});
function handleCaseCode(productType, caseList) {
    return new _promise2.default(function (resolve, reject) {
       
        var asyncControl = function () {
            var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
                var listIndex;
                return _regenerator2.default.wrap(function _callee$(_context) {
                    while (1) {
                        switch (_context.prev = _context.next) {
                            case 0:
                                listIndex = 0;

                            case 1:
                                if (!(listIndex < caseList.caseCodeList.length)) {
                                    _context.next = 10;
                                    break;
                                }

                                if (!PRECODE.stopStatus) {
                                    _context.next = 5;
                                    break;
                                }

                                reject('stop');
                                return _context.abrupt('break', 10);

                            case 5:
                                _context.next = 7;
                                return singlePreCodeTest(listIndex).then(function (result) {
                                   
                                    console.log(result);
                                });

                            case 7:
                                listIndex++;
                                _context.next = 1;
                                break;

                            case 10:
                            case 'end':
                                return _context.stop();
                        }
                    }
                }, _callee, this);
            }));

            return function asyncControl() {
                return _ref.apply(this, arguments);
            };
        }();

        PRECODE.stopStatus = false;
        var caseReport = [];
        var cookieObj = {};
        var env = {};
        if (caseList.isAfter) {
            cookieObj = caseList.cookie;
            env = caseList.env;
        } else {
            cookieObj = {
                cookie: {
                    example: {
                        cookieStr: '',
                        obj: {}
                    }
                },
                defaultCookie: {
                    example: {
                        cookieStr: '',
                        obj: {}
                    }
                }
            };
           
            env = {
                baseUrl: '',
                headers: {},
                extraParams: {},
                globalParams: {},
                envAuth: {}
               
            };if (!$.isEmptyObject(caseList.env)) {
                if (productType == 1 || productType == 5 || productType == 2 && !caseList.oldVersion) {
                    env.baseUrl = env.baseUrl == '' ? caseList.env.frontURI : env.baseUrl;
                } else {
                    if (caseList.env.frontURIList[0]) {
                        env.baseUrl = env.baseUrl == '' ? caseList.env.frontURIList[0].uri : env.baseUrl;
                    }
                }
                var paramList = {};
                for (var i = 0; i < caseList.env.paramList.length; i++) {
                    paramList[caseList.env.paramList[i].paramKey] = caseList.env.paramList[i].paramValue;
                }
                var headerList = {};
                for (var i = 0; i < caseList.env.headerList.length; i++) {
                    headerList[caseList.env.headerList[i].headerName] = caseList.env.headerList[i].headerValue;
                }
                var additionalParamList = {};
                additionalParamList = JSON.parse(_requestUtils.HANDLE_PARAMS.handleFormJson(caseList.env.additionalParamList, 'cn').dataParams);
                env.headers = (0, _assign2.default)({}, headerList, env.headers);
                env.extraParams = (0, _assign2.default)({}, additionalParamList, env.extraParams);
                env.globalParams = (0, _assign2.default)({}, paramList, env.globalParams);
                env.envAuth = (0, _assign2.default)({}, caseList.env.envAuth);
            }
        }

        function singlePreCodeTest(listIndex) {
            return new _promise2.default(function (resolve, reject) {
                caseReport[listIndex] = {
                    caseName: caseList.caseCodeList[listIndex].caseName,
                    status: 'finish',
                    time: '0ms',
                    initReportList: [],
                    responseList: [],
                    successApi: 0,
                    totalApi: 0
                };
                var which = 'before';
                if (caseList.isAfter) {
                    which = 'after';
                } else {
                    which = 'before';
                }
                var autoCode = false;
                caseList.caseCodeList[listIndex].productType = productType;
                caseList.caseCodeList[listIndex].commonFunList = caseList.commonFunList;
                (0, _autoCode.EVAL_AUTOCODE)(caseList.caseCodeList[listIndex], cookieObj, env, caseReport[listIndex], PRECODE.ajaxs, autoCode, which, resolve, reject, listIndex);
            });
        }
        asyncControl().then(function () {
           
            resolve({
                report: caseReport,
                cookie: cookieObj,
                env: env
            });
        }).catch(function (e) {
           
            resolve({
                report: caseReport,
                cookie: cookieObj,
                env: env
            });
            console.log(e);
        });
    });
};

/***/ }),
/* 52 */,
/* 53 */,
/* 54 */,
/* 55 */,
/* 56 */,
/* 57 */,
/* 58 */,
/* 59 */,
/* 60 */,
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

var getKeys = __webpack_require__(19);
var toIObject = __webpack_require__(6);
var isEnum = __webpack_require__(25).f;
module.exports = function (isEntries) {
  return function (it) {
    var O = toIObject(it);
    var keys = getKeys(O);
    var length = keys.length;
    var i = 0;
    var result = [];
    var key;
    while (length > i) if (isEnum.call(O, key = keys[i++])) {
      result.push(isEntries ? [key, O[key]] : O[key]);
    } return result;
  };
};


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

var META = __webpack_require__(31)('meta');
var isObject = __webpack_require__(5);
var has = __webpack_require__(10);
var setDesc = __webpack_require__(8).f;
var id = 0;
var isExtensible = Object.isExtensible || function () {
  return true;
};
var FREEZE = !__webpack_require__(18)(function () {
  return isExtensible(Object.preventExtensions({}));
});
var setMeta = function (it) {
  setDesc(it, META, { value: {
    i: 'O' + ++id,
    w: {}         
  } });
};
var fastKey = function (it, create) {
 
  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
  if (!has(it, META)) {
   
    if (!isExtensible(it)) return 'F';
   
    if (!create) return 'E';
   
    setMeta(it);
 
  } return it[META].i;
};
var getWeak = function (it, create) {
  if (!has(it, META)) {
   
    if (!isExtensible(it)) return true;
   
    if (!create) return false;
   
    setMeta(it);
 
  } return it[META].w;
};

var onFreeze = function (it) {
  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);
  return it;
};
var meta = module.exports = {
  KEY: META,
  NEED: false,
  fastKey: fastKey,
  getWeak: getWeak,
  onFreeze: onFreeze
};


/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {


var $keys = __webpack_require__(57);
var hiddenKeys = __webpack_require__(42).concat('length', 'prototype');

exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return $keys(O, hiddenKeys);
};


/***/ }),
/* 64 */,
/* 65 */
/***/ (function(module, exports, __webpack_require__) {


var $export = __webpack_require__(3);
var core = __webpack_require__(0);
var fails = __webpack_require__(18);
module.exports = function (KEY, exec) {
  var fn = (core.Object || {})[KEY] || Object[KEY];
  var exp = {};
  exp[KEY] = exec(fn);
  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);
};


/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(111), __esModule: true };

/***/ }),
/* 67 */,
/* 68 */,
/* 69 */,
/* 70 */,
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";



Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.EVAL_AUTOCODE = undefined;

var _regenerator = __webpack_require__(34);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _assign = __webpack_require__(11);

var _assign2 = _interopRequireDefault(_assign);

var _asyncToGenerator2 = __webpack_require__(35);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _freeze = __webpack_require__(127);

var _freeze2 = _interopRequireDefault(_freeze);

var _promise = __webpack_require__(26);

var _promise2 = _interopRequireDefault(_promise);

var _typeof2 = __webpack_require__(20);

var _typeof3 = _interopRequireDefault(_typeof2);

var _values3 = __webpack_require__(66);

var _values4 = _interopRequireDefault(_values3);

var _keys3 = __webpack_require__(48);

var _keys4 = _interopRequireDefault(_keys3);

var _getIterator2 = __webpack_require__(16);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _stringify = __webpack_require__(12);

var _stringify2 = _interopRequireDefault(_stringify);

var _slicedToArray2 = __webpack_require__(23);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries6 = __webpack_require__(24);

var _entries7 = _interopRequireDefault(_entries6);

var _commonUtils = __webpack_require__(13);

var _requestUtils = __webpack_require__(15);

var _envCase = __webpack_require__(51);

var _constant = __webpack_require__(14);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var AUTOCODE = {
    ajaxs: []
};
if (!_requestUtils.COMMON_FILE.txt) {
    _requestUtils.COMMON_FILE.getAllFile();
}

var EVAL_AUTOCODE = exports.EVAL_AUTOCODE = function EVAL_AUTOCODE(caseCodeList, cookieObj, env, reportList, ajaxs, autoCode, which, resolve, reject, listIndex) {
    var initiator = window.location.origin;
    var caseCode = caseCodeList.caseCode;
    var batchIndex = caseCodeList.batchIndex || 0;
    var PRODUCTTYPE = caseCodeList.productType;
    var LANG = PRODUCTTYPE == 5 || PRODUCTTYPE == 0 ? 'en' : 'cn';
    var codeTestTime = {
        startTime: null,
        finishTime: null
    };
    var executeIndex = -1;
    var contentType = 'application/x-www-form-urlencoded;charset=utf-8';
    var processData = true;
    var cookieObj = cookieObj;
    var requestType = '0';

    function handleEnv(url, headers, params) {
       
        if (!$.isEmptyObject(env)) {
           
           
            var headerList = env.headers;
            var headerExist = false;
            var isFileRequest = false;
            var key = Object.key,
                value = Object.value,
                entries = _entries7.default;
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = (0, _getIterator3.default)(entries(headerList)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var _ref = _step.value;

                    var _ref2 = (0, _slicedToArray3.default)(_ref, 2);

                    var _key = _ref2[0];
                    var _value = _ref2[1];

                    headerExist = false;
                   
                    var _iteratorNormalCompletion9 = true;
                    var _didIteratorError9 = false;
                    var _iteratorError9 = undefined;

                    try {
                        for (var _iterator9 = (0, _getIterator3.default)(entries(headers)), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {
                            var _ref17 = _step9.value;

                            var _ref18 = (0, _slicedToArray3.default)(_ref17, 2);

                            var _key10 = _ref18[0];
                            var _value9 = _ref18[1];

                            if (_key10.toLowerCase() == _key.toLowerCase()) {
                                headerExist = true;
                            }
                        }
                    } catch (err) {
                        _didIteratorError9 = true;
                        _iteratorError9 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion9 && _iterator9.return) {
                                _iterator9.return();
                            }
                        } finally {
                            if (_didIteratorError9) {
                                throw _iteratorError9;
                            }
                        }
                    }

                    if (headerExist == false) {
                        headers[_key] = _value;
                    }
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }

            var midheaders = (0, _stringify2.default)(headers).toLowerCase();
            midheaders = JSON.parse(midheaders);
           
            var paramList = env.extraParams;
            if (params.constructor === Object) {
               
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = (0, _getIterator3.default)(entries(paramList)), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var _ref3 = _step2.value;

                        var _ref4 = (0, _slicedToArray3.default)(_ref3, 2);

                        var _key2 = _ref4[0];
                        var _value2 = _ref4[1];

                        if (!(_key2 in params)) {
                            if (/^#/.test(_value2)) {
                                try {
                                    _value2 = JSON.parse(_value2.substring(1));
                                } catch (e) {}
                            }
                            params[_key2] = _value2;
                        }
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }
            }
           
            var globalVal = env.globalParams;
            if (!$.isEmptyObject(globalVal)) {
                var _key3 = Object.key,
                    _value3 = Object.value,
                    _entries = _entries7.default;
                var _iteratorNormalCompletion3 = true;
                var _didIteratorError3 = false;
                var _iteratorError3 = undefined;

                try {
                    for (var _iterator3 = (0, _getIterator3.default)(_entries(env.globalParams)), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                        var _ref5 = _step3.value;

                        var _ref6 = (0, _slicedToArray3.default)(_ref5, 2);

                        var _key4 = _ref6[0];
                        var _value4 = _ref6[1];

                        for (var _childKey in headers) {
                            headers[_commonUtils.COMMON_TOOLS.replaceAll('{{' + _key4 + '}}', _value4, _childKey)] = _commonUtils.COMMON_TOOLS.replaceAll('{{' + _key4 + '}}', _value4, headers[_childKey]);
                            if ('{{' + _key4 + '}}' == _childKey) {
                                delete headers[_childKey];
                            }
                        }
                        url = _commonUtils.COMMON_TOOLS.replaceAll('{{' + _key4 + '}}', _value4, url);
                    }
                   
                   
                } catch (err) {
                    _didIteratorError3 = true;
                    _iteratorError3 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion3 && _iterator3.return) {
                            _iterator3.return();
                        }
                    } finally {
                        if (_didIteratorError3) {
                            throw _iteratorError3;
                        }
                    }
                }

                if (midheaders["content-type"] && midheaders["content-type"].toLowerCase().indexOf('multipart/form-data') > -1) {
                    isFileRequest = true;
                }
                if (_requestUtils.HANDLE_PARAMS.judgeFileExist(params) && isFileRequest) {
                    contentType = false;
                    processData = false;
                    var keys = _keys4.default,
                        values = _values4.default,
                        _entries2 = _entries7.default;
                    var _iteratorNormalCompletion4 = true;
                    var _didIteratorError4 = false;
                    var _iteratorError4 = undefined;

                    try {
                        for (var _iterator4 = (0, _getIterator3.default)(_entries2(params)), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                            var _ref7 = _step4.value;

                            var _ref8 = (0, _slicedToArray3.default)(_ref7, 2);

                            var _key5 = _ref8[0];
                            var _value5 = _ref8[1];

                            if (Object.prototype.toString.call(_value5) == '[object Blob]') {
                                var _iteratorNormalCompletion5 = true;
                                var _didIteratorError5 = false;
                                var _iteratorError5 = undefined;

                                try {
                                    for (var _iterator5 = (0, _getIterator3.default)(_entries2(globalVal)), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                                        var _ref9 = _step5.value;

                                        var _ref10 = (0, _slicedToArray3.default)(_ref9, 2);

                                        var key1 = _ref10[0];
                                        var value1 = _ref10[1];

                                        var regparam = new RegExp('{{' + key1 + '}}', "gm");
                                        var _key6 = _key5.replace(regparam, value1);
                                       
                                        if (_key5 != _key5.replace(regparam, value1)) {
                                            params[_key6] = _value5;
                                            delete params[_key5];
                                            _key5 = _key6;
                                        }
                                    }
                                } catch (err) {
                                    _didIteratorError5 = true;
                                    _iteratorError5 = err;
                                } finally {
                                    try {
                                        if (!_iteratorNormalCompletion5 && _iterator5.return) {
                                            _iterator5.return();
                                        }
                                    } finally {
                                        if (_didIteratorError5) {
                                            throw _iteratorError5;
                                        }
                                    }
                                }
                            } else {
                                var _iteratorNormalCompletion6 = true;
                                var _didIteratorError6 = false;
                                var _iteratorError6 = undefined;

                                try {
                                    for (var _iterator6 = (0, _getIterator3.default)(_entries2(globalVal)), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
                                        var _ref11 = _step6.value;

                                        var _ref12 = (0, _slicedToArray3.default)(_ref11, 2);

                                        var _key7 = _ref12[0];
                                        var _value6 = _ref12[1];

                                        var regparam = new RegExp('{{' + _key7 + '}}', "gm");
                                        var key2 = _key5.replace(regparam, _value6);
                                        _value5 = _value5.toString().replace(regparam, _value6);
                                        params[key2] = _value5;
                                        if (_key5 != key2) {
                                            delete params[_key5];
                                            _key5 = key2;
                                        }
                                    }
                                } catch (err) {
                                    _didIteratorError6 = true;
                                    _iteratorError6 = err;
                                } finally {
                                    try {
                                        if (!_iteratorNormalCompletion6 && _iterator6.return) {
                                            _iterator6.return();
                                        }
                                    } finally {
                                        if (_didIteratorError6) {
                                            throw _iteratorError6;
                                        }
                                    }
                                }
                            }
                        }
                    } catch (err) {
                        _didIteratorError4 = true;
                        _iteratorError4 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion4 && _iterator4.return) {
                                _iterator4.return();
                            }
                        } finally {
                            if (_didIteratorError4) {
                                throw _iteratorError4;
                            }
                        }
                    }
                } else {
                    if ((typeof params === 'undefined' ? 'undefined' : (0, _typeof3.default)(params)) == 'object') {
                        var _iteratorNormalCompletion7 = true;
                        var _didIteratorError7 = false;
                        var _iteratorError7 = undefined;

                        try {
                            for (var _iterator7 = (0, _getIterator3.default)(_entries(env.globalParams)), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {
                                var _ref13 = _step7.value;

                                var _ref14 = (0, _slicedToArray3.default)(_ref13, 2);

                                var _key8 = _ref14[0];
                                var _value7 = _ref14[1];

                                for (var childKey in params) {
                                    var afterKey = _commonUtils.COMMON_TOOLS.replaceAll('{{' + _key8 + '}}', _value7, childKey);
                                    params[afterKey] = _commonUtils.COMMON_TOOLS.replaceAll('{{' + _key8 + '}}', _value7, params[childKey]);
                                    if (afterKey != childKey) {
                                        delete params[childKey];
                                    }
                                }
                            }
                        } catch (err) {
                            _didIteratorError7 = true;
                            _iteratorError7 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion7 && _iterator7.return) {
                                    _iterator7.return();
                                }
                            } finally {
                                if (_didIteratorError7) {
                                    throw _iteratorError7;
                                }
                            }
                        }
                    } else {
                        var _iteratorNormalCompletion8 = true;
                        var _didIteratorError8 = false;
                        var _iteratorError8 = undefined;

                        try {
                            for (var _iterator8 = (0, _getIterator3.default)(_entries(env.globalParams)), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {
                                var _ref15 = _step8.value;

                                var _ref16 = (0, _slicedToArray3.default)(_ref15, 2);

                                var _key9 = _ref16[0];
                                var _value8 = _ref16[1];

                                var regRaw = new RegExp('{{' + _key9 + '}}', "gm");
                                params = params.toString().replace(regRaw, _value8);
                            }
                        } catch (err) {
                            _didIteratorError8 = true;
                            _iteratorError8 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion8 && _iterator8.return) {
                                    _iterator8.return();
                                }
                            } finally {
                                if (_didIteratorError8) {
                                    throw _iteratorError8;
                                }
                            }
                        }
                    }
                }
            }
            if (env.envAuth) {
                switch (Number(env.envAuth.status)) {
                    case 1:
                        {
                            var str = env.envAuth.basicAuth.username + ':' + env.envAuth.basicAuth.password;
                            headers['Authorization'] = 'Basic ' + CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(str));
                            break;
                        }
                    case 2:
                        {
                            if (!env.envAuth.jwtAuth.tokenName) {
                                reportList.status = 'interrupt';
                                var report = {
                                    type: "interrupt",
                                    content: _constant.CONSTANT.LANG.Jwt.unToken[LANG]
                                   
                                   
                                   
                                };throwFun(reportList, executeIndex, "interrupt", report);
                            }
                            var token = _requestUtils.REQUEST_COMMON.jwtEncode(env.envAuth.jwtAuth, LANG);
                            if (token.type == 'error') {
                                reportList.status = 'interrupt';
                                var _report = {
                                    type: "interrupt",
                                    content: token.errorReason
                                };
                                throwFun(reportList, executeIndex, "interrupt", _report);
                            }
                            if (env.envAuth.jwtAuth.position == 'header') {
                                if (midheaders["authorization"]) break;
                                headers[env.envAuth.jwtAuth.tokenName || ""] = token;
                            } else {
                                var query = {};
                                query[env.envAuth.jwtAuth.tokenName] = token;
                                url = _requestUtils.HANDLE_URL.jointQuery(url, query);
                            }
                        }
                }
            }
            var urlPatt = new RegExp('^(((http|ftp|https):\/\/)|)(([\\\w\\\-_]+([\\\w\\\-\\\.]*)?(\\\.(' + _constant.CONSTANT.DOMAIN.join('|') + ')))|((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))|(localhost))((\\\/)|(\\\?)|(:)|($))');
            if (env.baseUrl) {
                if (!urlPatt.test(url)) {
                    url = env.baseUrl + url;
                }
            }
        }
        return {
            headers: headers,
            params: params,
            apiUrl: url
        };
    }

    function throwFun(reportList, index, type, report) {
        if (reportList.responseList[index]) {
            reportList.responseList[index].general.status = type;
            reportList.responseList[index].reportList.push(report);
        } else {
            reportList.initReportList.push(report);
        }
        throw 'ignore';
    }
   
    var eo = {
        userFunction: {},
        execute: null,
        stop: null,
        info: null,
        sha1: null,
        md5: null,
        sha256: null,
        img: null,
        file: null
    };
    if (caseCodeList.commonFunList) {
        var funStrdfs110ss = '';
        caseCodeList.commonFunList = caseCodeList.commonFunList || [];
        caseCodeList.commonFunList.forEach(function (val, key) {
            var paramStrffds5s78j = '';
            val.functionParam.forEach(function (val1, key1) {
                paramStrffds5s78j = paramStrffds5s78j + val1.paramKey + ',';
            });
            funStrdfs110ss = 'eo.userFunction["' + val.functionKey + '"] = function (' + paramStrffds5s78j + '){' + val.functionCode + '};\n';
            try {
                eval(funStrdfs110ss);
            } catch (e) {}
        });
        funStrdfs110ss = null;
    }
    eo.execute = function (apiInfo) {
        return new _promise2.default(function (resolve, reject) {
            executeIndex++;
            reportList.totalApi++;
            contentType = 'application/x-www-form-urlencoded;charset=utf-8';
            if (apiInfo && apiInfo.url) {
               
                var handleRequestHeaders = function handleRequestHeaders(details) {
                    if (!details.initiator) {
                        if (navigator.userAgent.indexOf('Firefox') > -1) {
                            details.initiator = details.originUrl.replace('/_generated_background_page.html', '');
                        } else {
                            for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                if (details.requestHeaders[j].name.toLowerCase() == 'origin') {
                                    details.initiator = details.requestHeaders[j].value;
                                    break;
                                }
                            }
                        }
                    }
                    var apiUrl1 = _requestUtils.HANDLE_URL.handleRightUrl(apiUrl);
                   
                    if ((details.initiator == initiator || details.tabId == -1) && (details.url.indexOf(apiUrl1) > -1 || Redirection.status && details.url.indexOf(Redirection.location) > -1)) {
                       
                        var headerCookieFlag = false;
                        var cookieName = 'cookie';
                       
                        var host = _requestUtils.HANDLE_URL.destRequestUrl(details.url).hostname;
                        if (!(host in cookieObj.cookie)) {
                           
                            cookieObj.cookie[host] = {
                                cookieStr: '',
                                obj: {}
                            };
                        }
                        var _keys = _keys4.default,
                            _values = _values4.default,
                            _entries3 = _entries7.default;
                       

                        for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                            if (details.requestHeaders[j].name.toLowerCase() == 'cookie') {
                                cookieName = details.requestHeaders[j].name;
                                details.requestHeaders.splice(j, 1);
                            }
                        }
                        details.requestHeaders.push({
                            name: 'Cache-Control',
                            value: 'no-cache'
                        });
                        var _iteratorNormalCompletion11 = true;
                        var _didIteratorError11 = false;
                        var _iteratorError11 = undefined;

                        try {
                            for (var _iterator11 = (0, _getIterator3.default)(_entries3(headers)), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {
                                var _ref21 = _step11.value;

                                var _ref22 = (0, _slicedToArray3.default)(_ref21, 2);

                                var _key11 = _ref22[0];
                                var _value10 = _ref22[1];

                                var headerFlag = false;
                                _value10 = _value10.toString();
                               
                                for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                    if (details.requestHeaders[j].name.toLowerCase() == _key11.toLowerCase()) {
                                        headerFlag = true;
                                        if (_value10.indexOf('multipart/form-data') <= -1) {
                                            details.requestHeaders[j].name = _key11;
                                            details.requestHeaders[j].value = _value10;
                                        }
                                    }
                                }
                               
                                if (headerFlag == false) {
                                    details.requestHeaders.push({
                                        name: _key11,
                                        value: _value10
                                    });
                                }
                               
                                if (_key11.toLowerCase() == 'cookie') {
                                    headerCookieFlag = true;
                                   
                                    cookieObj.cookie[host] = _commonUtils.COMMON_TOOLS.getCookieObj(_value10, cookieObj.cookie[host]);
                                }
                            }
                           
                        } catch (err) {
                            _didIteratorError11 = true;
                            _iteratorError11 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion11 && _iterator11.return) {
                                    _iterator11.return();
                                }
                            } finally {
                                if (_didIteratorError11) {
                                    throw _iteratorError11;
                                }
                            }
                        }

                        if (headerCookieFlag == false) {
                            var cookieValue = '';
                            var _keys2 = _keys4.default,
                                _values2 = _values4.default,
                                _entries4 = _entries7.default;
                           

                            if (!(host in cookieObj.defaultCookie)) {
                                cookieObj.defaultCookie[host] = {
                                    cookieStr: '',
                                    obj: {}
                                };
                            }
                           
                            var _iteratorNormalCompletion12 = true;
                            var _didIteratorError12 = false;
                            var _iteratorError12 = undefined;

                            try {
                                for (var _iterator12 = (0, _getIterator3.default)(_entries4(cookieObj.cookie[host].obj)), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {
                                    var _ref23 = _step12.value;

                                    var _ref24 = (0, _slicedToArray3.default)(_ref23, 2);

                                    var _key12 = _ref24[0];
                                    var _value11 = _ref24[1];

                                    cookieObj.defaultCookie[host].obj[_key12] = _value11;
                                }
                               
                            } catch (err) {
                                _didIteratorError12 = true;
                                _iteratorError12 = err;
                            } finally {
                                try {
                                    if (!_iteratorNormalCompletion12 && _iterator12.return) {
                                        _iterator12.return();
                                    }
                                } finally {
                                    if (_didIteratorError12) {
                                        throw _iteratorError12;
                                    }
                                }
                            }

                            var _iteratorNormalCompletion13 = true;
                            var _didIteratorError13 = false;
                            var _iteratorError13 = undefined;

                            try {
                                for (var _iterator13 = (0, _getIterator3.default)(_entries4(cookieObj.defaultCookie[host].obj)), _step13; !(_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done); _iteratorNormalCompletion13 = true) {
                                    var _ref25 = _step13.value;

                                    var _ref26 = (0, _slicedToArray3.default)(_ref25, 2);

                                    var _key13 = _ref26[0];
                                    var _value12 = _ref26[1];

                                    cookieValue = cookieValue + _key13 + '=' + _value12 + ';';
                                }
                            } catch (err) {
                                _didIteratorError13 = true;
                                _iteratorError13 = err;
                            } finally {
                                try {
                                    if (!_iteratorNormalCompletion13 && _iterator13.return) {
                                        _iterator13.return();
                                    }
                                } finally {
                                    if (_didIteratorError13) {
                                        throw _iteratorError13;
                                    }
                                }
                            }

                            cookieValue = cookieValue + cookieObj.cookie[host].cookieStr;
                           
                            if (cookieValue != '') {
                                details.requestHeaders.push({
                                    name: cookieName,
                                    value: cookieValue
                                });
                            }
                        }
                       
                        for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                            requestHeaders[details.requestHeaders[j].name] = details.requestHeaders[j].value;
                        }
                    }
                    return {
                        requestHeaders: details.requestHeaders
                    };
                };

                var getResponseHeaders = function getResponseHeaders(details) {
                    if (!details.initiator) {
                        if (navigator.userAgent.indexOf('Firefox') > -1) {
                            details.initiator = details.originUrl.replace('/_generated_background_page.html', '');
                        } else {
                            details.initiator = '';
                        }
                    }
                    var apiUrl1 = _requestUtils.HANDLE_URL.handleRightUrl(apiUrl);
                    if ((details.initiator == initiator || details.tabId == -1) && (details.url.indexOf(apiUrl1) > -1 || Redirection.status)) {
                        var host = _requestUtils.HANDLE_URL.destRequestUrl(details.url).hostname;
                        if (details.statusCode == 302 || details.statusCode == 301 || details.statusCode == 307) {
                            Redirection.status = true;
                        }
                       
                        details.responseHeaders.forEach(function (header) {
                            if (header.name.toLowerCase() == 'location') {
                                Redirection.location = header.value;
                            }
                           
                            if (header.name in responseHeaders) {
                                responseHeaders[header.name] = responseHeaders[header.name] + ";" + header.value;
                            } else {
                                responseHeaders[header.name] = header.value;
                            }
                        });
                        var _key14 = Object.key,
                            _value13 = Object.value,
                            _entries5 = _entries7.default;
                       

                        if (!(host in cookieObj.defaultCookie)) {
                            cookieObj.defaultCookie[host] = {
                                cookieStr: '',
                                obj: {}
                            };
                        }
                        var _iteratorNormalCompletion14 = true;
                        var _didIteratorError14 = false;
                        var _iteratorError14 = undefined;

                        try {
                            for (var _iterator14 = (0, _getIterator3.default)(_entries5(responseHeaders)), _step14; !(_iteratorNormalCompletion14 = (_step14 = _iterator14.next()).done); _iteratorNormalCompletion14 = true) {
                                var _ref27 = _step14.value;

                                var _ref28 = (0, _slicedToArray3.default)(_ref27, 2);

                                var _key15 = _ref28[0];
                                var _value14 = _ref28[1];

                                if (_key15.toLowerCase() == 'set-cookie') {
                                    cookieObj.defaultCookie[host] = _commonUtils.COMMON_TOOLS.getCookieObj(_value14, cookieObj.defaultCookie[host]);
                                }
                            }
                        } catch (err) {
                            _didIteratorError14 = true;
                            _iteratorError14 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion14 && _iterator14.return) {
                                    _iterator14.return();
                                }
                            } finally {
                                if (_didIteratorError14) {
                                    throw _iteratorError14;
                                }
                            }
                        }
                    }
                };

               
                var apiUrl = apiInfo.url,
                    name = apiInfo.name || '',
                    params = apiInfo.params || {},
                    headers = apiInfo.headers || {},
                    method = apiInfo.method || 'GET',
                    timelimit = apiInfo.timelimit,
                    timelimitContinue = apiInfo.timelimitContinue;
                var dataParams = null;
                var responseHeaders = {};
                var isFileRequest = false;
               
                if (timelimitContinue == undefined) {
                    timelimitContinue = true;
                }
               
                var beforeTime = null;
                var responseList = {};
                var requestHeaders = {};
               
                var whichXhr = 'success';
                method = method.toUpperCase();
                requestType = '0';
               
                var Redirection = {
                    status: false,
                    location: ''
                };
                if (timelimit == null) {
                    timelimit = 10000;
                }
                var midVal = handleEnv(apiUrl, headers, params);
                params = midVal.params;
                headers = midVal.headers;
                apiUrl = midVal.apiUrl;
                if (method == 'GET') {
                    if ((typeof params === 'undefined' ? 'undefined' : (0, _typeof3.default)(params)) == 'object') {
                        apiUrl = _requestUtils.HANDLE_URL.jointQuery(apiUrl, params);
                        params = {};
                    } else {
                        params[params] = '';
                        apiUrl = _requestUtils.HANDLE_URL.jointQuery(apiUrl, params);
                        params = '';
                    }
                }
                var midheaders = (0, _stringify2.default)(headers).toLowerCase();
                midheaders = JSON.parse(midheaders);
                if (midheaders["content-type"]) {
                    contentType = midheaders["content-type"];
                    if (midheaders["content-type"].toLowerCase().indexOf('multipart/form-data') > -1) {
                        isFileRequest = true;
                        contentType = false;
                    }
                }
                if (typeof params == 'string') {
                    requestType = '1';
                }
                if (_requestUtils.HANDLE_PARAMS.judgeFileExist(params) && isFileRequest || contentType == false) {
                    contentType = false;
                    processData = false;
                    var keys = _keys4.default,
                        values = _values4.default,
                        entries = _entries7.default;

                    dataParams = new FormData();
                    var _iteratorNormalCompletion10 = true;
                    var _didIteratorError10 = false;
                    var _iteratorError10 = undefined;

                    try {
                        for (var _iterator10 = (0, _getIterator3.default)(entries(params)), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {
                            var _ref19 = _step10.value;

                            var _ref20 = (0, _slicedToArray3.default)(_ref19, 2);

                            var key = _ref20[0];
                            var value = _ref20[1];

                            if (Object.prototype.toString.call(value) == '[object Blob]') {
                                dataParams.append(key, value, value.name || key);
                                params[key] = '[object Blob]';
                            } else {
                                dataParams.append(key, value);
                            }
                        }
                    } catch (err) {
                        _didIteratorError10 = true;
                        _iteratorError10 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion10 && _iterator10.return) {
                                _iterator10.return();
                            }
                        } finally {
                            if (_didIteratorError10) {
                                throw _iteratorError10;
                            }
                        }
                    }
                } else {
                    dataParams = params;
                }
                if (apiUrl.substring(0, 7) != "http://" && apiUrl.substring(0, 8) != "https://") {
                    apiUrl = 'http://' + apiUrl;
                }
                var headerResult = _requestUtils.HANDLE_HEADER.isLegal(headers, LANG);
                if (headerResult.error) {
                    reportList.responseList[executeIndex] = {
                        apiIndex: executeIndex,
                        general: {
                            time: timelimit + 'ms',
                            requestUrl: apiUrl,
                            status: 'interrupt',
                            requestMethod: method,
                            timeLimit: timelimit,
                            name: name
                        },
                        responseHeaders: null,
                        requestHeaders: headers,
                        requestBody: {
                            requestType: requestType,
                            body: params || null

                        },
                        response: null,
                        reportList: [{
                            type: 'interrupt',
                            content: headerResult.errorReason
                        }]
                    };
                    reject('ignore');
                }
                window.parent.chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders, {
                    urls: ["http://*/*", "https://*/*"],
                    types: ["xmlhttprequest"]
                }, ["blocking", "requestHeaders"]);
                window.parent.chrome.webRequest.onHeadersReceived.addListener(getResponseHeaders, {
                    urls: ["<all_urls>"]
                }, ["responseHeaders", "blocking"]);
                var timeout = null;
                if (method == 'GET') {
                    contentType = false;
                }
                var Ajax = $.ajax({
                    url: apiUrl,
                    beforeSend: function beforeSend(request) {
                        beforeTime = new Date();
                        function abortTimeout() {
                            reportList.responseList[executeIndex] = {
                                apiIndex: executeIndex,
                                general: {
                                    time: timelimit + 'ms',
                                    requestUrl: apiUrl,
                                    status: 'timeout',
                                    requestMethod: method,
                                    timeLimit: timelimit,
                                    name: name
                                },
                                responseHeaders: null,
                                requestHeaders: (0, _stringify2.default)(requestHeaders) == '{}' ? null : requestHeaders,
                                requestBody: {
                                    requestType: requestType,
                                    body: params || null

                                },
                                response: null,
                                reportList: [{
                                    type: 'timeout',
                                    content: _constant.CONSTANT.LANG.Timeout[LANG]
                                }]
                            };
                            if (!timelimitContinue) {
                                reject('ignore');
                                reportList.status = 'timeout';
                            }
                            Ajax.abort();
                        }
                        if (Number(timelimit)) {
                            timeout = setTimeout(abortTimeout, Number(timelimit));
                        }
                    },
                    async: true,
                    method: method,
                    data: dataParams,
                    processData: processData,
                    contentType: contentType
                }).done(function (successData, textStatus, xhr) {
                    clearTimeout(timeout);
                    whichXhr = 'success';
                }).fail(function (xhr, textStatus, message) {
                    clearTimeout(timeout);
                    whichXhr = 'error';
                   
                    if (textStatus == 'abort' && reportList.responseList[executeIndex] && !timelimitContinue) {
                        reject('ignore');
                    }
                }).always(function (successData, textStatus, jqXHR) {
                    chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders);
                    chrome.webRequest.onHeadersReceived.removeListener(getResponseHeaders);
                    contentType = 'application/x-www-form-urlencoded;charset=utf-8';
                    processData = true;
                   
                    var xhr;
                    if (whichXhr == 'success') {
                        xhr = jqXHR;
                    } else {
                        xhr = successData;
                    }
                   
                    var testDeny = new Date(),
                        testDeny = testDeny - beforeTime;
                    if (reportList.responseList[executeIndex]) {
                       
                    } else {
                        var body = xhr.responseText;
                        if (PRODUCTTYPE == 0) {
                            try {
                                body = JSON.parse(body);
                            } catch (e) {}
                        }
                        var subReportList = [];
                        var status = 'finish';
                        var response = null;
                        if (xhr.status != 0) {
                            response = xhr.responseText;
                        } else {
                           
                           
                            responseHeaders = null;
                            subReportList = [{
                                type: 'error',
                                content: 'target server no answer'
                            }];
                            status = 'error';
                        }
                        reportList.responseList[executeIndex] = {
                            apiIndex: executeIndex,
                            general: {
                                time: testDeny + 'ms',
                                requestUrl: apiUrl,
                                status: status,
                                requestMethod: method,
                                timeLimit: timelimit,
                                statusCode: xhr.status,
                                name: name
                            },
                            requestBody: {
                                requestType: requestType,
                                body: params
                            },
                            response: response,
                            responseHeaders: (0, _stringify2.default)(responseHeaders) == '{}' ? null : responseHeaders,
                            requestHeaders: (0, _stringify2.default)(requestHeaders) == '{}' ? null : requestHeaders,
                            reportList: subReportList
                        };
                    }
                   
                    resolve({
                        time: testDeny + 'ms',
                        code: xhr.status,
                        response: body,
                        header: responseHeaders
                    });
                });
                ajaxs.push(Ajax);
            } else {
                var index = executeIndex + 1;
                var text = _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.EoFun.excute[LANG], [index]);
                reject(text);
            }
        });
    };
   
    eo.stop = function (index, info) {
        reportList.status = 'interrupt';
        var report = {
            type: 'interrupt',
            content: info,
            lineNum: index
        };
        throwFun(reportList, executeIndex, "interrupt", report);
    };
   
    eo.executeBeforeCode = function (apiInfo, beforeScript) {
        var params = {};
        var raw = '';
        if (typeof apiInfo.params == 'string') {
            raw = apiInfo.params;
        } else {
            params = apiInfo.params;
        }
        var headers = apiInfo.headers;
        var url = apiInfo.url;
        var query = _requestUtils.HANDLE_URL.splitQuery(url);
        try {
            eval(beforeScript);
            url = _requestUtils.HANDLE_URL.jointQuery(url, query);
            apiInfo.url = url;
            apiInfo.headers = headers;
            if (typeof apiInfo.params == 'string') {
                apiInfo.params = raw;
            } else {
                apiInfo.params = params;
            }
            return apiInfo;
        } catch (e) {
            var errorReason = '';
            if (navigator.userAgent.indexOf('Firefox') > -1) {
                errorReason = e.toString();
            } else {
                errorReason = e.stack;
            }
            reportList.status = 'codeError';
            reportList.errorReport = {
                content: errorReason
            };
            throw 'ignore';
        }
    };
    eo.executeAfterCode = function (response, afterScript) {
        try {
            eval(afterScript);
           
           
            return response;
        } catch (e) {
            var errorReason = '';
            if (navigator.userAgent.indexOf('Firefox') > -1) {
                errorReason = e.toString();
            } else {
                errorReason = e.stack;
            }
            reportList.status = 'codeError';
            reportList.errorReport = {
                content: errorReason
            };
            throw 'ignore';
        }
    };
    eo.info = function (index, info, isStop) {
        var eoLinker_type = isStop ? 'info' : 'throw';
       
        var report = {
            type: eoLinker_type,
            content: info,
            lineNum: index
        };
        if (reportList.responseList[executeIndex]) {
            reportList.responseList[executeIndex].reportList.push(report);
        } else {
            reportList.initReportList.push(report);
        }
        if (isStop) {
            throw 'ignore';
        }
    };
    eo.img = function (fileName) {
        if (fileName && (fileName.toLowerCase() == 'jpg' || fileName.toLowerCase() == 'png' || fileName.toLowerCase() == 'gif')) {
            return _requestUtils.COMMON_FILE[fileName.toLowerCase()];
        } else {
            reportList.status = 'codeError';
            reportList.errorReport = {
                content: _constant.CONSTANT.LANG.EoFun.eoImg[LANG]
            };
            throw 'ignore';
        }
    };
    eo.file = function (fileName) {
        if (fileName && (fileName.toLowerCase() == 'txt' || fileName.toLowerCase() == 'none' || fileName.toLowerCase() == 'doc' || fileName.toLowerCase() == 'docx' || fileName.toLowerCase() == 'pdf')) {
            return _requestUtils.COMMON_FILE[fileName.toLowerCase()];
        } else {
            reportList.status = 'codeError';
            reportList.errorReport = {
                content: _constant.CONSTANT.LANG.EoFun.eoFile[LANG]
            };
            throw 'ignore';
        }
    };
    eo.jsonParse = function (response) {
        var eolinker = {
            obj: {},
            error: null
        };
        if (typeof response == 'string') {
            try {
                eolinker.obj = JSON.parse(response);
                return eolinker.obj;
            } catch (e) {
                if (e) {
                    if (navigator.userAgent.indexOf('Firefox') > -1) {
                        eolinker.error = e.toString();
                    } else {
                        eolinker.error = e.stack;
                    }
                }
                reportList.status = 'codeError';
                reportList.errorReport = {
                    content: _constant.CONSTANT.LANG.EoFun.eoJsonParse[LANG] + eolinker.error
                };
                throw 'ignore';
            }
        } else {
            return response;
        }
    };
    eo.xmlParse = function (string, callback) {
        var eolinker = {
            obj: {},
            error: null
        };
        try {
            eolinker.obj = $.xml2json(string);
            return eolinker.obj;
        } catch (e) {
            reportList.status = 'codeError';
            reportList.errorReport = {
                content: _constant.CONSTANT.LANG.EoFun.eoXmlParse[LANG]
            };
            throw 'ignore';
        }
    };
    eo.MD5 = eo.Md5 = eo.md5 = function (sMessage, bit) {
        try {
            var result = CryptoJS.MD5(sMessage.toString());
            result = CryptoJS.enc.Hex.stringify(result);
            return result;
        } catch (e) {
            reportList.status = 'codeError';
            reportList.errorReport = {
                content: _constant.CONSTANT.LANG.EoFun.eoMd5[LANG]
            };
            throw 'ignore';
        }
    };
    var num145847kda = [1, 224, 256, 384, 512];

    var _loop = function _loop(i) {
        eo['HmacSHA' + num145847kda[i]] = eo['hmacSHA' + num145847kda[i]] = eo['HmacSha' + num145847kda[i]] = function (sMessage, sKey) {
            try {
                var result = CryptoJS['HmacSHA' + num145847kda[i]](sMessage.toString(), sKey || '');
                result = CryptoJS.enc.Hex.stringify(result);
                return result;
            } catch (e) {
                console.log(e);
                reportList.status = 'codeError';
                reportList.errorReport = {
                    content: _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.EoFun.eoHmacSHA[LANG], [num145847kda[i]])
                };
                throw 'ignore';
            }
        };
        eo['SHA' + num145847kda[i]] = eo['Sha' + num145847kda[i]] = eo['sha' + num145847kda[i]] = function (sMessage) {
            try {
                var result = CryptoJS['SHA' + num145847kda[i]](sMessage.toString());
                result = CryptoJS.enc.Hex.stringify(result);
                return result;
            } catch (e) {
                reportList.status = 'codeError';
                reportList.errorReport = {
                    content: _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.EoFun.eoSHA[LANG], [num145847kda[i]])
                };
                throw 'ignore';
            }
        };
    };

    for (var i = 0; i < num145847kda.length; i++) {
        _loop(i);
    }
   
   
   
    (0, _freeze2.default)(eo);
   
    function throwReplacer(match, offset) {
        var count = 1;
        var midCaseCode = caseCode.slice(0, offset);
        midCaseCode.replace(/\n/g, function (match, offset) {
            count++;
        });
        return match + count + ",";
    }
    if (caseCode) {
        caseCode = caseCode.replace(/eo\.info\(/g, throwReplacer);
        caseCode = caseCode.replace(/eo\.stop\(/g, throwReplacer);
        caseCode = caseCode.replace(/eo\.execute\(/g, function (match, offset) {
            return 'await ' + match;
        });
    }

    function afterCase() {
        if (caseCodeList.afterCase.caseCodeList != false) {
            caseCodeList.afterCase.env = env;
            caseCodeList.afterCase.isAfter = true;
            caseCodeList.afterCase.cookie = cookieObj;
            (0, _envCase.handleCaseCode)(PRODUCTTYPE, caseCodeList.afterCase).then(function (result) {
                reportList.afterCaseReportList = result.report;
                autoCode.postMessage(reportList);
            }).catch(function (e) {
                console.log('afterCode', e);
            });
        } else {
            autoCode.postMessage(reportList);
        }
    }
    var stringFunflsoj45ssv = function stringFunflsoj45ssv() {
        sendRequest().then(function (result) {
            codeTestTime.finishTime = new Date();
            codeTestTime.finishTime = codeTestTime.finishTime - codeTestTime.startTime;
            reportList.time = codeTestTime.finishTime + 'ms';
            reportList.responseList.forEach(function (eachApi) {
                if (eachApi.general.status == 'finish') {
                    reportList.successApi++;
                }
            });
            reportList.batchIndex = batchIndex;
            if (which == 'before') {
                resolve('第' + listIndex + '前置用例结束');
            } else if (which == 'after') {
                resolve('第' + listIndex + '后置用例结束');
            } else {
                afterCase();
            }
        }).catch(function (e) {
            console.error('【async】', e);
            if (e != 'ignore') {
                content = '';
                if (navigator.userAgent.indexOf('Firefox') > -1) {
                    var content = e.toString();
                } else {
                    content = e.stack;
                }
                reportList.status = 'codeError';
                if (e.toString().indexOf('传入信息有误') > -1 || e.toString().indexOf('has incorrect information') > -1) {
                    content = e + (PRODUCTTYPE != 5 ? '，请检查' : 'Please Check');
                };
                if (content.indexOf('Illegal invocation') > -1) {
                    content = _constant.CONSTANT.LANG.IllegalInvocation[LANG];
                }
                var reg = /eo\.userFunction\.(.+) is not a function/;
                if (reg.test(content)) {
                    content = _commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.CommonFun[LANG], [RegExp.$1]);
                }
                reportList.errorReport = {
                    content: content
                };
            };
            codeTestTime.finishTime = new Date();
            codeTestTime.finishTime = codeTestTime.finishTime - codeTestTime.startTime;
            reportList.time = codeTestTime.finishTime + 'ms';
            reportList.responseList.forEach(function (eachApi) {
                if (eachApi.general.status == 'finish') {
                    reportList.successApi++;
                }
            });
            reportList.batchIndex = batchIndex;
            if (which == 'before') {
                resolve('第' + listIndex + '个前置用例错误抛出');
            } else if (which == 'after') {
                resolve('第' + listIndex + '个后置用例错误抛出');
            } else {
                afterCase();
            }
        });
    };
    caseCode = "async function sendRequest() {\n" + caseCode + "\n};\n(" + stringFunflsoj45ssv.toString() + ')();\n';
    try {
        codeTestTime.startTime = new Date();
        eval(caseCode);
    } catch (e) {
        if (e != 'ignore') {
            content = '';
            if (navigator.userAgent.indexOf('Firefox') > -1) {
                var content = e.toString();
            } else {
                content = e.stack;
            }
            reportList.status = 'codeError';
            if (content.indexOf('await is only valid in async function') > -1) {
                content = _constant.CONSTANT.LANG.EoFun.banExcute[LANG];
            }
            reportList.errorReport = {
                content: content
            };
        }
        codeTestTime.finishTime = new Date();
        codeTestTime.finishTime = codeTestTime.finishTime - codeTestTime.startTime;
        reportList.time = codeTestTime.finishTime + "ms";
        reportList.batchIndex = batchIndex;
        if (which == 'auto') {
            afterCase();
        }
        console.log('【caseCode】', e);
    };
};
chrome.runtime.onConnect.addListener(function (autoCode) {
    if (autoCode.name == "autoCodeTest") {
        autoCode.onMessage.addListener(function (caseCodeList) {
            var scar_Test = function () {
                var _ref29 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {
                    var autoCodeData, env, reportList, PRODUCTTYPE, paramList, i, headerList, additionalParamList, which;
                    return _regenerator2.default.wrap(function _callee$(_context) {
                        while (1) {
                            switch (_context.prev = _context.next) {
                                case 0:
                                    if (!(caseCodeList.stopStatus == true)) {
                                        _context.next = 5;
                                        break;
                                    }

                                    _commonUtils.COMMON_TOOLS.abortAll(AUTOCODE.ajaxs);
                                    return _context.abrupt('return');

                                case 5:
                                    autoCodeData = {
                                        preCode: {
                                            result: {
                                                cookie: {
                                                    cookie: {
                                                        example: {
                                                            cookieStr: '',
                                                            obj: {}
                                                        }
                                                    },
                                                    defaultCookie: {
                                                        example: {
                                                            cookieStr: '',
                                                            obj: {}
                                                        }
                                                    }
                                                },
                                                report: []
                                            },
                                            stopStatus: true
                                        }
                                       
                                    };
                                    env = {
                                        baseUrl: '',
                                        headers: {},
                                        extraParams: {},
                                        globalParams: {},
                                        envAuth: {}
                                    };
                                    reportList = {
                                        status: 'finish',
                                        time: '0ms',
                                        initReportList: [],
                                        beforeCaseReportList: [],
                                        responseList: [],
                                        successApi: 0,
                                        totalApi: 0
                                    };
                                    PRODUCTTYPE = caseCodeList.productType;
                                   

                                    if (!(caseCodeList.beforeCase.caseCodeList.length != 0)) {
                                        _context.next = 14;
                                        break;
                                    }

                                    _context.next = 12;
                                    return (0, _envCase.handleCaseCode)(PRODUCTTYPE, caseCodeList.beforeCase).then(function (result) {
                                        autoCodeData.preCode.result = result;
                                        reportList.beforeCaseReportList = autoCodeData.preCode.result.report;
                                        env = result.env;
                                    }).catch(function (e) {
                                        if (e == 'stop') {
                                            autoCodeData.preCode.stopStatus = false;
                                        }
                                    });

                                case 12:
                                    _context.next = 15;
                                    break;

                                case 14:
                                    if (!$.isEmptyObject(caseCodeList.env)) {
                                        if (PRODUCTTYPE == 1 || PRODUCTTYPE == 5 || PRODUCTTYPE == 2) {
                                            env.baseUrl = env.baseUrl == '' ? caseCodeList.env.frontURI : env.baseUrl;
                                        } else {
                                            if (caseCodeList.env.frontURIList[0]) {
                                                env.baseUrl = env.baseUrl == '' ? caseCodeList.env.frontURIList[0].uri : env.baseUrl;
                                            }
                                        }
                                        paramList = {};

                                        for (i = 0; i < caseCodeList.env.paramList.length; i++) {
                                            paramList[caseCodeList.env.paramList[i].paramKey] = caseCodeList.env.paramList[i].paramValue;
                                        }
                                        headerList = {};

                                        for (i = 0; i < caseCodeList.env.headerList.length; i++) {
                                            headerList[caseCodeList.env.headerList[i].headerName] = caseCodeList.env.headerList[i].headerValue;
                                        }
                                        additionalParamList = {};

                                        additionalParamList = JSON.parse(_requestUtils.HANDLE_PARAMS.handleFormJson(caseCodeList.env.additionalParamList, 'cn').dataParams);
                                        env.headers = (0, _assign2.default)({}, headerList, env.headers);
                                        env.extraParams = (0, _assign2.default)({}, additionalParamList, env.extraParams);
                                        env.globalParams = (0, _assign2.default)({}, paramList, env.globalParams);
                                        env.envAuth = (0, _assign2.default)({}, caseCodeList.env.envAuth);
                                    }

                                case 15:
                                    if (autoCodeData.preCode.stopStatus) {
                                        which = 'auto';

                                        EVAL_AUTOCODE(caseCodeList, autoCodeData.preCode.result.cookie, env, reportList, AUTOCODE.ajaxs, autoCode, which);
                                    }

                                case 16:
                                case 'end':
                                    return _context.stop();
                            }
                        }
                    }, _callee, this);
                }));

                return function scar_Test() {
                    return _ref29.apply(this, arguments);
                };
            }();

            scar_Test();
        });
    }
});

/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


__webpack_require__(73);
__webpack_require__(107);
__webpack_require__(108);
__webpack_require__(71);
__webpack_require__(51);

/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _getIterator2 = __webpack_require__(16);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _slicedToArray2 = __webpack_require__(23);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(24);

var _entries2 = _interopRequireDefault(_entries);

var _assign = __webpack_require__(11);

var _assign2 = _interopRequireDefault(_assign);

var _stringify = __webpack_require__(12);

var _stringify2 = _interopRequireDefault(_stringify);

var _typeof2 = __webpack_require__(20);

var _typeof3 = _interopRequireDefault(_typeof2);

var _commonUtils = __webpack_require__(13);

var _requestUtils = __webpack_require__(15);

var _injectCode = __webpack_require__(49);

var _constant = __webpack_require__(14);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

"use strict";

chrome.runtime.onConnect.addListener(function (normal) {
    var initiator = window.location.origin;
    var freeze = {
        ajax: null
    };
    if (normal.name == "normalTest") {
        var initiator = window.location.origin;
        var freeze = {
            ajax: null
        };
        normal.onMessage.addListener(function (content) {
            if (content.stopStatus == true) {
                freeze.ajax.abort();
            } else {
               
                var handleArguments = function handleArguments() {
                    switch (eoFreeze.data.requestType.toString()) {
                        case '0':
                            {
                                for (var i = 0; i < eoFreeze.data.params.length;) {
                                    if (!eoFreeze.data.params[i].paramKey || !eoFreeze.data.params[i].checkbox) {
                                        eoFreeze.data.params.splice(i, 1);
                                    } else {
                                        if (eoFreeze.data.params[i].paramType == '1') {
                                            eoFreeze.data.flagFile = true;
                                        }
                                        i++;
                                    }
                                }
                                if (!eoFreeze.request.flagFormDataToJson) {
                                    for (var i = 0; i < eoFreeze.data.params.length; i++) {
                                       
                                        if (eoFreeze.data.flagFile == true) {
                                            if (eoFreeze.data.params[i].paramType == '1') {
                                                eoFreeze.data.params[i].files = eoFreeze.data.params[i].files || [];
                                                var paramInfo = '';
                                               
                                                if (eoFreeze.data.params[i].paramInfo) {
                                                    paramInfo = eoFreeze.data.params[i].paramInfo.split(",");
                                                    for (var j = 0; eoFreeze.data.params[i].files && j < eoFreeze.data.params[i].files.length; j++) {
                                                        var file = _requestUtils.HANDLE_PARAMS.changeDataURLtoBlob(eoFreeze.data.params[i].files[j]);
                                                        file.name = paramInfo[j];
                                                        if (eoFreeze.data.params[i].paramKey in params) {
                                                            if (Object.prototype.toString.call(params[eoFreeze.data.params[i].paramKey]) == '[object Array]') {
                                                                params[eoFreeze.data.params[i].paramKey].push(file);
                                                            } else {
                                                                params[eoFreeze.data.params[i].paramKey] = [file, params[eoFreeze.data.params[i].paramKey]];
                                                            }
                                                        } else {
                                                            params[eoFreeze.data.params[i].paramKey] = file;
                                                        }
                                                    }
                                                } else {
                                                    params[eoFreeze.data.params[i].paramKey] = "";
                                                }
                                            } else {
                                                if (eoFreeze.data.params[i].paramKey in params) {
                                                    if (Object.prototype.toString.call(params[eoFreeze.data.params[i].paramKey]) == '[object Array]') {
                                                        params[eoFreeze.data.params[i].paramKey].push(eoFreeze.data.params[i].paramInfo || '');
                                                    } else {
                                                        params[eoFreeze.data.params[i].paramKey] = [params[eoFreeze.data.params[i].paramKey], eoFreeze.data.params[i].paramInfo || ''];
                                                    }
                                                } else {
                                                    params[eoFreeze.data.params[i].paramKey] = eoFreeze.data.params[i].paramInfo || '';
                                                }
                                            }
                                        } else {
                                            if (eoFreeze.data.params[i].paramKey in params) {
                                               
                                                if ((0, _typeof3.default)(params[eoFreeze.data.params[i].paramKey]) == 'object') {
                                                    params[eoFreeze.data.params[i].paramKey].push(eoFreeze.data.params[i].paramInfo || '');
                                                } else {
                                                   
                                                    params[eoFreeze.data.params[i].paramKey] = [params[eoFreeze.data.params[i].paramKey], eoFreeze.data.params[i].paramInfo || ''];
                                                }
                                            } else {
                                                params[eoFreeze.data.params[i].paramKey] = eoFreeze.data.params[i].paramInfo || '';
                                            }
                                        }
                                    }
                                } else {
                                   
                                    var formJsonData = _requestUtils.HANDLE_PARAMS.handleFormJson(eoFreeze.data.params, LANG);
                                    if (formJsonData.error.status == 1) {
                                        eoFreeze.data.error = true;
                                        eoFreeze.report.errorReason = formJsonData.error;
                                    }
                                    eoFreeze.data.rawJsonData = formJsonData.dataParams;
                                    if (eoFreeze.data.beforeScript) {
                                        params = JSON.parse(formJsonData.dataParams);
                                    } else {
                                        params = formJsonData.dataParams;
                                    }
                                }
                                break;
                            }
                        case '1':
                            {
                                raw = eoFreeze.data.raw;
                                break;
                            }
                        case '2':
                            {

                               
                                var options = {
                                    rootType: eoFreeze.request.apiRequestParamJsonType || "0"
                                };
                                params = _requestUtils.HANDLE_PARAMS.handleJSON(eoFreeze.data.params, options);
                                break;
                            }
                        case '3':
                            {
                                params = _requestUtils.HANDLE_PARAMS.handleJSON(eoFreeze.data.params, {
                                    rootType: "0"
                                });
                                break;
                            }
                    }
                    if (eoFreeze.data.auth) {
                        switch (Number(eoFreeze.data.auth.status)) {
                            case 1:
                                {
                                    if (eoFreeze.data.auth.basicAuth) {
                                        var str = eoFreeze.data.auth.basicAuth.username + ':' + eoFreeze.data.auth.basicAuth.password;
                                        headers['Authorization'] = 'Basic ' + CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(str));
                                    }
                                    break;
                                }
                            case 2:
                                {
                                    var compareTable = {
                                        'query': query,
                                        'header': headers
                                    };
                                    var result = _requestUtils.REQUEST_COMMON.jwtEncode(eoFreeze.data.auth.jwtAuth, LANG);
                                    if (result.type == 'error') {
                                        _commonUtils.COMMON_TOOLS.postError({
                                            type: 'normal',
                                            connect: normal,
                                            errorReason: result.errorReason,
                                            data: eoFreeze.data
                                        });
                                    } else {
                                        compareTable[eoFreeze.data.auth.jwtAuth.position][eoFreeze.data.auth.jwtAuth.tokenName] = result;
                                    }
                                }
                        }
                    }
                   
                    for (var i = 0; i < eoFreeze.data.headers.length;) {
                        if (!eoFreeze.data.headers[i].headerName || !eoFreeze.data.headers[i].checkbox) {
                            eoFreeze.data.headers.splice(i, 1);
                        } else {
                            headers[eoFreeze.data.headers[i].headerName] = eoFreeze.data.headers[i].headerValue;
                            i++;
                        }
                    }

                    if (eoFreeze.data.env && eoFreeze.data.env.length != 0) {
                        eoFreeze.data.env.forEach(function (globalVal, key) {
                            env.globalParams[globalVal.paramKey] = globalVal.paramValue;
                        });
                    }
                };
               


               
               
                var handleRequestHeaders = function handleRequestHeaders(details) {
                    var reqeustUrl;
                   
                    if (!details.initiator) {
                        if (navigator.userAgent.indexOf('Firefox') > -1) {
                            details.initiator = details.originUrl.replace('/_generated_background_page.html', '');
                        } else {
                            for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                if (details.requestHeaders[j].name.toLowerCase() == 'origin') {
                                    details.initiator = details.requestHeaders[j].value;
                                    break;
                                }
                            }
                        }
                    }
                    if (details.initiator == initiator || details.tabId == -1) {
                        eoFreeze.request.requestHeaders = [];
                        eoFreeze.request.historyHeaders = [];
                        details.requestHeaders.push({
                            name: 'Cache-Control',
                            value: 'no-cache'
                        });
                        var _key = Object.key,
                            value = Object.value,
                            entries = _entries2.default;
                        var _iteratorNormalCompletion = true;
                        var _didIteratorError = false;
                        var _iteratorError = undefined;

                        try {
                            for (var _iterator = (0, _getIterator3.default)(entries(headers)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                                var _ref = _step.value;

                                var _ref2 = (0, _slicedToArray3.default)(_ref, 2);

                                var _key2 = _ref2[0];
                                var _value = _ref2[1];

                                var headerFlag = 0;
                                for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                    if (details.requestHeaders[j].name.toLowerCase() == _key2.toLowerCase()) {
                                        headerFlag = 1;
                                        details.requestHeaders[j].name = _key2;
                                        details.requestHeaders[j].value = _value;
                                        eoFreeze.request.historyHeaders.push({
                                            name: _key2,
                                            value: _value
                                        });
                                        break;
                                    }
                                }
                                if (headerFlag == 0) {
                                    details.requestHeaders.push({
                                        name: _key2,
                                        value: _value.toString()
                                    });
                                    eoFreeze.request.historyHeaders.push({
                                        name: _key2,
                                        value: _value.toString()
                                    });
                                }
                            }
                        } catch (err) {
                            _didIteratorError = true;
                            _iteratorError = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion && _iterator.return) {
                                    _iterator.return();
                                }
                            } finally {
                                if (_didIteratorError) {
                                    throw _iteratorError;
                                }
                            }
                        }

                        var midReqeustHeader = details.requestHeaders.slice(0);
                        midReqeustHeader.forEach(function (requestHeader) {
                            eoFreeze.request.requestHeaders.push({
                                key: requestHeader.name,
                                value: requestHeader.value
                            });
                        });
                        eoFreeze.request.requestHeaders = eoFreeze.request.requestHeaders.sort(_commonUtils.COMMON_TOOLS.sortArray);
                    }
                    return {
                        requestHeaders: details.requestHeaders
                    };
                };
               


                var getResponseHeaders = function getResponseHeaders(details) {
                    eoFreeze.request.responseHeaders = [];
                    if (!details.initiator) {
                        if (navigator.userAgent.indexOf('Firefox') > -1) {
                            details.initiator = details.originUrl.replace('/_generated_background_page.html', '');
                        } else {
                            if (details.requestHeaders) {
                                for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                    if (details.requestHeaders[j].name.toLowerCase() == 'origin') {
                                        details.initiator = details.requestHeaders[j].value;
                                        break;
                                    }
                                }
                            }
                        }
                    }
                    if (details.initiator == initiator || details.tabId == -1) {
                        for (var i = 0; i < details.responseHeaders.length; i++) {
                            eoFreeze.request.responseHeaders.push({
                                key: details.responseHeaders[i].name,
                                value: details.responseHeaders[i].value
                            });
                        }
                        eoFreeze.request.responseHeaders = eoFreeze.request.responseHeaders.sort(_commonUtils.COMMON_TOOLS.sortArray);
                    }
                };

               
                var eoFreeze = {
                    constant: {},
                    request: {
                        apiUrl: content.requestInfo.URL,
                        scheme: '',
                        requestHeaders: [],
                        responseHeaders: [],
                        historyHeaders: [],
                        historyParams: [],
                        formData: null,
                        params: {},
                        beforeTime: {},
                        apiRequestParamJsonType: content.requestInfo.apiRequestParamJsonType,
                        flagFormDataToJson: false,
                        processData: true,
                        ContentType: 'application/x-www-form-urlencoded'
                    },
                    response: {
                        whichXhr: 'success'
                    },
                    report: {
                        params: {},
                        requestType: content.requestInfo.requestType.toString(),
                        headers: {}
                    },
                    data: {
                        error: false,
                        errorReason: '',
                        productType: content.productType,
                        httpHeader: content.requestInfo.httpHeader,
                        requestType: content.requestInfo.requestType.toString(),
                        method: content.requestInfo.apiRequestType || content.method.toString(),
                        restfulParams: content.requestInfo.restfulParams || [],
                        params: content.requestInfo.params,
                        raw: content.requestInfo.raw,
                        headers: content.requestInfo.headers,
                        Url: content.requestInfo.URL,
                        flagFile: false,
                        env: content.env,
                        auth: content.requestInfo.auth,
                        beforeScript: content.script ? content.script.before : '',
                        afterScript: content.script ? content.script.after : '',
                        flagQuickTest: content.quickTest || 0,
                        rawJsonData: '',
                        commonFunList: content.commonFunList || [],
                        eo: {}
                    }
                };
                var LANG = eoFreeze.data.productType == 5 || eoFreeze.data.productType == 0 ? 'en' : 'cn';
               
                var env = {
                    baseUrl: '',
                    headers: {},
                    extraParams: {},
                    globalParams: {}
                   
                };var url = '',
                    params = {},
                    headers = {},
                    query = {},
                    raw = '';
                var backData = {};
               
                var response = null;if ('formDataToJson' in content) {
                    eoFreeze.request.flagFormDataToJson = content.formDataToJson.checkbox;
                }
               
                eoFreeze.data.method = _commonUtils.COMMON_TOOLS.judgeRequestMethod(eoFreeze.data.method);
               
                url = eoFreeze.request.apiUrl;
               
                query = _requestUtils.HANDLE_URL.splitQuery(url);
                handleArguments();
                if (eoFreeze.data.beforeScript || eoFreeze.data.afterScript) {
                    eoFreeze.data.eo = _injectCode.INJECT_CODE.defineEo(eoFreeze.data.commonFunList, LANG, env);
                }
               
                if (eoFreeze.data.beforeScript) {
                    var preScriptResult = _injectCode.INJECT_CODE.evalBeforeScript(LANG, eoFreeze.data.beforeScript, url, query, headers, params, raw, env, eoFreeze.data.eo);
                   
                    if (preScriptResult.error) {
                        _commonUtils.COMMON_TOOLS.postError({
                            type: 'normal',
                            connect: normal,
                            errorReason: preScriptResult.errorReason,
                            data: eoFreeze.data
                        });
                    } else {
                        url = preScriptResult.url;
                        query = preScriptResult.query;
                        headers = preScriptResult.headers;
                        params = preScriptResult.params;
                        raw = preScriptResult.raw;
                        env = preScriptResult.env;
                    }
                }
                if (eoFreeze.data.method == 'GET') {
                    if ((typeof params === 'undefined' ? 'undefined' : (0, _typeof3.default)(params)) == 'object') {
                        var midParams = JSON.parse((0, _stringify2.default)(params));
                        query = (0, _assign2.default)(query, midParams);
                        params = {};
                    } else {
                        query[params] = '';
                        params = '';
                    }
                }
               
                url = _requestUtils.HANDLE_URL.jointQuery(url, query);
               
                eoFreeze.data.flagFile = _requestUtils.HANDLE_PARAMS.judgeFileExist(params);
                var midEnvReulst = _requestUtils.REQUEST_COMMON.handleEnv(env, url, headers, params, raw, eoFreeze.data.requestType, eoFreeze.data.flagFile, eoFreeze.request.flagFormDataToJson, LANG);
                url = midEnvReulst.url;
                headers = midEnvReulst.headers;
                params = midEnvReulst.params;
                raw = midEnvReulst.raw;
                var midRequestParams = _requestUtils.HANDLE_PARAMS.handleRequestParams(headers, eoFreeze.data.requestType, eoFreeze.request.flagFormDataToJson, eoFreeze.data.flagFile, params, raw, eoFreeze.request.ContentType, eoFreeze.request.processData, eoFreeze.report.requestType, eoFreeze.data.rawJsonData);
                eoFreeze.report.params = midRequestParams.report;
                eoFreeze.request.params = midRequestParams.request;
                raw = midRequestParams.raw;
                headers = midRequestParams.headers;
                eoFreeze.request.processData = midRequestParams.processData;
                eoFreeze.request.ContentType = midRequestParams.ContentType;
                eoFreeze.report.requestType = midRequestParams.reportType;
                if (midRequestParams.reportType.toString() == '1') {
                    eoFreeze.request.historyParams = midRequestParams.report;
                } else {
                    for (var key in midRequestParams.report) {
                        eoFreeze.request.historyParams.push({
                            key: key,
                            value: midRequestParams.report[key]
                        });
                    }
                }
                url = _requestUtils.HANDLE_URL.handleProtocol(url, eoFreeze.data.httpHeader);
               
                var headerResult = _requestUtils.HANDLE_HEADER.isLegal(headers, LANG);
                if (headerResult.error == true) {
                    _commonUtils.COMMON_TOOLS.postError({
                        type: 'normal',
                        connect: normal,
                        errorReason: headerResult.errorReason,
                        data: eoFreeze.data
                    });
                }
                if (eoFreeze.data.error == true) {
                    return;
                }
                chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders, {
                    urls: ["http://*/*", "https://*/*"],
                    types: ["xmlhttprequest"]
                }, ["blocking", "requestHeaders"]);

                window.parent.chrome.webRequest.onHeadersReceived.addListener(getResponseHeaders, {
                    urls: ["<all_urls>"]
                }, ["responseHeaders", "blocking"]);
                if (eoFreeze.data.method == 'GET') {
                    eoFreeze.request.ContentType = false;
                }
                freeze.ajax = $.ajax({
                    url: url,
                    traditional: true,
                    beforeSend: function beforeSend(request) {
                        eoFreeze.request.beforeTime = new Date();
                    },
                    processData: eoFreeze.request.processData,
                    contentType: eoFreeze.request.ContentType,
                    type: eoFreeze.data.method,
                    async: true,
                    data: eoFreeze.request.params
                }).done(function (successData, textStatus, xhr) {
                    eoFreeze.response.whichXhr = 'success';
                }).fail(function (xhr, textStatus) {
                    eoFreeze.response.whichXhr = 'error';
                    if (xhr.status == 0) {
                        _commonUtils.COMMON_TOOLS.postError({
                            type: 'normal',
                            connect: normal,
                            errorReason: "target server no answer",
                            data: eoFreeze.data
                        });
                    }
                }).always(function (successData, textStatus, jqXHR) {
                    backData = {};
                   
                    chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders);
                    chrome.webRequest.onHeadersReceived.removeListener(getResponseHeaders);
                    if (eoFreeze.data.error) return;
                   
                    var xhr;
                    if (eoFreeze.response.whichXhr == 'success') {
                        xhr = jqXHR;
                    } else {
                        xhr = successData;
                    }
                   
                   
                    var testDeny = new Date(),
                        testTime = '';
                    testTime = _commonUtils.COMMON_TOOLS.handleTime(eoFreeze.request.beforeTime);
                    testDeny = testDeny - eoFreeze.request.beforeTime;
                   
                    var responseContentType = xhr.getResponseHeader('Content-Type');
                    if (responseContentType) {
                        if (responseContentType.indexOf("image/") != -1) {
                            xhr.responseText = eoFreeze.request.apiUrl;
                        }
                    }
                    response = xhr.responseText;
                    if (eoFreeze.data.afterScript) {
                        var afterResult = _injectCode.INJECT_CODE.evalAfterScript(LANG, eoFreeze.data.afterScript, response, env, eoFreeze.data.eo, eoFreeze.data.productType);
                        if (afterResult.error) {
                            _commonUtils.COMMON_TOOLS.postError({
                                type: 'normal',
                                connect: normal,
                                errorReason: afterResult.errorReason,
                                data: eoFreeze.data
                            });
                            return;
                        } else {
                            response = afterResult.response;
                            env = afterResult.env;
                        }
                    }
                   
                    try {
                        if (typeof response != 'string') {
                            response = (0, _stringify2.default)(response);
                            if ((0, _stringify2.default)(JSON.parse(xhr.responseText)) == response) {
                                response = xhr.responseText;
                            }
                        }
                    } catch (e) {}
                    backData = {
                        statusCode: "000000",
                        testHttpCode: xhr.status,
                        requestBody: {
                            url: url,
                            params: {
                                requestType: eoFreeze.report.requestType,
                                body: eoFreeze.report.params
                            },
                            query: query,
                            headers: (0, _stringify2.default)(eoFreeze.request.requestHeaders) == '{}' ? null : eoFreeze.request.requestHeaders,
                            historyHeaders: eoFreeze.request.historyHeaders,
                            historyParams: eoFreeze.request.historyParams
                        },
                        testResult: {
                            headers: (0, _stringify2.default)(eoFreeze.request.responseHeaders) == '{}' ? null : eoFreeze.request.responseHeaders,
                            body: response,
                            response: xhr.responseText
                        },
                        testDeny: testDeny
                    };
                    backData = (0, _stringify2.default)(backData);
                    normal.postMessage({
                        backResult: backData
                    });
                });
            }
        });
    }
});

/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(27);
__webpack_require__(33);
module.exports = __webpack_require__(84);


/***/ }),
/* 75 */,
/* 76 */,
/* 77 */,
/* 78 */,
/* 79 */,
/* 80 */,
/* 81 */,
/* 82 */,
/* 83 */,
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(4);
var get = __webpack_require__(60);
module.exports = __webpack_require__(0).getIterator = function (it) {
  var iterFn = get(it);
  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');
  return anObject(iterFn.call(it));
};


/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(86), __esModule: true };

/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(27);
__webpack_require__(33);
module.exports = __webpack_require__(87);


/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(44);
var ITERATOR = __webpack_require__(2)('iterator');
var Iterators = __webpack_require__(17);
module.exports = __webpack_require__(0).isIterable = function (it) {
  var O = Object(it);
  return O[ITERATOR] !== undefined
    || '@@iterator' in O
   
    || Iterators.hasOwnProperty(classof(O));
};


/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(89);
module.exports = __webpack_require__(0).Object.entries;


/***/ }),
/* 89 */
/***/ (function(module, exports, __webpack_require__) {


var $export = __webpack_require__(3);
var $entries = __webpack_require__(61)(true);

$export($export.S, 'Object', {
  entries: function entries(it) {
    return $entries(it);
  }
});


/***/ }),
/* 90 */,
/* 91 */,
/* 92 */,
/* 93 */,
/* 94 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(95), __esModule: true };

/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(33);
__webpack_require__(27);
module.exports = __webpack_require__(46).f('iterator');


/***/ }),
/* 96 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(97), __esModule: true };

/***/ }),
/* 97 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(98);
__webpack_require__(64);
__webpack_require__(103);
__webpack_require__(104);
module.exports = __webpack_require__(0).Symbol;


/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var global = __webpack_require__(1);
var has = __webpack_require__(10);
var DESCRIPTORS = __webpack_require__(9);
var $export = __webpack_require__(3);
var redefine = __webpack_require__(55);
var META = __webpack_require__(62).KEY;
var $fails = __webpack_require__(18);
var shared = __webpack_require__(41);
var setToStringTag = __webpack_require__(32);
var uid = __webpack_require__(31);
var wks = __webpack_require__(2);
var wksExt = __webpack_require__(46);
var wksDefine = __webpack_require__(47);
var enumKeys = __webpack_require__(99);
var isArray = __webpack_require__(100);
var anObject = __webpack_require__(4);
var isObject = __webpack_require__(5);
var toIObject = __webpack_require__(6);
var toPrimitive = __webpack_require__(38);
var createDesc = __webpack_require__(30);
var _create = __webpack_require__(56);
var gOPNExt = __webpack_require__(101);
var $GOPD = __webpack_require__(102);
var $DP = __webpack_require__(8);
var $keys = __webpack_require__(19);
var gOPD = $GOPD.f;
var dP = $DP.f;
var gOPN = gOPNExt.f;
var $Symbol = global.Symbol;
var $JSON = global.JSON;
var _stringify = $JSON && $JSON.stringify;
var PROTOTYPE = 'prototype';
var HIDDEN = wks('_hidden');
var TO_PRIMITIVE = wks('toPrimitive');
var isEnum = {}.propertyIsEnumerable;
var SymbolRegistry = shared('symbol-registry');
var AllSymbols = shared('symbols');
var OPSymbols = shared('op-symbols');
var ObjectProto = Object[PROTOTYPE];
var USE_NATIVE = typeof $Symbol == 'function';
var QObject = global.QObject;

var setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;


var setSymbolDesc = DESCRIPTORS && $fails(function () {
  return _create(dP({}, 'a', {
    get: function () { return dP(this, 'a', { value: 7 }).a; }
  })).a != 7;
}) ? function (it, key, D) {
  var protoDesc = gOPD(ObjectProto, key);
  if (protoDesc) delete ObjectProto[key];
  dP(it, key, D);
  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);
} : dP;

var wrap = function (tag) {
  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);
  sym._k = tag;
  return sym;
};

var isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  return it instanceof $Symbol;
};

var $defineProperty = function defineProperty(it, key, D) {
  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);
  anObject(it);
  key = toPrimitive(key, true);
  anObject(D);
  if (has(AllSymbols, key)) {
    if (!D.enumerable) {
      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));
      it[HIDDEN][key] = true;
    } else {
      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;
      D = _create(D, { enumerable: createDesc(0, false) });
    } return setSymbolDesc(it, key, D);
  } return dP(it, key, D);
};
var $defineProperties = function defineProperties(it, P) {
  anObject(it);
  var keys = enumKeys(P = toIObject(P));
  var i = 0;
  var l = keys.length;
  var key;
  while (l > i) $defineProperty(it, key = keys[i++], P[key]);
  return it;
};
var $create = function create(it, P) {
  return P === undefined ? _create(it) : $defineProperties(_create(it), P);
};
var $propertyIsEnumerable = function propertyIsEnumerable(key) {
  var E = isEnum.call(this, key = toPrimitive(key, true));
  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;
  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;
};
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {
  it = toIObject(it);
  key = toPrimitive(key, true);
  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;
  var D = gOPD(it, key);
  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;
  return D;
};
var $getOwnPropertyNames = function getOwnPropertyNames(it) {
  var names = gOPN(toIObject(it));
  var result = [];
  var i = 0;
  var key;
  while (names.length > i) {
    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);
  } return result;
};
var $getOwnPropertySymbols = function getOwnPropertySymbols(it) {
  var IS_OP = it === ObjectProto;
  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));
  var result = [];
  var i = 0;
  var key;
  while (names.length > i) {
    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);
  } return result;
};


if (!USE_NATIVE) {
  $Symbol = function Symbol() {
    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');
    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);
    var $set = function (value) {
      if (this === ObjectProto) $set.call(OPSymbols, value);
      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;
      setSymbolDesc(this, tag, createDesc(1, value));
    };
    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });
    return wrap(tag);
  };
  redefine($Symbol[PROTOTYPE], 'toString', function toString() {
    return this._k;
  });

  $GOPD.f = $getOwnPropertyDescriptor;
  $DP.f = $defineProperty;
  __webpack_require__(63).f = gOPNExt.f = $getOwnPropertyNames;
  __webpack_require__(25).f = $propertyIsEnumerable;
  __webpack_require__(45).f = $getOwnPropertySymbols;

  if (DESCRIPTORS && !__webpack_require__(22)) {
    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);
  }

  wksExt.f = function (name) {
    return wrap(wks(name));
  };
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });

for (var es6Symbols = (
 
  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'
).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);

for (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);

$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {
 
  'for': function (key) {
    return has(SymbolRegistry, key += '')
      ? SymbolRegistry[key]
      : SymbolRegistry[key] = $Symbol(key);
  },
 
  keyFor: function keyFor(sym) {
    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');
    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;
  },
  useSetter: function () { setter = true; },
  useSimple: function () { setter = false; }
});

$export($export.S + $export.F * !USE_NATIVE, 'Object', {
 
  create: $create,
 
  defineProperty: $defineProperty,
 
  defineProperties: $defineProperties,
 
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,
 
  getOwnPropertyNames: $getOwnPropertyNames,
 
  getOwnPropertySymbols: $getOwnPropertySymbols
});


$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {
  var S = $Symbol();
 
 
 
  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';
})), 'JSON', {
  stringify: function stringify(it) {
    var args = [it];
    var i = 1;
    var replacer, $replacer;
    while (arguments.length > i) args.push(arguments[i++]);
    $replacer = replacer = args[1];
    if (!isObject(replacer) && it === undefined || isSymbol(it)) return;
    if (!isArray(replacer)) replacer = function (key, value) {
      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);
      if (!isSymbol(value)) return value;
    };
    args[1] = replacer;
    return _stringify.apply($JSON, args);
  }
});


$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(7)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);

setToStringTag($Symbol, 'Symbol');

setToStringTag(Math, 'Math', true);

setToStringTag(global.JSON, 'JSON', true);


/***/ }),
/* 99 */
/***/ (function(module, exports, __webpack_require__) {


var getKeys = __webpack_require__(19);
var gOPS = __webpack_require__(45);
var pIE = __webpack_require__(25);
module.exports = function (it) {
  var result = getKeys(it);
  var getSymbols = gOPS.f;
  if (getSymbols) {
    var symbols = getSymbols(it);
    var isEnum = pIE.f;
    var i = 0;
    var key;
    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);
  } return result;
};


/***/ }),
/* 100 */
/***/ (function(module, exports, __webpack_require__) {


var cof = __webpack_require__(21);
module.exports = Array.isArray || function isArray(arg) {
  return cof(arg) == 'Array';
};


/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {


var toIObject = __webpack_require__(6);
var gOPN = __webpack_require__(63).f;
var toString = {}.toString;

var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames
  ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function (it) {
  try {
    return gOPN(it);
  } catch (e) {
    return windowNames.slice();
  }
};

module.exports.f = function getOwnPropertyNames(it) {
  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));
};


/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

var pIE = __webpack_require__(25);
var createDesc = __webpack_require__(30);
var toIObject = __webpack_require__(6);
var toPrimitive = __webpack_require__(38);
var has = __webpack_require__(10);
var IE8_DOM_DEFINE = __webpack_require__(54);
var gOPD = Object.getOwnPropertyDescriptor;

exports.f = __webpack_require__(9) ? gOPD : function getOwnPropertyDescriptor(O, P) {
  O = toIObject(O);
  P = toPrimitive(P, true);
  if (IE8_DOM_DEFINE) try {
    return gOPD(O, P);
  } catch (e) { /* empty */ }
  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);
};


/***/ }),
/* 103 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(47)('asyncIterator');


/***/ }),
/* 104 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(47)('observable');


/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(106);
module.exports = __webpack_require__(0).Object.keys;


/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {


var toObject = __webpack_require__(43);
var $keys = __webpack_require__(19);

__webpack_require__(65)('keys', function () {
  return function keys(it) {
    return $keys(toObject(it));
  };
});


/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _stringify = __webpack_require__(12);

var _stringify2 = _interopRequireDefault(_stringify);

var _assign = __webpack_require__(11);

var _assign2 = _interopRequireDefault(_assign);

var _typeof2 = __webpack_require__(20);

var _typeof3 = _interopRequireDefault(_typeof2);

var _getIterator2 = __webpack_require__(16);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _slicedToArray2 = __webpack_require__(23);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries = __webpack_require__(24);

var _entries2 = _interopRequireDefault(_entries);

var _commonUtils = __webpack_require__(13);

var _requestUtils = __webpack_require__(15);

var _injectCode = __webpack_require__(49);

var _constant = __webpack_require__(14);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

"use strict";

var BATCH = {
    ajaxs: []
};
chrome.runtime.onConnect.addListener(function (batch) {
    if (batch.name == "batchTest") {
        var handleRequestHeaders = function handleRequestHeaders(details) {
            if (!eoData.array[0]) return;
            if (eoData.requestId == -1) {
                eoData.requestId = Number(details.requestId) + 1;
            }
           
            if (typeof errorRequestFlagArr[details.requestId - eoData.requestId] == 'number') {
                eoData.requestId = eoData.requestId - errorRequestFlagArr[details.requestId - eoData.requestId];
            }
            var template = eoData.array[details.requestId - eoData.requestId];
           
            if (template && template.apiUrl) {
                if (!details.initiator) {
                    if (navigator.userAgent.indexOf('Firefox') > -1) {
                        details.initiator = details.originUrl.replace('/_generated_background_page.html', '');
                    } else {
                        for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                            if (details.requestHeaders[j].name.toLowerCase() == 'origin') {
                                details.initiator = details.requestHeaders[j].value;
                                break;
                            }
                        }
                    }
                }
                if (details.initiator == initiator || details.tabId == -1) {
                    var key = Object.key,
                        value = Object.value,
                        entries = _entries2.default;

                    details.requestHeaders.push({
                        name: 'Cache-Control',
                        value: 'no-cache'
                    });
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = (0, _getIterator3.default)(entries(template.headers)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var _ref = _step.value;

                            var _ref2 = (0, _slicedToArray3.default)(_ref, 2);

                            var _key = _ref2[0];
                            var _value = _ref2[1];

                            var headerFlag = 0;
                            for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                if (details.requestHeaders[j].name.toLowerCase() == _key.toLowerCase()) {
                                    headerFlag = 1;
                                    details.requestHeaders[j].name = _key;
                                    details.requestHeaders[j].value = _value.toString();
                                }
                            }
                            if (headerFlag == 0 && _key) {
                                details.requestHeaders.push({
                                    name: _key,
                                    value: _value.toString()
                                });
                            }
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    var requestHeaders = {};
                   
                    for (var j = 0; j < details.requestHeaders.length; j++) {
                        requestHeaders[details.requestHeaders[j].name] = details.requestHeaders[j].value;
                    }
                    allRequestHeaders[details.requestId - eoData.requestId] = requestHeaders;
                }
            }
            return {
                requestHeaders: details.requestHeaders
            };
        };

        var initiator = window.location.origin;
        var eoData = {
            requestId: -1,
            array: [],
            lastK: 0
        };
        var allRequestHeaders = [];
        var errorRequestFlagArr = [];

        window.parent.chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders, {
            urls: ["http://*/*", "https://*/*"],
            types: ["xmlhttprequest"]
        }, ["blocking", "requestHeaders"]);
        $.ajax({
            url: 'https://www.eolinker.com',
            type: 'GET',
            async: true
        });
        batch.onMessage.addListener(function (webInfo) {
            if (webInfo.stopStatus == true) {
                if (webInfo.index == 0) {
                    _commonUtils.COMMON_TOOLS.abortAll(BATCH.ajaxs);
                } else {
                    BATCH.ajaxs[webInfo.index - 1].abort();
                }
            } else {
                var length;
                var amount;
                var backResult;
                var productType;
                var k;
                var data;
                var eoFreeze;
                var env;
                var url, params, headers, query, raw, rest;
                var response;
                var beforeResult;
                var errorBackResult;
                var i;
                var j;
                var Ajax;

                (function () {
                   
                    var handleResponseHeader = function handleResponseHeader(allResponseHeaders) {
                        var items = allResponseHeaders.split("\r\n");
                        var responseHeaders = {};
                        for (var i = 0; i < items.length - 1; i++) {
                            items[i] = items[i].split(": ");
                            responseHeaders[items[i][0]] = items[i][1];
                        }
                        return responseHeaders;
                    };

                    length = webInfo.caseList.length;
                    amount = webInfo.amount;
                    backResult = {
                        responseList: [{
                            responseType: "error"
                        }],
                        status: "tested"
                    };
                    productType = webInfo.productType;

                    backResult.responseList = new Array(amount);
                    var _loop = function _loop() {
                       
                       
                        if (k == length - 1) {}
                        data = JSON.parse(webInfo.caseList[k].caseData);
                        eoFreeze = {
                            constant: {},
                            request: {
                                apiUrl: data.URL,
                                responseHeaders: [],
                                params: {},
                                beforeTime: new Date(),
                                apiRequestParamJsonType: data.apiRequestParamJsonType || "0",
                                flagFormDataToJson: data.toJson ? data.toJson : false,
                                processData: true,
                                ContentType: 'application/x-www-form-urlencoded'
                            },
                            response: {
                                error: {},
                                whichXhr: 'success'
                            },
                            report: {
                                params: {},
                                requestType: data.requestType,
                                errorReason: [],
                                headers: {}
                            },
                            data: {
                                oldVersion: webInfo.oldVersion,
                                productType: webInfo.productType,
                                httpHeader: data.httpHeader,
                                requestType: data.requestType,
                                method: data.apiRequestType,
                                params: data.params,
                                restfulParams: data.restfulParam || [],
                                raw: data.raw,
                                headers: data.headers,
                                error: false,
                                Url: data.URL,
                                env: webInfo.env,
                                auth: data.auth,
                                beforeScript: data.script ? data.script.before : '',
                                afterScript: data.script ? data.script.after : '',
                                commonFunList: webInfo.commonFunList || []
                            }
                        };

                        var LANG = eoFreeze.data.productType == 5 || eoFreeze.data.productType == 0 ? 'en' : 'cn';
                       
                        env = {
                            baseUrl: '',
                            headers: {},
                            extraParams: {},
                            globalParams: {}
                           
                        };
                        url = '';
                        params = {};
                        headers = {};
                        query = {};
                        raw = '';
                        rest = {};
                       

                        response = null;
                       

                        eoFreeze.data.method = _commonUtils.COMMON_TOOLS.judgeRequestMethod(eoFreeze.data.method);

                        function handleErrorReason(errorReason, container) {
                            if (eoFreeze.data.productType == 2 && eoFreeze.data.oldVersion) {
                                container = errorReason;
                            } else {
                                if ((typeof errorReason === 'undefined' ? 'undefined' : (0, _typeof3.default)(errorReason)) == 'object') {
                                    container = (0, _assign2.default)(container.concat(errorReason));
                                } else {
                                    container.push(errorReason);
                                }
                            }
                            return container;
                        }
                       
                        function handleArguments() {
                            for (var i = 0; i < eoFreeze.data.restfulParams.length;) {
                                if (!eoFreeze.data.restfulParams[i].paramKey || !eoFreeze.data.restfulParams[i].checkbox) {
                                    eoFreeze.data.restfulParams.splice(i, 1);
                                } else {
                                    var midUrl = url;
                                    var beforeUrl = url;
                                    midUrl = midUrl.replace(eval("/\{(?!\{)" + eoFreeze.data.restfulParams[i].paramKey + "\}(?!\})/g"), eoFreeze.data.restfulParams[i].paramInfo);
                                    midUrl = midUrl.replace(eval("/\:" + eoFreeze.data.restfulParams[i].paramKey + "/g"), eoFreeze.data.restfulParams[i].paramInfo);
                                    if (beforeUrl != midUrl) {
                                        rest[eoFreeze.data.restfulParams[i].paramKey] = eoFreeze.data.restfulParams[i].paramInfo;
                                    } else {
                                        if (eoFreeze.data.requestType != '1') {
                                            eoFreeze.data.params.push(eoFreeze.data.restfulParams[i]);
                                        }
                                    }
                                    i++;
                                }
                            }
                            switch (eoFreeze.data.requestType) {
                                case '0':
                                    {
                                       
                                       
                                        for (var i = 0; i < eoFreeze.data.params.length;) {
                                            if (!eoFreeze.data.params[i].paramKey || !eoFreeze.data.params[i].checkbox) {
                                                eoFreeze.data.params.splice(i, 1);
                                            } else {
                                                eoFreeze.data.params[i].paramInfo = eoFreeze.data.params[i].paramInfo || '';
                                                i++;
                                            }
                                        }
                                        if (!eoFreeze.request.flagFormDataToJson) {
                                            for (var i = 0; i < eoFreeze.data.params.length; i++) {
                                                if (eoFreeze.data.params[i].paramKey in params) {
                                                    if ((0, _typeof3.default)(params[eoFreeze.data.params[i].paramKey]) == 'object') {
                                                        params[eoFreeze.data.params[i].paramKey].push(eoFreeze.data.params[i].paramInfo || '');
                                                    } else {
                                                        params[eoFreeze.data.params[i].paramKey] = [params[eoFreeze.data.params[i].paramKey], eoFreeze.data.params[i].paramInfo || ''];
                                                    }
                                                } else {
                                                    params[eoFreeze.data.params[i].paramKey] = eoFreeze.data.params[i].paramInfo || '';
                                                }
                                            }
                                        } else {
                                           
                                            var formJsonData = _requestUtils.HANDLE_PARAMS.handleFormJson(eoFreeze.data.params, LANG);
                                            if (formJsonData.error.status == 1) {
                                                eoFreeze.data.error = true;
                                                eoFreeze.report.errorReason = handleErrorReason(formJsonData.error, eoFreeze.report.errorReason);
                                            }
                                            if (eoFreeze.data.beforeScript) {
                                                params = JSON.parse(formJsonData.dataParams);
                                            } else {
                                                params = formJsonData.dataParams;
                                            }
                                        }
                                        break;
                                    }
                                case '1':
                                    {
                                        raw = eoFreeze.data.raw;
                                        break;
                                    }
                                case '2':
                                    {
                                       
                                        var options = {
                                            rootType: eoFreeze.request.apiRequestParamJsonType || "0"
                                        };
                                        params = _requestUtils.HANDLE_PARAMS.handleJSON(eoFreeze.data.params, options);
                                        break;
                                    }
                                case '3':
                                    {
                                        params = _requestUtils.HANDLE_PARAMS.handleJSON(eoFreeze.data.params, {
                                            rootType: "0"
                                        });
                                        break;
                                    }

                            }
                           
                            if (eoFreeze.data.auth) {
                                switch (Number(eoFreeze.data.auth.status)) {
                                    case 1:
                                        {
                                            if (eoFreeze.data.auth.basicAuth) {
                                                var str = eoFreeze.data.auth.basicAuth.username + ':' + eoFreeze.data.auth.basicAuth.password;
                                                headers['Authorization'] = 'Basic ' + CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(str));
                                            }
                                            break;
                                        }
                                    case 2:
                                        {
                                            var compareTable = {
                                                'query': query,
                                                'header': headers
                                            };
                                            var result = _requestUtils.REQUEST_COMMON.jwtEncode(eoFreeze.data.auth.jwtAuth, LANG);
                                            if (result.type == 'error') {
                                                eoFreeze.data.error = true;
                                                eoFreeze.report.errorReason = handleErrorReason(result.errorReason, eoFreeze.report.errorReason);
                                            } else {
                                                compareTable[eoFreeze.data.auth.jwtAuth.position][eoFreeze.data.auth.jwtAuth.tokenName || ""] = result;
                                            }
                                        }
                                }
                            }
                           
                            for (var i = 0; i < eoFreeze.data.headers.length;) {
                                if (!eoFreeze.data.headers[i].headerName || !eoFreeze.data.headers[i].checkbox) {
                                    eoFreeze.data.headers.splice(i, 1);
                                } else {
                                    headers[eoFreeze.data.headers[i].headerName] = eoFreeze.data.headers[i].headerValue;
                                    i++;
                                }
                            }
                           
                            if (!$.isEmptyObject(eoFreeze.data.env)) {
                                if (eoFreeze.data.productType == 1 || eoFreeze.data.productType == 5 || eoFreeze.data.productType == 2 && !eoFreeze.data.oldVersion) {
                                    env.baseUrl = env.baseUrl == '' ? eoFreeze.data.env.frontURI : env.baseUrl;
                                } else {
                                    if (eoFreeze.data.env.frontURIList[0]) {
                                        env.baseUrl = env.baseUrl == '' ? eoFreeze.data.env.frontURIList[0].uri : env.baseUrl;
                                    }
                                }
                                var paramList = {};
                                for (var i = 0; i < eoFreeze.data.env.paramList.length; i++) {
                                    paramList[eoFreeze.data.env.paramList[i].paramKey] = eoFreeze.data.env.paramList[i].paramValue;
                                }
                                var headerList = {};
                                for (var i = 0; i < eoFreeze.data.env.headerList.length; i++) {
                                    headerList[eoFreeze.data.env.headerList[i].headerName] = eoFreeze.data.env.headerList[i].headerValue;
                                }
                                var additionalParamList = {};
                                additionalParamList = JSON.parse(_requestUtils.HANDLE_PARAMS.handleFormJson(eoFreeze.data.env.additionalParamList, LANG).dataParams);
                                console.log(additionalParamList);
                                env.headers = headerList;
                                env.extraParams = additionalParamList;
                                env.globalParams = paramList;
                                if (!(eoFreeze.data.auth && eoFreeze.data.auth.status != '0')) {
                                    env.envAuth = eoFreeze.data.env.envAuth;
                                }
                            }
                        }
                       
                        url = eoFreeze.request.apiUrl;
                        query = _requestUtils.HANDLE_URL.splitQuery(url);
                        handleArguments();
                        if (eoFreeze.data.beforeScript || eoFreeze.data.afterScript) {
                            eoFreeze.data.eo = _injectCode.INJECT_CODE.defineEo(eoFreeze.data.commonFunList, LANG, env);
                        }
                       
                        beforeResult = _injectCode.INJECT_CODE.evalBeforeScript(LANG, eoFreeze.data.beforeScript, url, query, headers, params, raw, env, eoFreeze.data.eo);

                        if (beforeResult.error) {
                            eoFreeze.data.error = true;
                            handleErrorReason(beforeResult.errorReason, eoFreeze.report.errorReason);
                        } else {
                            url = beforeResult.url;
                            query = beforeResult.query;
                            headers = beforeResult.headers;
                            params = beforeResult.params;
                            raw = beforeResult.raw;
                            env = beforeResult.env;
                        }
                        if (eoFreeze.data.method == 'GET') {
                            if ((typeof params === 'undefined' ? 'undefined' : (0, _typeof3.default)(params)) == 'object') {
                                var midParams = JSON.parse((0, _stringify2.default)(params));
                                query = (0, _assign2.default)(query, midParams);
                                params = {};
                            } else {
                                query[params] = '';
                                params = '';
                            }
                        }
                        url = _requestUtils.HANDLE_URL.jointQuery(url, query);
                        url = _requestUtils.HANDLE_URL.replaceRest(url, rest);
                       
                        eoFreeze.data.flagFile = _requestUtils.HANDLE_PARAMS.judgeFileExist(params);
                       
                        var midEnvReulst = _requestUtils.REQUEST_COMMON.handleEnv(env, url, headers, params, raw, eoFreeze.data.requestType, eoFreeze.data.flagFile, eoFreeze.request.flagFormDataToJson, LANG);
                        if (midEnvReulst.type == 'error') {
                            eoFreeze.data.error = true;
                            eoFreeze.report.errorReason = handleErrorReason(midEnvReulst.errorReason, eoFreeze.report.errorReason);
                        }
                        url = midEnvReulst.url;
                        headers = midEnvReulst.headers;
                        params = midEnvReulst.params;
                        raw = midEnvReulst.raw;
                        var midRequestParams = _requestUtils.HANDLE_PARAMS.handleRequestParams(headers, eoFreeze.data.requestType, eoFreeze.request.flagFormDataToJson, eoFreeze.data.flagFile, params, raw, eoFreeze.request.ContentType, eoFreeze.request.processData, eoFreeze.report.requestType);
                        eoFreeze.report.params = midRequestParams.report;
                        eoFreeze.request.params = midRequestParams.request;
                        raw = midRequestParams.raw;
                        eoFreeze.request.processData = midRequestParams.processData;
                        eoFreeze.request.ContentType = midRequestParams.ContentType;
                        eoFreeze.report.requestType = midRequestParams.reportType;
                        url = _requestUtils.HANDLE_URL.handleProtocol(url, eoFreeze.data.httpHeader);
                       
                        errorBackResult = {
                            amount: amount,
                            webInfo: webInfo,
                            type: 'batch',
                            connect: batch,
                            request: eoFreeze.request,
                            backResult: backResult,
                            report: eoFreeze.report,
                            data: eoFreeze.data,
                            allRequestHeaders: allRequestHeaders,
                            errorRequestFlagArr: errorRequestFlagArr,
                            url: url,
                            k: k,
                            length: length,
                            errorReason: "",
                            eoData: eoData
                        };

                        var headerResult = _requestUtils.HANDLE_HEADER.isLegal(headers, LANG);
                        eoData.array.push({
                            headers: headers,
                            apiUrl: url,
                            auth: eoFreeze.data.auth
                        });
                        if (k == length - 1) {
                            for (i = 0; i < errorRequestFlagArr.length; i++) {
                                if (typeof errorRequestFlagArr[i] == 'number') {
                                    for (j = i + 1; j < errorRequestFlagArr.length; j++) {
                                        if (typeof errorRequestFlagArr[j] == 'number') {
                                            errorRequestFlagArr[i] = errorRequestFlagArr[i] + errorRequestFlagArr[j];
                                            errorRequestFlagArr[j] = undefined;
                                        } else {
                                            break;
                                        }
                                    }
                                } else {
                                    continue;
                                }
                            }
                        }
                        if (headerResult.error == true) {
                            eoFreeze.report.errorReason = handleErrorReason(headerResult.errorReason, eoFreeze.report.errorReason);
                            errorBackResult.errorReason = eoFreeze.report.errorReason;
                            _commonUtils.COMMON_TOOLS.postError(errorBackResult);
                            return 'continue';
                        }
                        if (eoFreeze.data.error) {
                            errorBackResult.errorReason = eoFreeze.report.errorReason;
                            _commonUtils.COMMON_TOOLS.postError(errorBackResult);
                            return 'continue';
                        }
                        if (eoFreeze.data.method == 'GET') {
                            eoFreeze.request.ContentType = false;
                            eoFreeze.report.params = {};
                        }
                        Ajax = $.ajax({
                            url: url,
                            traditional: true,
                            beforeSend: function beforeSend(request) {
                               
                                eoFreeze.request.beforeTime = new Date();
                                this.eolinkerk = k;
                               
                                this.matchRule = webInfo.caseList[k].matchRule;
                                this.matchType = webInfo.caseList[k].matchType;
                                this.statuCode = webInfo.caseList[k].statusCode;
                                this.Url = url;
                                this.requestType = eoFreeze.request.requestType;
                                this.reportParams = eoFreeze.report.params;
                                this.method = eoFreeze.data.method;
                                this.errorReason = eoFreeze.report.errorReason;
                                this.afterScript = eoFreeze.data.afterScript;
                                this.error = eoFreeze.data.error;
                                var allHeaders = {};
                                this.eo = eoFreeze.data.eo;
                                for (var i = eoFreeze.data.headers.length - 1; i >= 0; i--) {
                                    allHeaders[eoFreeze.data.headers[i].headerName] = eoFreeze.data.headers[i].headerValue;
                                }
                                this.headers = allHeaders;
                            },
                            processData: eoFreeze.request.processData,
                            contentType: eoFreeze.request.ContentType,
                            type: eoFreeze.data.method,
                            async: true,
                            data: eoFreeze.request.params
                        }).done(function (successData, textStatus, xhr) {
                            eoFreeze.response.whichXhr = 'success';
                        }).fail(function (xhr, textStatus) {
                            eoFreeze.response.whichXhr = 'error';
                        }).always(function (successData, textStatus, jqXHR) {
                            var id = this.eolinkerk;
                            var eo = this.eo;
                            if (textStatus == 'abort') {
                                if (amount != length) {
                                   
                                    backResult.responseList[webInfo.index - 1] = null;
                                } else {
                                    backResult.responseList[id] = null;
                                }
                            } else {
                                var matchType = this.matchType;
                                var matchRule = this.matchRule;
                                var apiUrl = this.Url;
                                var method = this.method;
                                var headers = this.headers;
                               
                                var statusCode = this.statuCode;
                                var requestType = this.requestType;
                                var errorReason = this.errorReason;
                                var error = this.error;
                                var Script = this.afterScript;
                                var reportParams = this.reportParams;
                               
                                var isMatch = true;
                               
                                var xhr;
                                if (eoFreeze.response.whichXhr == 'success') {
                                    xhr = jqXHR;
                                } else {
                                    xhr = successData;
                                }
                                if (xhr.status != 0 && error == false) {
                                   
                                    response = xhr.responseText;
                                    var afterResult = _injectCode.INJECT_CODE.evalAfterScript(LANG, Script, response, env, eo, eoFreeze.data.productType);
                                    if (afterResult.error) {
                                        error = true;
                                        errorReason = handleErrorReason(afterResult.errorReason, errorReason);
                                    } else {
                                        response = afterResult.response;
                                       
                                        env = afterResult.env;
                                    }
                                    var responseText = response;
                                    var parseBody = response;
                                    try {
                                        if (typeof response != 'string') {
                                            responseText = (0, _stringify2.default)(response);
                                            if ((0, _stringify2.default)(JSON.parse(xhr.responseText)) == responseText) {
                                                responseText = xhr.responseText;
                                            }
                                        } else {
                                            responseText = response;
                                            parseBody = JSON.parse(response);
                                        }
                                    } catch (e) {};
                                   
                                    if (error == true) {
                                        isMatch = false;
                                    } else {
                                        if (matchType == 2) {
                                           
                                            isMatch = true;
                                        } else {
                                            if (xhr.status == statusCode) {
                                                if (matchType == 0) {
                                                   
                                                    if (responseText == matchRule) {
                                                        isMatch = true;
                                                    } else {
                                                        isMatch = false;
                                                        errorReason = handleErrorReason(_commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.Match.all[LANG], [matchRule, responseText]), errorReason);
                                                    }
                                                } else if (matchType == 1) {
                                                   
                                                    try {
                                                        var patt = new RegExp(matchRule);
                                                        isMatch = patt.test(responseText);
                                                        if (!isMatch) {
                                                            errorReason = handleErrorReason(_commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.Match.patt[LANG], [matchRule, responseText]), errorReason);
                                                        }
                                                    } catch (e) {
                                                        isMatch = false;
                                                        errorReason = handleErrorReason(_constant.CONSTANT.LANG.PattError[LANG], errorReason);
                                                    }
                                                } else if (matchType == 3) {
                                                    var match = matchRule;
                                                    var _result = _commonUtils.COMMON_TOOLS.selfLoopMatchJson(eoFreeze.data.productType, match, parseBody, LANG);
                                                    isMatch = _result.isMatch;
                                                    if (!isMatch) errorReason = handleErrorReason(_result.errorReason, errorReason);
                                                } else if (matchType == 4) {
                                                    var _match = matchRule;
                                                   
                                                    try {
                                                        var json = $.xml2json(parseBody);
                                                        var result = _commonUtils.COMMON_TOOLS.selfLoopMatchJson(eoFreeze.data.productType, _match, json, LANG);
                                                        if (!result.isMatch) {
                                                            isMatch = false;
                                                            errorReason = handleErrorReason(result.errorReason, errorReason);
                                                        }
                                                    } catch (e) {
                                                        console.log('xml:', e);
                                                        if (e) {
                                                            isMatch = false;
                                                            errorReason = handleErrorReason(_constant.CONSTANT.LANG.XmlError[LANG], errorReason);
                                                        }
                                                    }
                                                }
                                            } else {
                                                isMatch = false;
                                                errorReason = handleErrorReason(_commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.Match.statusCode[LANG], [statusCode, xhr.status]), errorReason);
                                            }
                                        }
                                    }
                                    var testDeny = new Date(),
                                        testTime = '',
                                        Time = _commonUtils.COMMON_TOOLS.handleTime(eoFreeze.request.beforeTime);
                                    var allResponseHeaders = xhr.getAllResponseHeaders();
                                   
                                    allResponseHeaders = handleResponseHeader(allResponseHeaders);
                                } else {
                                    isMatch = false;
                                }
                                isMatch = isMatch ? "success" : 'error';
                               
                                var responseListID = 0;
                                if (amount != length) {
                                    responseListID = webInfo.index - 1;
                                } else {
                                    responseListID = id;
                                }
                                backResult.responseList[responseListID] = {
                                    general: {
                                        requestUrl: apiUrl,
                                        requestMethod: method,
                                        statusCode: xhr.status
                                    },
                                    responseHeaders: (0, _stringify2.default)(allResponseHeaders) == '{}' ? null : allResponseHeaders,
                                    requestHeaders: (0, _stringify2.default)(allRequestHeaders[id]) == '{}' ? null : allRequestHeaders[id],
                                    requestBody: {
                                        requestType: requestType,
                                        body: reportParams
                                    },
                                    response: responseText,
                                    responseType: isMatch,
                                    errorReason: errorReason
                                };
                            }
                            if (k = length - 1) {
                                chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders);
                            }
                            batch.postMessage(backResult);
                        });

                        if (webInfo.index == 0) {
                            BATCH.ajaxs[k] = Ajax;
                        } else {
                            BATCH.ajaxs[webInfo.index - 1] = Ajax;
                        }
                    };

                    for (k = 0; k < length; k++) {
                        var _ret2 = _loop();

                        if (_ret2 === 'continue') continue;
                    }
                })();
            }
        });
    }
});

/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _regenerator = __webpack_require__(34);

var _regenerator2 = _interopRequireDefault(_regenerator);

var _getIterator2 = __webpack_require__(16);

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _values = __webpack_require__(66);

var _values2 = _interopRequireDefault(_values);

var _keys = __webpack_require__(48);

var _keys2 = _interopRequireDefault(_keys);

var _stringify = __webpack_require__(12);

var _stringify2 = _interopRequireDefault(_stringify);

var _slicedToArray2 = __webpack_require__(23);

var _slicedToArray3 = _interopRequireDefault(_slicedToArray2);

var _entries4 = __webpack_require__(24);

var _entries5 = _interopRequireDefault(_entries4);

var _typeof2 = __webpack_require__(20);

var _typeof3 = _interopRequireDefault(_typeof2);

var _promise = __webpack_require__(26);

var _promise2 = _interopRequireDefault(_promise);

var _assign = __webpack_require__(11);

var _assign2 = _interopRequireDefault(_assign);

var _asyncToGenerator2 = __webpack_require__(35);

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _commonUtils = __webpack_require__(13);

var _requestUtils = __webpack_require__(15);

var _injectCode = __webpack_require__(49);

var _envCase = __webpack_require__(51);

var _constant = __webpack_require__(14);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var AUTO = {
    ajaxs: [],
    blob: []
};
chrome.runtime.onConnect.addListener(function (auto) {
    if (auto.name == "autoTest") {
        var initiator = window.location.origin;
        auto.onMessage.addListener(function (caseList) {
            var scar_Test = function () {
                var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {
                    var autoData, LANG, env, backResult, paramList, i, headerList, additionalParamList, sendRequest, asyncControl, _afterCase, caseLen, amount, productType, batchIndex, response, responseHeaders, codeTestTime, caseListIndex, cookieObj;

                    return _regenerator2.default.wrap(function _callee3$(_context3) {
                        while (1) {
                            switch (_context3.prev = _context3.next) {
                                case 0:
                                    if (!(caseList.stopStatus == true)) {
                                        _context3.next = 4;
                                        break;
                                    }

                                   
                                    if (caseList.index == 0) {
                                        _commonUtils.COMMON_TOOLS.abortAll(AUTO.ajaxs);
                                    } else {
                                        AUTO.ajaxs[caseList.index - 1].abort();
                                    }
                                    _context3.next = 15;
                                    break;

                                case 4:
                                    autoData = {
                                        preCode: {
                                            result: {
                                                cookie: {
                                                    cookie: {
                                                        example: {
                                                            cookieStr: '',
                                                            obj: {}
                                                        }
                                                    },
                                                    defaultCookie: {
                                                        example: {
                                                            cookieStr: '',
                                                            obj: {}
                                                        }
                                                    }
                                                },
                                                report: []
                                            },
                                            stopStatus: true
                                        }
                                    };
                                    LANG = caseList.productType == 5 || caseList.productType == 0 ? 'en' : 'cn';
                                   

                                    env = {
                                        baseUrl: '',
                                        headers: {},
                                        extraParams: {},
                                        globalParams: {}
                                    };
                                    backResult = {
                                        beforeCaseReportList: autoData.preCode.result.report,
                                        reportStatus: 'finish',
                                        time: '0ms',
                                        afterCaseReportList: [],
                                        responseList: [{
                                            responseType: "success"
                                        }],
                                        status: 'tested'
                                    };
                                   

                                    if (!(caseList.beforeCase.caseCodeList != false)) {
                                        _context3.next = 13;
                                        break;
                                    }

                                    _context3.next = 11;
                                    return (0, _envCase.handleCaseCode)(caseList.productType, caseList.beforeCase).then(function (result) {
                                        autoData.preCode.result = result;
                                        backResult.beforeCaseReportList = autoData.preCode.result.report;
                                        env = result.env;
                                    }).catch(function (e) {
                                        console.log("beforeInject Error", e);
                                        if (e == 'stop') {
                                            autoData.preCode.stopStatus = false;
                                        }
                                    });

                                case 11:
                                    _context3.next = 14;
                                    break;

                                case 13:
                                    if (!$.isEmptyObject(caseList.env)) {
                                       
                                        if (caseList.productType == 1 || caseList.productType == 5 || caseList.productType == 2) {
                                            env.baseUrl = env.baseUrl == '' ? caseList.env.frontURI : env.baseUrl;
                                        } else {
                                            if (caseList.env.frontURIList[0]) {
                                                env.baseUrl = env.baseUrl == '' ? caseList.env.frontURIList[0].uri : env.baseUrl;
                                            }
                                        }
                                        paramList = {};

                                        for (i = 0; i < caseList.env.paramList.length; i++) {
                                            paramList[caseList.env.paramList[i].paramKey] = caseList.env.paramList[i].paramValue;
                                        }
                                        headerList = {};

                                        for (i = 0; i < caseList.env.headerList.length; i++) {
                                            headerList[caseList.env.headerList[i].headerName] = caseList.env.headerList[i].headerValue;
                                        }
                                        additionalParamList = {};

                                        additionalParamList = JSON.parse(_requestUtils.HANDLE_PARAMS.handleFormJson(caseList.env.additionalParamList, LANG).dataParams);
                                        env.headers = (0, _assign2.default)({}, headerList, env.headers);
                                        env.extraParams = (0, _assign2.default)({}, additionalParamList, env.extraParams);
                                        env.globalParams = (0, _assign2.default)({}, paramList, env.globalParams);
                                        env.envAuth = (0, _assign2.default)({}, caseList.env.envAuth);
                                    }

                                case 14:
                                    if (autoData.preCode.stopStatus) {
                                        sendRequest = function sendRequest(k) {
                                            return new _promise2.default(function () {
                                                var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(resolve, reject) {
                                                    var caseData, error, eoFreeze, errorReasonPatt, url, params, headers, query, raw, rest, Redirection, host, handleErrorReason, i, getPublicFile, j, fileUrl, handleArguments, queryOrigin, key, value, entries, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _ref3, _ref4, _key, _value, beforeResponse, beforeResult, midParams, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _ref5, _ref6, _key2, _value2, midEnvReulst, midRequestParams, errorBackResult, headerResult, handleRequestHeaders, getResponseHeaders, timeoutFun, Ajax;

                                                    return _regenerator2.default.wrap(function _callee$(_context) {
                                                        while (1) {
                                                            switch (_context.prev = _context.next) {
                                                                case 0:
                                                                    getResponseHeaders = function getResponseHeaders(details) {
                                                                        if (!details.initiator) {
                                                                            if (navigator.userAgent.indexOf('Firefox') > -1) {
                                                                                details.initiator = details.originUrl.replace('/_generated_background_page.html', '');
                                                                            } else {
                                                                                details.initiator = '';
                                                                            }
                                                                        }
                                                                        var url1 = _requestUtils.HANDLE_URL.handleRightUrl(url);
                                                                        if ((details.initiator == initiator || details.tabId == -1) && (details.url.indexOf(url1) > -1 || Redirection.status)) {
                                                                            var _host2 = _requestUtils.HANDLE_URL.destRequestUrl(details.url).hostname;
                                                                            if (details.statusCode == 302 || details.statusCode == 301 || details.statusCode == 307) {
                                                                                Redirection.status = true;
                                                                            }
                                                                           
                                                                            details.responseHeaders.forEach(function (header) {
                                                                                if (header.name.toLowerCase() == 'location') {
                                                                                    Redirection.location = header.value;
                                                                                }
                                                                               
                                                                                if (header.name in eoFreeze.response.responseHeaders) {
                                                                                    eoFreeze.response.responseHeaders[header.name.toLowerCase()] = eoFreeze.response.responseHeaders[header.name] + ";" + header.value;
                                                                                } else {
                                                                                    eoFreeze.response.responseHeaders[header.name.toLowerCase()] = header.value;
                                                                                }
                                                                            });
                                                                            var _key7 = Object.key,
                                                                                _value7 = Object.value,
                                                                                _entries3 = _entries5.default;
                                                                           

                                                                            if (!(_host2 in cookieObj.defaultCookie)) {
                                                                                cookieObj.defaultCookie[_host2] = {
                                                                                    cookieStr: '',
                                                                                    obj: {}
                                                                                };
                                                                            }
                                                                            var _iteratorNormalCompletion6 = true;
                                                                            var _didIteratorError6 = false;
                                                                            var _iteratorError6 = undefined;

                                                                            try {
                                                                                for (var _iterator6 = (0, _getIterator3.default)(_entries3(eoFreeze.response.responseHeaders)), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
                                                                                    var _ref13 = _step6.value;

                                                                                    var _ref14 = (0, _slicedToArray3.default)(_ref13, 2);

                                                                                    var _key8 = _ref14[0];
                                                                                    var _value8 = _ref14[1];

                                                                                    if (_key8.toLowerCase() == 'set-cookie') {
                                                                                        cookieObj.defaultCookie[_host2] = _commonUtils.COMMON_TOOLS.getCookieObj(_value8, cookieObj.defaultCookie[_host2]);
                                                                                    }
                                                                                }
                                                                            } catch (err) {
                                                                                _didIteratorError6 = true;
                                                                                _iteratorError6 = err;
                                                                            } finally {
                                                                                try {
                                                                                    if (!_iteratorNormalCompletion6 && _iterator6.return) {
                                                                                        _iterator6.return();
                                                                                    }
                                                                                } finally {
                                                                                    if (_didIteratorError6) {
                                                                                        throw _iteratorError6;
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    };

                                                                    handleRequestHeaders = function handleRequestHeaders(details) {
                                                                        if (!details.initiator) {
                                                                            if (navigator.userAgent.indexOf('Firefox') > -1) {
                                                                                details.initiator = details.originUrl.replace('/_generated_background_page.html', '');
                                                                            } else {
                                                                                for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                                                                    if (details.requestHeaders[j].name.toLowerCase() == 'origin') {
                                                                                        details.initiator = details.requestHeaders[j].value;
                                                                                        break;
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                        var url1 = _requestUtils.HANDLE_URL.handleRightUrl(url);
                                                                       
                                                                        if ((details.initiator == initiator || details.tabId == -1) && (details.url.indexOf(url1) > -1 || Redirection.status && details.url.indexOf(Redirection.location) > -1)) {
                                                                           
                                                                            var headerCookieFlag = false;
                                                                            var cookieName = 'cookie';
                                                                            var _host = _requestUtils.HANDLE_URL.destRequestUrl(details.url).hostname;
                                                                            if (!Redirection.status) {
                                                                                url = details.url;
                                                                            }
                                                                           
                                                                            if (!(_host in cookieObj.cookie)) {
                                                                               
                                                                                cookieObj.cookie[_host] = {
                                                                                    cookieStr: '',
                                                                                    obj: {}
                                                                                };
                                                                            }
                                                                           
                                                                            for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                                                                if (details.requestHeaders[j].name.toLowerCase() == 'cookie') {
                                                                                    cookieName = details.requestHeaders[j].name;
                                                                                    details.requestHeaders.splice(j, 1);
                                                                                }
                                                                            }
                                                                            var _key3 = Object.key,
                                                                                _value3 = Object.value,
                                                                                _entries = _entries5.default;

                                                                            details.requestHeaders.push({
                                                                                name: 'Cache-Control',
                                                                                value: 'no-cache'
                                                                            });
                                                                            var _iteratorNormalCompletion3 = true;
                                                                            var _didIteratorError3 = false;
                                                                            var _iteratorError3 = undefined;

                                                                            try {
                                                                                for (var _iterator3 = (0, _getIterator3.default)(_entries(headers)), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                                                                                    var _ref7 = _step3.value;

                                                                                    var _ref8 = (0, _slicedToArray3.default)(_ref7, 2);

                                                                                    var _key4 = _ref8[0];
                                                                                    var _value4 = _ref8[1];

                                                                                    var headerFlag = false;
                                                                                   
                                                                                    for (var j = details.requestHeaders.length - 1; j >= 0; j--) {
                                                                                        if (details.requestHeaders[j].name.toLowerCase() == _key4.toLowerCase()) {
                                                                                            headerFlag = true;
                                                                                            details.requestHeaders[j].name = _key4;
                                                                                            details.requestHeaders[j].value = _value4;
                                                                                        }
                                                                                    }
                                                                                   
                                                                                    if (headerFlag == false) {
                                                                                        details.requestHeaders.push({
                                                                                            name: _key4,
                                                                                            value: _value4
                                                                                        });
                                                                                    }
                                                                                   
                                                                                    if (_key4.toLowerCase() == 'cookie') {
                                                                                        headerCookieFlag = true;
                                                                                       
                                                                                        cookieObj.cookie[_host] = _commonUtils.COMMON_TOOLS.getCookieObj(_value4, cookieObj.cookie[_host]);
                                                                                    }
                                                                                }
                                                                               
                                                                            } catch (err) {
                                                                                _didIteratorError3 = true;
                                                                                _iteratorError3 = err;
                                                                            } finally {
                                                                                try {
                                                                                    if (!_iteratorNormalCompletion3 && _iterator3.return) {
                                                                                        _iterator3.return();
                                                                                    }
                                                                                } finally {
                                                                                    if (_didIteratorError3) {
                                                                                        throw _iteratorError3;
                                                                                    }
                                                                                }
                                                                            }

                                                                            if (headerCookieFlag == false) {
                                                                                var cookieValue = '';
                                                                                var keys = _keys2.default,
                                                                                    values = _values2.default,
                                                                                    _entries2 = _entries5.default;
                                                                               

                                                                                if (!(_host in cookieObj.defaultCookie)) {
                                                                                    cookieObj.defaultCookie[_host] = {
                                                                                        cookieStr: '',
                                                                                        obj: {}
                                                                                    };
                                                                                }
                                                                                var _iteratorNormalCompletion4 = true;
                                                                                var _didIteratorError4 = false;
                                                                                var _iteratorError4 = undefined;

                                                                                try {
                                                                                    for (var _iterator4 = (0, _getIterator3.default)(_entries2(cookieObj.cookie[_host].obj)), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                                                                                        var _ref9 = _step4.value;

                                                                                        var _ref10 = (0, _slicedToArray3.default)(_ref9, 2);

                                                                                        var _key5 = _ref10[0];
                                                                                        var _value5 = _ref10[1];

                                                                                        cookieObj.defaultCookie[_host].obj[_key5] = _value5;
                                                                                    }
                                                                                } catch (err) {
                                                                                    _didIteratorError4 = true;
                                                                                    _iteratorError4 = err;
                                                                                } finally {
                                                                                    try {
                                                                                        if (!_iteratorNormalCompletion4 && _iterator4.return) {
                                                                                            _iterator4.return();
                                                                                        }
                                                                                    } finally {
                                                                                        if (_didIteratorError4) {
                                                                                            throw _iteratorError4;
                                                                                        }
                                                                                    }
                                                                                }

                                                                                var _iteratorNormalCompletion5 = true;
                                                                                var _didIteratorError5 = false;
                                                                                var _iteratorError5 = undefined;

                                                                                try {
                                                                                    for (var _iterator5 = (0, _getIterator3.default)(_entries2(cookieObj.defaultCookie[_host].obj)), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                                                                                        var _ref11 = _step5.value;

                                                                                        var _ref12 = (0, _slicedToArray3.default)(_ref11, 2);

                                                                                        var _key6 = _ref12[0];
                                                                                        var _value6 = _ref12[1];

                                                                                        cookieValue = cookieValue + _key6 + '=' + _value6 + ';';
                                                                                    }
                                                                                   
                                                                                } catch (err) {
                                                                                    _didIteratorError5 = true;
                                                                                    _iteratorError5 = err;
                                                                                } finally {
                                                                                    try {
                                                                                        if (!_iteratorNormalCompletion5 && _iterator5.return) {
                                                                                            _iterator5.return();
                                                                                        }
                                                                                    } finally {
                                                                                        if (_didIteratorError5) {
                                                                                            throw _iteratorError5;
                                                                                        }
                                                                                    }
                                                                                }

                                                                                cookieValue = cookieValue + cookieObj.cookie[_host].cookieStr;
                                                                                if (cookieValue != '') {
                                                                                    details.requestHeaders.push({
                                                                                        name: cookieName,
                                                                                        value: cookieValue
                                                                                    });
                                                                                }
                                                                            }
                                                                           
                                                                            for (var j = 0; j < details.requestHeaders.length; j++) {
                                                                                eoFreeze.request.requestHeaders[details.requestHeaders[j].name] = details.requestHeaders[j].value;
                                                                            }
                                                                        }
                                                                        return {
                                                                            requestHeaders: details.requestHeaders
                                                                        };
                                                                    };

                                                                    handleArguments = function handleArguments() {
                                                                       
                                                                        for (var i = 0; i < eoFreeze.data.restfulParams.length;) {
                                                                            if (!eoFreeze.data.restfulParams[i].paramKey || !eoFreeze.data.restfulParams[i].checkbox) {
                                                                                eoFreeze.data.restfulParams.splice(i, 1);
                                                                            } else {
                                                                                var midUrl = url;
                                                                                var beforeUrl = url;
                                                                                midUrl = midUrl.replace(eval("/\{(?!\{)" + eoFreeze.data.restfulParams[i].paramKey + "\}(?!\})/g"), eoFreeze.data.restfulParams[i].paramInfo);
                                                                                midUrl = midUrl.replace(eval("/\:" + eoFreeze.data.restfulParams[i].paramKey + "/g"), eoFreeze.data.restfulParams[i].paramInfo);
                                                                                if (beforeUrl != midUrl) {
                                                                                    rest[_commonUtils.COMMON_TOOLS.evalBindParam(eoFreeze.data.restfulParams[i].paramKey, response, responseHeaders)] = _commonUtils.COMMON_TOOLS.evalBindParam(eoFreeze.data.restfulParams[i].paramInfo, response, responseHeaders);
                                                                                } else {
                                                                                    if (eoFreeze.data.requestType != '1') {
                                                                                        eoFreeze.data.params.push(eoFreeze.data.restfulParams[i]);
                                                                                    }
                                                                                }
                                                                                i++;
                                                                            }
                                                                        }
                                                                        switch (eoFreeze.data.requestType) {
                                                                            case '0':
                                                                                {
                                                                                   
                                                                                   
                                                                                    for (var i = 0; i < eoFreeze.data.params.length;) {
                                                                                        if (!eoFreeze.data.params[i].paramKey || !eoFreeze.data.params[i].checkbox) {
                                                                                            eoFreeze.data.params.splice(i, 1);
                                                                                        } else {
                                                                                            eoFreeze.data.params[i].paramKey = _commonUtils.COMMON_TOOLS.evalBindParam(eoFreeze.data.params[i].paramKey, response, responseHeaders);
                                                                                            eoFreeze.data.params[i].paramInfo = _commonUtils.COMMON_TOOLS.evalBindParam(eoFreeze.data.params[i].paramInfo, response, responseHeaders) || '';
                                                                                            i++;
                                                                                        }
                                                                                    }
                                                                                    if (!eoFreeze.request.flagFormDataToJson) {
                                                                                        for (var i = 0; i < eoFreeze.data.params.length; i++) {
                                                                                            if (eoFreeze.data.flagFile == true) {
                                                                                                if (eoFreeze.data.params[i].paramType == '1') {
                                                                                                    eoFreeze.data.params[i].files = eoFreeze.data.params[i].files || [];
                                                                                                    var paramInfo = '';
                                                                                                   
                                                                                                    if (eoFreeze.data.params[i].files.length) {
                                                                                                        for (var j = 0; j < eoFreeze.data.params[i].files.length; j++) {
                                                                                                            var uuid = eoFreeze.data.params[i].files[j].uuid;
                                                                                                            var file = _requestUtils.PUBLIC_FILE[uuid];
                                                                                                            if (file) {
                                                                                                                file.uuid = uuid;
                                                                                                            } else {
                                                                                                                file = new Blob();
                                                                                                                file.uuid = "-1";
                                                                                                            }
                                                                                                            file.name = eoFreeze.data.params[i].files[j].name;
                                                                                                            if (eoFreeze.data.params[i].paramKey in params) {
                                                                                                                if (Object.prototype.toString.call(params[eoFreeze.data.params[i].paramKey]) == '[object Array]') {
                                                                                                                    params[eoFreeze.data.params[i].paramKey].push(file);
                                                                                                                } else {
                                                                                                                    params[eoFreeze.data.params[i].paramKey] = [file, params[eoFreeze.data.params[i].paramKey]];
                                                                                                                }
                                                                                                            } else {
                                                                                                                params[eoFreeze.data.params[i].paramKey] = file;
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                } else {
                                                                                                    if (eoFreeze.data.params[i].paramKey in params) {
                                                                                                        if (Object.prototype.toString.call(params[eoFreeze.data.params[i].paramKey]) == '[object Array]') {
                                                                                                            params[eoFreeze.data.params[i].paramKey].push(eoFreeze.data.params[i].paramInfo || '');
                                                                                                        } else {
                                                                                                            params[eoFreeze.data.params[i].paramKey] = [params[eoFreeze.data.params[i].paramKey], eoFreeze.data.params[i].paramInfo || ''];
                                                                                                        }
                                                                                                    } else {
                                                                                                        params[eoFreeze.data.params[i].paramKey] = eoFreeze.data.params[i].paramInfo || '';
                                                                                                    }
                                                                                                }
                                                                                            } else {
                                                                                                if (eoFreeze.data.params[i].paramKey in params) {
                                                                                                    if ((0, _typeof3.default)(params[eoFreeze.data.params[i].paramKey]) == 'object') {
                                                                                                        params[eoFreeze.data.params[i].paramKey].push(eoFreeze.data.params[i].paramInfo || '');
                                                                                                    } else {
                                                                                                        params[eoFreeze.data.params[i].paramKey] = [params[eoFreeze.data.params[i].paramKey], eoFreeze.data.params[i].paramInfo || ''];
                                                                                                    }
                                                                                                } else {
                                                                                                    params[eoFreeze.data.params[i].paramKey] = eoFreeze.data.params[i].paramInfo || '';
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    } else {
                                                                                       
                                                                                        var formJsonData = _requestUtils.HANDLE_PARAMS.handleFormJson(eoFreeze.data.params, LANG);
                                                                                        if (formJsonData.error.status == 1) {
                                                                                            eoFreeze.data.error = true;
                                                                                            handleErrorReason(formJsonData.error);
                                                                                        }
                                                                                        if (eoFreeze.data.beforeScript) {
                                                                                            params = JSON.parse(formJsonData.dataParams);
                                                                                        } else {
                                                                                            params = formJsonData.dataParams;
                                                                                        }
                                                                                    }
                                                                                    break;
                                                                                }
                                                                            case '1':
                                                                                {
                                                                                    if (eoFreeze.data.raw) {
                                                                                        eoFreeze.data.raw = _commonUtils.COMMON_TOOLS.evalBindParam(eoFreeze.data.raw, response, responseHeaders);
                                                                                    }
                                                                                    raw = eoFreeze.data.raw;
                                                                                    break;
                                                                                }
                                                                            case '2':
                                                                                {

                                                                                   
                                                                                    var options = {
                                                                                        rootType: eoFreeze.request.apiRequestParamJsonType || "0"
                                                                                    };
                                                                                    params = _requestUtils.HANDLE_PARAMS.handleJSON(eoFreeze.data.params, options);
                                                                                    break;
                                                                                }
                                                                            case '3':
                                                                                {
                                                                                    params = _requestUtils.HANDLE_PARAMS.handleJSON(eoFreeze.data.params, {
                                                                                        rootType: "0"
                                                                                    });
                                                                                    break;
                                                                                }

                                                                        }
                                                                       
                                                                        if (eoFreeze.data.auth) {
                                                                            switch (Number(eoFreeze.data.auth.status)) {
                                                                                case 1:
                                                                                    {
                                                                                        if (eoFreeze.data.auth.basicAuth) {
                                                                                            var str = eoFreeze.data.auth.basicAuth.username + ':' + eoFreeze.data.auth.basicAuth.password;
                                                                                            headers['Authorization'] = 'Basic ' + CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(str));
                                                                                        }
                                                                                        break;
                                                                                    }
                                                                                case 2:
                                                                                    {
                                                                                        var compareTable = {
                                                                                            'query': query,
                                                                                            'header': headers
                                                                                        };
                                                                                        var result = _requestUtils.REQUEST_COMMON.jwtEncode(eoFreeze.data.auth.jwtAuth, LANG);
                                                                                        if (result.type == 'error') {
                                                                                            eoFreeze.data.error = true;
                                                                                            handleErrorReason(result.errorReason);
                                                                                        } else {
                                                                                            compareTable[eoFreeze.data.auth.jwtAuth.position][eoFreeze.data.auth.jwtAuth.tokenName || ""] = result;
                                                                                        }
                                                                                    }
                                                                            }
                                                                        }
                                                                       
                                                                        for (var i = 0; i < eoFreeze.data.headers.length;) {
                                                                            if (!eoFreeze.data.headers[i].headerName || !eoFreeze.data.headers[i].checkbox) {
                                                                                eoFreeze.data.headers.splice(i, 1);
                                                                            } else {
                                                                                headers[_commonUtils.COMMON_TOOLS.evalBindParam(eoFreeze.data.headers[i].headerName, response, responseHeaders)] = _commonUtils.COMMON_TOOLS.evalBindParam(eoFreeze.data.headers[i].headerValue, response, responseHeaders);
                                                                                i++;
                                                                            }
                                                                        }
                                                                    };

                                                                    getPublicFile = function getPublicFile(fileUrl, uuid) {
                                                                        return new _promise2.default(function (resolve1, reject1) {
                                                                            var oReq = new XMLHttpRequest();
                                                                            oReq.open("get", fileUrl, true);
                                                                            oReq.onload = reqListener;
                                                                            oReq.onerror = function () {
                                                                                reject1();
                                                                            };
                                                                            oReq.responseType = "blob";
                                                                            oReq.send();

                                                                            function reqListener() {
                                                                                if (oReq.status == 200) {
                                                                                    _requestUtils.PUBLIC_FILE[uuid] = new Blob();
                                                                                    _requestUtils.PUBLIC_FILE[uuid] = this.response;
                                                                                    resolve1();
                                                                                } else {
                                                                                    reject1();
                                                                                }
                                                                            }
                                                                        });
                                                                    };

                                                                    handleErrorReason = function handleErrorReason(errorReason) {
                                                                        errorReasonPatt.errorReason = errorReason;
                                                                        eoFreeze.data.errorReason = _commonUtils.COMMON_TOOLS.handleErrorReason(errorReasonPatt);
                                                                    };

                                                                    caseData = JSON.parse(caseList.caseData[k].caseData);
                                                                    error = {};
                                                                    eoFreeze = {
                                                                        constant: {},
                                                                        request: {
                                                                            apiUrl: caseData.URL,
                                                                            requestHeaders: {},
                                                                            httpHeader: caseData.httpHeader,
                                                                            params: {},
                                                                            beforeTime: new Date(),
                                                                            apiRequestParamJsonType: caseData.apiRequestParamJsonType || "0",
                                                                            flagFormDataToJson: caseData.toJson ? caseData.toJson : false,
                                                                            processData: true,
                                                                            ContentType: 'application/x-www-form-urlencoded;charset=utf-8'
                                                                        },
                                                                        setting: {
                                                                            keepGoing: caseData.keepGoing || false,
                                                                            judgeSetting: !!caseList.caseData[k].judgeSetting,
                                                                            timeoutLimit: caseList.caseData[k].timeoutLimit
                                                                        },
                                                                        response: {
                                                                            error: {},
                                                                            whichXhr: 'success',
                                                                            responseHeaders: {}
                                                                        },
                                                                        report: {
                                                                            params: {},
                                                                            requestType: caseData.requestType,
                                                                            errorText: '',
                                                                            headers: {}
                                                                        },
                                                                        data: {
                                                                            flagFile: false,
                                                                            location: caseList.location,
                                                                            oldVersion: caseList.oldVersion,
                                                                            productType: caseList.productType,
                                                                            error: false,
                                                                            httpHeader: caseData.httpHeader,
                                                                            requestType: caseData.requestType,
                                                                            method: caseData.apiRequestType,
                                                                            params: caseData.params,
                                                                            restfulParams: caseData.restfulParam || [],
                                                                            raw: caseData.raw,
                                                                            headers: caseData.headers,
                                                                            Url: caseData.URL,
                                                                            env: caseList.env,
                                                                            auth: caseData.auth,
                                                                            beforeScript: caseData.script ? caseData.script.before : '',
                                                                            afterScript: caseData.script ? caseData.script.after : '',
                                                                            commonFunList: caseList.commonFunList || [],
                                                                            fileArr: [],
                                                                            errorReason: []
                                                                        }
                                                                    };
                                                                    errorReasonPatt = {
                                                                        errorReasonObj: eoFreeze.data.errorReason,
                                                                        oldVersion: eoFreeze.data.oldVersion,
                                                                        productType: eoFreeze.data.productType,
                                                                        errorReason: []
                                                                    };

                                                                    if (eoFreeze.data.auth && eoFreeze.data.auth.status != '0') {
                                                                        env.envAuth = {
                                                                            status: '0'
                                                                        };
                                                                    }
                                                                   
                                                                    url = '', params = {}, headers = {}, query = {}, raw = '', rest = {};
                                                                   

                                                                    Redirection = {
                                                                        status: false,
                                                                        location: ''
                                                                    };
                                                                   

                                                                    host = '';
                                                                   

                                                                    eoFreeze.data.method = _commonUtils.COMMON_TOOLS.judgeRequestMethod(eoFreeze.data.method);

                                                                    for (i = 0; i < eoFreeze.data.params.length; i++) {
                                                                        if (eoFreeze.data.params[i].paramType == '1') {
                                                                            eoFreeze.data.flagFile = true;
                                                                            eoFreeze.data.fileArr.push(eoFreeze.data.params[i].files);
                                                                        }
                                                                    }

                                                                    i = 0;

                                                                case 16:
                                                                    if (!(i < eoFreeze.data.fileArr.length)) {
                                                                        _context.next = 28;
                                                                        break;
                                                                    }

                                                                    j = 0;

                                                                case 18:
                                                                    if (!(j < eoFreeze.data.fileArr[i].length)) {
                                                                        _context.next = 25;
                                                                        break;
                                                                    }

                                                                   
                                                                    fileUrl = eoFreeze.data.location + "nodeHttpServer/export" + eoFreeze.data.fileArr[i][j].path.slice(1);
                                                                    _context.next = 22;
                                                                    return getPublicFile(fileUrl, eoFreeze.data.fileArr[i][j].uuid).catch(function (e) {
                                                                        console.log("singleAjax:file no exist");
                                                                    });

                                                                case 22:
                                                                    j++;
                                                                    _context.next = 18;
                                                                    break;

                                                                case 25:
                                                                    i++;
                                                                    _context.next = 16;
                                                                    break;

                                                                case 28:
                                                                   
                                                                    url = eoFreeze.request.apiUrl;
                                                                    queryOrigin = _requestUtils.HANDLE_URL.splitQuery(url);
                                                                    key = Object.key, value = Object.value, entries = _entries5.default;
                                                                    _iteratorNormalCompletion = true;
                                                                    _didIteratorError = false;
                                                                    _iteratorError = undefined;
                                                                    _context.prev = 34;

                                                                    for (_iterator = (0, _getIterator3.default)(entries(queryOrigin)); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                                                                        _ref3 = _step.value;
                                                                        _ref4 = (0, _slicedToArray3.default)(_ref3, 2);
                                                                        _key = _ref4[0];
                                                                        _value = _ref4[1];

                                                                        query[_commonUtils.COMMON_TOOLS.evalBindParam(_key, response, responseHeaders)] = _commonUtils.COMMON_TOOLS.evalBindParam(_value, response, responseHeaders);
                                                                    }
                                                                    _context.next = 42;
                                                                    break;

                                                                case 38:
                                                                    _context.prev = 38;
                                                                    _context.t0 = _context['catch'](34);
                                                                    _didIteratorError = true;
                                                                    _iteratorError = _context.t0;

                                                                case 42:
                                                                    _context.prev = 42;
                                                                    _context.prev = 43;

                                                                    if (!_iteratorNormalCompletion && _iterator.return) {
                                                                        _iterator.return();
                                                                    }

                                                                case 45:
                                                                    _context.prev = 45;

                                                                    if (!_didIteratorError) {
                                                                        _context.next = 48;
                                                                        break;
                                                                    }

                                                                    throw _iteratorError;

                                                                case 48:
                                                                    return _context.finish(45);

                                                                case 49:
                                                                    return _context.finish(42);

                                                                case 50:
                                                                    handleArguments();
                                                                   
                                                                   
                                                                    beforeResponse = (0, _assign2.default)({}, response);

                                                                    if (eoFreeze.data.beforeScript || eoFreeze.data.afterScript) {
                                                                        eoFreeze.data.eo = _injectCode.INJECT_CODE.defineEo(eoFreeze.data.commonFunList, LANG, env);
                                                                    }
                                                                    beforeResult = _injectCode.INJECT_CODE.evalBeforeScript(LANG, eoFreeze.data.beforeScript, url, query, headers, params, raw, env, eoFreeze.data.eo, beforeResponse);

                                                                    if (beforeResult.error) {
                                                                        eoFreeze.data.error = true;
                                                                        handleErrorReason(beforeResult.errorReason);
                                                                    } else {
                                                                        url = beforeResult.url;
                                                                        query = beforeResult.query;
                                                                        headers = beforeResult.headers;
                                                                        params = beforeResult.params;
                                                                        raw = beforeResult.raw;
                                                                        env = beforeResult.env;
                                                                    }
                                                                    if (eoFreeze.data.method == 'GET') {
                                                                        if ((typeof params === 'undefined' ? 'undefined' : (0, _typeof3.default)(params)) == 'object') {
                                                                            midParams = JSON.parse((0, _stringify2.default)(params));

                                                                            query = (0, _assign2.default)(query, midParams);
                                                                            params = {};
                                                                        } else {
                                                                            query[params] = '';
                                                                            params = '';
                                                                        }
                                                                    }
                                                                    url = _requestUtils.HANDLE_URL.jointQuery(url, query);
                                                                    url = _requestUtils.HANDLE_URL.replaceRest(url, rest);
                                                                    eoFreeze.data.flagFile = false;
                                                                    _iteratorNormalCompletion2 = true;
                                                                    _didIteratorError2 = false;
                                                                    _iteratorError2 = undefined;
                                                                    _context.prev = 62;
                                                                    for (_iterator2 = (0, _getIterator3.default)(entries(params)); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                                                                        _ref5 = _step2.value;
                                                                        _ref6 = (0, _slicedToArray3.default)(_ref5, 2);
                                                                        _key2 = _ref6[0];
                                                                        _value2 = _ref6[1];

                                                                        if (Object.prototype.toString.call(_value2) == '[object Blob]') {
                                                                            eoFreeze.data.flagFile = true;
                                                                        }
                                                                        if (Object.prototype.toString.call(_value2) == '[object Array]') {
                                                                            _value2.forEach(function (item) {
                                                                                if (Object.prototype.toString.call(item) == '[object Blob]') {
                                                                                    eoFreeze.data.flagFile = true;
                                                                                }
                                                                            });
                                                                        }
                                                                    }
                                                                    _context.next = 70;
                                                                    break;

                                                                case 66:
                                                                    _context.prev = 66;
                                                                    _context.t1 = _context['catch'](62);
                                                                    _didIteratorError2 = true;
                                                                    _iteratorError2 = _context.t1;

                                                                case 70:
                                                                    _context.prev = 70;
                                                                    _context.prev = 71;

                                                                    if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                                                        _iterator2.return();
                                                                    }

                                                                case 73:
                                                                    _context.prev = 73;

                                                                    if (!_didIteratorError2) {
                                                                        _context.next = 76;
                                                                        break;
                                                                    }

                                                                    throw _iteratorError2;

                                                                case 76:
                                                                    return _context.finish(73);

                                                                case 77:
                                                                    return _context.finish(70);

                                                                case 78:
                                                                    midEnvReulst = _requestUtils.REQUEST_COMMON.handleEnv(env, url, headers, params, raw, eoFreeze.data.requestType, eoFreeze.data.flagFile, eoFreeze.request.flagFormDataToJson, LANG);

                                                                    if (midEnvReulst.type == 'error') {
                                                                        eoFreeze.data.error = true;
                                                                        handleErrorReason(midEnvReulst.errorReason);
                                                                    }
                                                                    url = midEnvReulst.url;
                                                                    headers = midEnvReulst.headers;
                                                                    params = midEnvReulst.params;
                                                                    raw = midEnvReulst.raw;
                                                                    midRequestParams = _requestUtils.HANDLE_PARAMS.handleRequestParams(headers, eoFreeze.data.requestType, eoFreeze.request.flagFormDataToJson, eoFreeze.data.flagFile, params, raw, eoFreeze.request.ContentType, eoFreeze.request.processData, eoFreeze.report.requestType);

                                                                    eoFreeze.report.params = midRequestParams.report;
                                                                    eoFreeze.request.params = midRequestParams.request;
                                                                    raw = midRequestParams.raw;
                                                                    eoFreeze.request.processData = midRequestParams.processData;
                                                                    eoFreeze.request.ContentType = midRequestParams.ContentType;
                                                                    eoFreeze.report.requestType = midRequestParams.reportType;
                                                                    url = _requestUtils.HANDLE_URL.handleProtocol(url, eoFreeze.request.httpHeader);
                                                                   
                                                                    errorBackResult = {
                                                                        type: 'auto',
                                                                        caseListIndex: caseListIndex,
                                                                        k: k,
                                                                        url: url,
                                                                        testDeny: 0,
                                                                        startTime: codeTestTime.startTime,
                                                                        data: eoFreeze.data,
                                                                        caseData: caseList.caseData,
                                                                        request: eoFreeze.request,
                                                                        jsonResultVerification: caseList.caseData[k].jsonResultVerification,
                                                                        report: eoFreeze.report,
                                                                        backResult: backResult,
                                                                        errorReason: "",
                                                                        responseType: "error"
                                                                    };
                                                                    headerResult = _requestUtils.HANDLE_HEADER.isLegal(headers, LANG);

                                                                    if (headerResult.error) {
                                                                        eoFreeze.data.error = true;
                                                                        handleErrorReason(headerResult.errorReason);
                                                                    }

                                                                    if (!eoFreeze.data.error) {
                                                                        _context.next = 100;
                                                                        break;
                                                                    }

                                                                    errorBackResult.errorReason = eoFreeze.data.errorReason;
                                                                    _commonUtils.COMMON_TOOLS.postError(errorBackResult);
                                                                    reject('test error');
                                                                    return _context.abrupt('return');

                                                                case 100:
                                                                    window.parent.chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders, {
                                                                        urls: ["http://*/*", "https://*/*"],
                                                                        types: ["xmlhttprequest"]
                                                                    }, ["blocking", "requestHeaders"]);
                                                                    window.parent.chrome.webRequest.onHeadersReceived.addListener(getResponseHeaders, {
                                                                        urls: ["http://*/*", "https://*/*"]
                                                                    }, ["responseHeaders", "blocking"]);
                                                                    if (eoFreeze.data.method == 'GET') {
                                                                        eoFreeze.request.ContentType = false;
                                                                    }
                                                                    timeoutFun = null;
                                                                    Ajax = $.ajax({
                                                                        url: url,
                                                                        traditional: true,
                                                                        beforeSend: function beforeSend(request) {
                                                                            eoFreeze.request.beforeTime = new Date();
                                                                            if (!/^[1-9]\d*$/.test(eoFreeze.setting.timeoutLimit)) {
                                                                                eoFreeze.setting.timeoutLimit = 10000;
                                                                            }
                                                                            timeoutFun = setTimeout(function () {
                                                                                Ajax.abort();
                                                                                errorBackResult.testDeny = eoFreeze.setting.timeoutLimit;
                                                                                errorBackResult.responseType = "timeout";
                                                                                _commonUtils.COMMON_TOOLS.postError(errorBackResult);
                                                                                reject('afterScript error');
                                                                            }, Number(eoFreeze.setting.timeoutLimit));
                                                                        },
                                                                        contentType: eoFreeze.request.ContentType,
                                                                        processData: eoFreeze.request.processData,
                                                                        type: eoFreeze.data.method,
                                                                        async: true,
                                                                        data: eoFreeze.request.params
                                                                    }).done(function (successData, textStatus, xhr) {
                                                                        clearTimeout(timeoutFun);
                                                                        eoFreeze.response.whichXhr = 'success';
                                                                    }).fail(function (xhr, textStatus) {
                                                                        clearTimeout(timeoutFun);
                                                                        eoFreeze.response.whichXhr = 'error';
                                                                    }).always(function (successData, textStatus, jqXHR) {
                                                                        chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders);
                                                                        chrome.webRequest.onHeadersReceived.removeListener(getResponseHeaders);
                                                                        if (textStatus != 'abort') {
                                                                           
                                                                            var body = '';
                                                                            var matchType = caseList.caseData[k].matchType;
                                                                            var matchRule = caseList.caseData[k].matchRule;
                                                                            caseList.caseData[k].responseHeaderVerification = caseList.caseData[k].responseHeaderVerification || {};
                                                                            var headerRule = caseList.caseData[k].responseHeaderVerification.matchRule || [];
                                                                            var headerType = caseList.caseData[k].responseHeaderVerification.matchType;
                                                                            var keepGoing = eoFreeze.setting.keepGoing;
                                                                            var judgeSetting = eoFreeze.setting.judgeSetting || false;
                                                                            var jsonResultVerification = caseList.caseData[k].jsonResultVerification || {};
                                                                           
                                                                            var isMatch = true;
                                                                            var responseType = 'success';
                                                                            var statusCode = caseList.caseData[k].statusCode;
                                                                            var isStopTest = false;
                                                                           
                                                                            var xhr;
                                                                            if (eoFreeze.response.whichXhr == 'success') {
                                                                                xhr = jqXHR;
                                                                            } else {
                                                                                xhr = successData;
                                                                            }
                                                                           
                                                                            var testDeny = new Date() - eoFreeze.request.beforeTime;
                                                                            errorBackResult.testDeny = testDeny;
                                                                            if (xhr.status == 0) {
                                                                                _commonUtils.COMMON_TOOLS.postError(errorBackResult);
                                                                                reject('afterScript error');
                                                                                return;
                                                                            };
                                                                            var responseText = xhr.responseText;
                                                                           
                                                                            var body = xhr.responseText;
                                                                           
                                                                            var afterResult = _injectCode.INJECT_CODE.evalAfterScript(LANG, eoFreeze.data.afterScript, body, env, eoFreeze.data.eo, eoFreeze.data.productType);
                                                                            if (afterResult.error) {
                                                                                handleErrorReason(afterResult.errorReason);
                                                                                errorBackResult.errorReason = eoFreeze.data.errorReason;
                                                                                errorBackResult.responseHeaders = eoFreeze.response.responseHeaders;
                                                                                _commonUtils.COMMON_TOOLS.postError(errorBackResult);
                                                                                reject('afterScript error');
                                                                                return;
                                                                            } else {
                                                                               
                                                                                body = afterResult.response;
                                                                                env = afterResult.env;
                                                                            }
                                                                            var parseBody = body;
                                                                            try {
                                                                                if (typeof body != 'string') {
                                                                                    responseText = (0, _stringify2.default)(body);
                                                                                    if ((0, _stringify2.default)(JSON.parse(xhr.responseText)) == responseText) {
                                                                                        responseText = xhr.responseText;
                                                                                    }
                                                                                } else {
                                                                                    responseText = body;
                                                                                    parseBody = JSON.parse(body);
                                                                                }
                                                                            } catch (e) {};
                                                                           
                                                                            response[caseList.caseData[k].connID] = parseBody;
                                                                            responseHeaders[caseList.caseData[k].connID] = eoFreeze.response.responseHeaders;
                                                                            isMatch = _commonUtils.COMMON_TOOLS.judgeResponseHeaders({
                                                                                headerType: headerType,
                                                                                headerRule: headerRule,
                                                                                response: response,
                                                                                judgeSetting: judgeSetting,
                                                                                allResponseHeaders: responseHeaders,
                                                                                responseHeaders: eoFreeze.response.responseHeaders,
                                                                                callback: handleErrorReason
                                                                            });
                                                                            if (judgeSetting || isMatch == true) {
                                                                                if (matchType == 3) {
                                                                                   
                                                                                } else {
                                                                                   
                                                                                   
                                                                                    if (xhr.status != statusCode) {
                                                                                       
                                                                                        isMatch = false;
                                                                                        handleErrorReason(_commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.Match.statusCode[LANG], [statusCode, xhr.status]));
                                                                                    }
                                                                                    if (isMatch || judgeSetting) switch (matchType) {
                                                                                        case 2:
                                                                                            {
                                                                                                var match = matchRule;
                                                                                                var result = _commonUtils.COMMON_TOOLS.selfLoopMatchJson(caseList.productType, match, parseBody, LANG, judgeSetting, response, responseHeaders, jsonResultVerification);
                                                                                                if (!result.isMatch) {
                                                                                                    isMatch = false;
                                                                                                    handleErrorReason(result.errorReason);
                                                                                                }
                                                                                                break;
                                                                                            }
                                                                                        case 0:
                                                                                            {
                                                                                               
                                                                                                if (responseText != matchRule) {
                                                                                                    isMatch = false;
                                                                                                    handleErrorReason(_commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.Match.all[LANG], [matchRule, responseText]));
                                                                                                }
                                                                                                break;
                                                                                            }
                                                                                        case 1:
                                                                                            {
                                                                                               
                                                                                                try {
                                                                                                    var patt = new RegExp(matchRule);
                                                                                                    if (!patt.test(responseText)) {
                                                                                                        isMatch = false;
                                                                                                        handleErrorReason(_commonUtils.COMMON_TOOLS.handleTip(_constant.CONSTANT.LANG.Match.patt[LANG], [matchRule, responseText]));
                                                                                                    }
                                                                                                } catch (e) {
                                                                                                    isMatch = false;
                                                                                                    handleErrorReason(_constant.CONSTANT.LANG.PattError[LANG]);
                                                                                                }
                                                                                                break;
                                                                                            }
                                                                                        case 4:
                                                                                            {
                                                                                                var _match = matchRule;
                                                                                                try {
                                                                                                    var json = $.xml2json(parseBody);
                                                                                                    var result = _commonUtils.COMMON_TOOLS.selfLoopMatchJson(caseList.productType, _match, json, LANG, judgeSetting, response, responseHeaders);
                                                                                                    if (!result.isMatch) {
                                                                                                        isMatch = false;
                                                                                                        handleErrorReason(result.errorReason);
                                                                                                    }
                                                                                                } catch (e) {
                                                                                                    if (e) {
                                                                                                        isMatch = false;
                                                                                                        handleErrorReason(_constant.CONSTANT.LANG.XmlError[LANG]);
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                    }
                                                                                }
                                                                            }
                                                                            if (isMatch == false) {
                                                                                responseType = 'matchError';
                                                                                isStopTest = keepGoing ? false : true;
                                                                            }
                                                                            var caseListID = 0;
                                                                            if (caseListIndex != 0) {
                                                                                caseListID = caseListIndex - 1;
                                                                            } else {
                                                                                caseListID = k;
                                                                            }
                                                                            backResult.responseList[caseListID] = {
                                                                                apiIndex: caseListID,
                                                                                isStopTest: isStopTest,
                                                                                keepGoing: keepGoing,
                                                                                general: {
                                                                                    time: testDeny + 'ms',
                                                                                    requestUrl: url,
                                                                                    requestMethod: eoFreeze.data.method,
                                                                                    statusCode: xhr.status,
                                                                                    name: caseList.caseData[k].apiName,
                                                                                    match: {
                                                                                        jsonResultVerification: jsonResultVerification,
                                                                                        headerRule: headerRule,
                                                                                        headerType: headerType,
                                                                                        rule: matchRule,
                                                                                        type: matchType,
                                                                                        statusCode: statusCode
                                                                                    }
                                                                                },
                                                                                responseHeaders: (0, _stringify2.default)(eoFreeze.response.responseHeaders) == '{}' ? null : eoFreeze.response.responseHeaders,
                                                                                requestHeaders: (0, _stringify2.default)(eoFreeze.request.requestHeaders) == '{}' ? null : eoFreeze.request.requestHeaders,
                                                                                requestBody: {
                                                                                    requestType: eoFreeze.report.requestType,
                                                                                    body: eoFreeze.report.params
                                                                                },
                                                                                response: responseText,
                                                                                errorReason: eoFreeze.data.errorReason,
                                                                                responseType: responseType
                                                                            };
                                                                            if (isStopTest || k == amount - 1) {
                                                                                codeTestTime.finishTime = new Date();
                                                                                codeTestTime.finishTime = codeTestTime.finishTime - codeTestTime.startTime;
                                                                                backResult.time = codeTestTime.finishTime + "ms";
                                                                            }
                                                                            if (batchIndex == undefined) {
                                                                                auto.postMessage(backResult);
                                                                            }
                                                                            if (isMatch == false || isStopTest) {
                                                                                backResult.reportStatus = 'error';
                                                                            }
                                                                           
                                                                            if (isStopTest) {
                                                                                reject('test stop');
                                                                            } else {
                                                                                resolve('success');
                                                                            }
                                                                        }
                                                                    });

                                                                    if (batchIndex != undefined) {
                                                                        AUTO.ajaxs.push(Ajax);
                                                                    } else {
                                                                        if (caseListIndex == 0) {
                                                                            AUTO.ajaxs[k] = Ajax;
                                                                        } else {
                                                                            AUTO.ajaxs[caseListIndex - 1] = Ajax;
                                                                        }
                                                                    }

                                                                case 106:
                                                                case 'end':
                                                                    return _context.stop();
                                                            }
                                                        }
                                                    }, _callee, this, [[34, 38, 42, 50], [43,, 45, 49], [62, 66, 70, 78], [71,, 73, 77]]);
                                                }));

                                                return function (_x, _x2) {
                                                    return _ref2.apply(this, arguments);
                                                };
                                            }());
                                        };

                                        asyncControl = function () {
                                            var _ref15 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {
                                                var k;
                                                return _regenerator2.default.wrap(function _callee2$(_context2) {
                                                    while (1) {
                                                        switch (_context2.prev = _context2.next) {
                                                            case 0:
                                                                k = 0;

                                                            case 1:
                                                                if (!(k < caseLen)) {
                                                                    _context2.next = 7;
                                                                    break;
                                                                }

                                                                _context2.next = 4;
                                                                return sendRequest(k);

                                                            case 4:
                                                                k++;
                                                                _context2.next = 1;
                                                                break;

                                                            case 7:
                                                            case 'end':
                                                                return _context2.stop();
                                                        }
                                                    }
                                                }, _callee2, this);
                                            }));

                                            return function asyncControl() {
                                                return _ref15.apply(this, arguments);
                                            };
                                        }();

                                        _afterCase = function _afterCase() {
                                            if (caseList.afterCase.caseCodeList != false) {
                                                caseList.afterCase.env = env;
                                                caseList.afterCase.isAfter = true;
                                                caseList.afterCase.cookie = cookieObj;
                                                (0, _envCase.handleCaseCode)(caseList.productType, caseList.afterCase).then(function (result) {
                                                    backResult.afterCaseReportList = result.report;
                                                    auto.postMessage(backResult);
                                                }).catch(function (e) {
                                                    console.log('afterCase', e);
                                                });
                                            } else {
                                                auto.postMessage(backResult);
                                            }
                                        };

                                        caseLen = caseList.caseData.length;
                                        amount = caseList.amount;
                                        productType = caseList.productType;
                                        batchIndex = caseList.batchIndex;
                                        response = {};
                                        responseHeaders = {};
                                        codeTestTime = {
                                            startTime: null,
                                            finishTime: null
                                        };
                                        caseListIndex = caseList.index;
                                       

                                        cookieObj = autoData.preCode.result.cookie;

                                        backResult.batchIndex = batchIndex;
                                       
                                        if (caseListIndex == 0 && batchIndex == 'undefined') {
                                            AUTO.ajaxs = [];
                                        }
                                        backResult.responseList = new Array(amount);

                                        codeTestTime.startTime = new Date();
                                        asyncControl().then(function () {
                                            _afterCase();
                                        }).catch(function (e) {
                                            console.log("asyncControl:auto" + e);
                                            _afterCase();
                                        });
                                    }

                                case 15:
                                case 'end':
                                    return _context3.stop();
                            }
                        }
                    }, _callee3, this);
                }));

                return function scar_Test() {
                    return _ref.apply(this, arguments);
                };
            }();

            scar_Test();
        });
    }
});

/***/ }),
/* 109 */,
/* 110 */,
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(112);
module.exports = __webpack_require__(0).Object.values;


/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {


var $export = __webpack_require__(3);
var $values = __webpack_require__(61)(false);

$export($export.S, 'Object', {
  values: function values(it) {
    return $values(it);
  }
});


/***/ }),
/* 113 */,
/* 114 */,
/* 115 */,
/* 116 */,
/* 117 */,
/* 118 */,
/* 119 */,
/* 120 */,
/* 121 */,
/* 122 */,
/* 123 */,
/* 124 */,
/* 125 */,
/* 126 */,
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = { "default": __webpack_require__(128), __esModule: true };

/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(129);
module.exports = __webpack_require__(0).Object.freeze;


/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {


var isObject = __webpack_require__(5);
var meta = __webpack_require__(62).onFreeze;

__webpack_require__(65)('freeze', function ($freeze) {
  return function freeze(it) {
    return $freeze && isObject(it) ? $freeze(meta(it)) : it;
  };
});


/***/ })
],[72]);